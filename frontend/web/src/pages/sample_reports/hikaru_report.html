<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chessortag Style Report - Nakamura,Hikaru</title>
  <link rel="stylesheet" href="/assets/reports_css/report.css" id="report-css" />
  <link rel="stylesheet" href="/assets/reports_css/report_viz.css" id="report-viz-css" />
  <style>
    .tag-help {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-left: 6px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #e4e9ff;
      color: #1f2a44;
      font-size: 11px;
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
    }
    .tag-help:hover {
      background: #d6ddff;
    }
    .tag-cell {
      position: relative;
    }
    .tag-help-tooltip {
      position: absolute;
      left: 22px;
      top: 50%;
      transform: translateY(-50%);
      background: #0f172a;
      color: #fff;
      padding: 6px 8px;
      border-radius: 6px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
      font-size: 12px;
      line-height: 1.3;
      min-width: 180px;
      max-width: 260px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.15s ease, visibility 0.15s ease;
      z-index: 5;
      pointer-events: none;
    }
    .tag-cell:hover .tag-help-tooltip {
      opacity: 1;
      visibility: visible;
    }
  </style>
</head>
<body>
  <div class="report-root">
    <aside class="report-sidebar">
      <div class="sidebar-title">Chess Style Report</div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <a href="#section1-performance" class="sidebar-link parent-link">1. Performance Profile</a>
          <div class="nav-subsections">
            <a href="#perf-winrate" class="sidebar-sublink">1.1 Win rate</a>
            <a href="#perf-accuracy" class="sidebar-sublink">1.2 Accuracy</a>
            <a href="#perf-advantage" class="sidebar-sublink">1.3 Advantage conversion</a>
            <a href="#perf-defensive" class="sidebar-sublink">1.4 Defensive conversion</a>
            <a href="#perf-volatility" class="sidebar-sublink">1.5 Volatility/trajectory</a>
            <a href="#perf-engine" class="sidebar-sublink">1.6 Engine decision quality</a>
            <a href="#perf-tactical" class="sidebar-sublink">1.7 Tactical conversion</a>
            <a href="#perf-exchanges" class="sidebar-sublink">1.8 Knight/bishop exchanges</a>
            <a href="#perf-forced" class="sidebar-sublink">1.9 Forced moves</a>
            <a href="#perf-positions" class="sidebar-sublink">1.10 Winning/losing position handling</a>
          </div>
        </div>
        <div class="nav-section">
          <a href="#section2-style" class="sidebar-link parent-link">2. Style Parameters</a>
          <div class="nav-subsections">
            <a href="#style-maneuver" class="sidebar-sublink">2.1 Maneuver</a>
            <a href="#style-prophylaxis" class="sidebar-sublink">2.2 Prophylaxis</a>
            <a href="#style-semantic_control" class="sidebar-sublink">2.3 Semantic control</a>
            <a href="#style-control_over_dynamics" class="sidebar-sublink">2.4 Control over dynamics</a>
            <a href="#style-initiative" class="sidebar-sublink">2.5 Initiative</a>
            <a href="#style-tension" class="sidebar-sublink">2.6 Tension management</a>
            <a href="#style-structural" class="sidebar-sublink">2.7 Structural play</a>
            <a href="#style-sacrifice" class="sidebar-sublink">2.8 Sacrificial play</a>
            <a href="#style-exchanges_forced" class="sidebar-sublink">2.9 Style synthesis</a>
          </div>
        </div>
        <a href="#section3-overall" class="sidebar-link">3. Overall Synthesis</a>
        <div class="nav-subsections">
          <a href="#section-3-1-ability" class="sidebar-sublink">3.1 Ability evaluation</a>
          <a href="#section-3-2-rating" class="sidebar-sublink">3.2 FIDE rating estimation</a>
        </div>
        <div class="nav-section">
          <a href="#section4-openings" class="sidebar-link parent-link">4. Opening Repertoire</a>
          <div class="nav-subsections">
            <a href="#opening-white-table" class="sidebar-sublink">4.1 White openings table</a>
            <a href="#opening-black-table" class="sidebar-sublink">4.2 Black openings</a>
            <a href="#opening-main-repertoires" class="sidebar-sublink">4.3 Main repertoires</a>
            <a href="#opening-secondary" class="sidebar-sublink">4.4 Secondary weapons</a>
            <a href="#opening-depth" class="sidebar-sublink">4.5 Theoretical depth</a>
            <a href="#opening-style" class="sidebar-sublink">4.6 Connection to style</a>
            <a href="#opening-performance" class="sidebar-sublink">4.7 Underperforming vs shining</a>
            <a href="#opening-takeaways" class="sidebar-sublink">4.8 Practical takeaways</a>
          </div>
        </div>
        <div class="nav-section">
          <a href="#section5-training" class="sidebar-link parent-link">5. Training Recommendations</a>
          <div class="nav-subsections">
            <a href="#training-priorities" class="sidebar-sublink">5.1 Key priorities</a>
            <a href="#training-study" class="sidebar-sublink">5.2 Study methods</a>
            <a href="#training-habits" class="sidebar-sublink">5.3 Practical habits</a>
          </div>
        </div>
        <div class="nav-section">
          <a href="#section6-opponent" class="sidebar-link parent-link">6. Opponent Preparation</a>
          <div class="nav-subsections">
            <a href="#opponent-white" class="sidebar-sublink">6.1 Opening choices vs white</a>
            <a href="#opponent-black" class="sidebar-sublink">6.2 Opening choices vs black</a>
            <a href="#opponent-middlegame" class="sidebar-sublink">6.3 Middlegame strategies</a>
            <a href="#opponent-endgame" class="sidebar-sublink">6.4 Endgame strategies</a>
            <a href="#opponent-psychology" class="sidebar-sublink">6.5 Psychology / risk</a>
            <a href="#opponent-gameplan" class="sidebar-sublink">6.6 Summary game plan</a>
          </div>
        </div>
      </nav>
    </aside>

    <main class="report-main">
      <div class="main-inner">
        <!-- HEADER -->
        <section class="section-card report-header" id="top">
          <p class="eyebrow">Player Overview</p>
          <h1 class="report-title">Chessortag Style Report: Nakamura,Hikaru</h1>
          <p class="report-subtitle">Comprehensive breakdown across performance, style tags, openings, and preparation.</p>
          <div class="gm-strip"></div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 1: PERFORMANCE PROFILE -->
        <!-- ============================================================ -->
        <section id="section1-performance" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">1. Performance Profile</h2>
            <div class="section-body markdown-body">

              <!-- 1.1 WIN RATE -->
              <div id="perf-winrate" class="subsection">
                <h3>1.1 Win Rate</h3>
                <h4>Win–Loss–Draw by Color</h4>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Color</th>
                        <th>Win %</th>
                        <th>Loss %</th>
                        <th>Draw %</th>
                        <th>Avg Opponent Elo</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>White</td>
                        <td id="data-white-win"></td>
                        <td id="data-white-loss"></td>
                        <td id="data-white-draw"></td>
                        <td id="data-white-elo"></td>
                      </tr>
                      <tr>
                        <td>Black</td>
                        <td id="data-black-win"></td>
                        <td id="data-black-loss"></td>
                        <td id="data-black-draw"></td>
                        <td id="data-black-elo"></td>
                      </tr>
                      <tr>
                        <td><strong>Total</strong></td>
                        <td id="data-total-win"></td>
                        <td id="data-total-loss"></td>
                        <td id="data-total-draw"></td>
                        <td id="data-total-elo"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-1-winrate-llm" class="llm-slot"></div>
              </div>

              <!-- 1.2 ACCURACY -->
              <div id="perf-accuracy" class="subsection">
                <h3>1.2 Accuracy: Player vs Phases and Structures</h3>
                <h4>Accuracy System (Player)</h4>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Phase / Structure</th>
                        <th>Moves</th>
                        <th>Avg Loss (cp)</th>
                        <th>Accuracy Score</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Overall</td>
                        <td id="data-acc-overall-moves"></td>
                        <td id="data-acc-overall-loss"></td>
                        <td id="data-acc-overall-score"></td>
                      </tr>
                      <tr>
                        <td>Opening</td>
                        <td id="data-acc-opening-moves"></td>
                        <td id="data-acc-opening-loss"></td>
                        <td id="data-acc-opening-score"></td>
                      </tr>
                      <tr>
                        <td>Middlegame</td>
                        <td id="data-acc-middlegame-moves"></td>
                        <td id="data-acc-middlegame-loss"></td>
                        <td id="data-acc-middlegame-score"></td>
                      </tr>
                      <tr>
                        <td>Endgame</td>
                        <td id="data-acc-endgame-moves"></td>
                        <td id="data-acc-endgame-loss"></td>
                        <td id="data-acc-endgame-score"></td>
                      </tr>
                      <tr>
                        <td>Queenful</td>
                        <td id="data-acc-queenful-moves"></td>
                        <td id="data-acc-queenful-loss"></td>
                        <td id="data-acc-queenful-score"></td>
                      </tr>
                      <tr>
                        <td>Queenless</td>
                        <td id="data-acc-queenless-moves"></td>
                        <td id="data-acc-queenless-loss"></td>
                        <td id="data-acc-queenless-score"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <h4>Comparison with Peer and GM Baseline</h4>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Phase</th>
                        <th>Player</th>
                        <th>Same-Age Peer</th>
                        <th>GM Baseline</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Overall</td>
                        <td id="data-cmp-overall-player"></td>
                        <td id="data-cmp-overall-peer"></td>
                        <td id="data-cmp-overall-gm"></td>
                      </tr>
                      <tr>
                        <td>Opening</td>
                        <td id="data-cmp-opening-player"></td>
                        <td id="data-cmp-opening-peer"></td>
                        <td id="data-cmp-opening-gm"></td>
                      </tr>
                      <tr>
                        <td>Middlegame</td>
                        <td id="data-cmp-middlegame-player"></td>
                        <td id="data-cmp-middlegame-peer"></td>
                        <td id="data-cmp-middlegame-gm"></td>
                      </tr>
                      <tr>
                        <td>Endgame</td>
                        <td id="data-cmp-endgame-player"></td>
                        <td id="data-cmp-endgame-peer"></td>
                        <td id="data-cmp-endgame-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-2-accuracy-llm" class="llm-slot"></div>
              </div>

              <!-- 1.3 ADVANTAGE CONVERSION -->
              <div id="perf-advantage" class="subsection">
                <h3>1.3 Advantage Conversion</h3>
                <div class="table-wrapper">
                  <table class="report-table metric-table">
                    <thead>
                      <tr>
                        <th>Advantage Threshold</th>
                        <th>White: W / D / L</th>
                        <th>Black: W / D / L</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Reached +1</td>
                        <td id="data-adv-white-1"></td>
                        <td id="data-adv-black-1"></td>
                      </tr>
                      <tr>
                        <td>Reached +3</td>
                        <td id="data-adv-white-3"></td>
                        <td id="data-adv-black-3"></td>
                      </tr>
                      <tr>
                        <td>Reached +5</td>
                        <td id="data-adv-white-5"></td>
                        <td id="data-adv-black-5"></td>
                      </tr>
                      <tr>
                        <td>Reached +7</td>
                        <td id="data-adv-white-7"></td>
                        <td id="data-adv-black-7"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-3-advantage-llm" class="llm-slot"></div>
              </div>

              <!-- 1.4 DEFENSIVE CONVERSION -->
              <div id="perf-defensive" class="subsection">
                <h3>1.4 Defensive Conversion</h3>
                <div class="table-wrapper">
                  <table class="report-table metric-table">
                    <thead>
                      <tr>
                        <th>Deficit Threshold</th>
                        <th>White: W / D / L</th>
                        <th>Black: W / D / L</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Reached -1</td>
                        <td id="data-def-white-1"></td>
                        <td id="data-def-black-1"></td>
                      </tr>
                      <tr>
                        <td>Reached -3</td>
                        <td id="data-def-white-3"></td>
                        <td id="data-def-black-3"></td>
                      </tr>
                      <tr>
                        <td>Reached -5</td>
                        <td id="data-def-white-5"></td>
                        <td id="data-def-black-5"></td>
                      </tr>
                      <tr>
                        <td>Reached -7</td>
                        <td id="data-def-white-7"></td>
                        <td id="data-def-black-7"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-4-defensive-llm" class="llm-slot"></div>
              </div>

              <!-- 1.5 VOLATILITY/TRAJECTORY -->
              <div id="perf-volatility" class="subsection">
                <h3>1.5 Volatility/Trajectory</h3>
                <div class="table-wrapper">
                  <table class="report-table metric-table">
                    <thead>
                      <tr>
                        <th>Volatility Type</th>
                        <th>White</th>
                        <th>Black</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Smooth crush (controlled opponent)</td>
                        <td id="data-vol-smooth-crush-white"></td>
                        <td id="data-vol-smooth-crush-black"></td>
                      </tr>
                      <tr>
                        <td>Smooth collapse (opponent controlled)</td>
                        <td id="data-vol-smooth-collapse-white"></td>
                        <td id="data-vol-smooth-collapse-black"></td>
                      </tr>
                      <tr>
                        <td>Small swings (~±1.0)</td>
                        <td id="data-vol-small-swings-white"></td>
                        <td id="data-vol-small-swings-black"></td>
                      </tr>
                      <tr>
                        <td>Medium swings (~±2.0)</td>
                        <td id="data-vol-medium-swings-white"></td>
                        <td id="data-vol-medium-swings-black"></td>
                      </tr>
                      <tr>
                        <td>Big swings (4+ swings of ±2.0)</td>
                        <td id="data-vol-big-swings-white"></td>
                        <td id="data-vol-big-swings-black"></td>
                      </tr>
                      <tr>
                        <td>High-precision draws (no swings &gt; ±0.8)</td>
                        <td id="data-vol-precision-draws-white"></td>
                        <td id="data-vol-precision-draws-black"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-5-volatility-llm" class="llm-slot"></div>
              </div>

              <!-- 1.6 ENGINE DECISION QUALITY -->
              <div id="perf-engine" class="subsection">
                <h3>1.6 Engine Decision Quality</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Metric</th>
                        <th>Player</th>
                        <th>Peer Avg</th>
                        <th>GM Baseline</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Top-1 move %</td>
                        <td id="data-eng-top1-player"></td>
                        <td id="data-eng-top1-peer"></td>
                        <td id="data-eng-top1-gm"></td>
                      </tr>
                      <tr>
                        <td>Top-3 move %</td>
                        <td id="data-eng-top3-player"></td>
                        <td id="data-eng-top3-peer"></td>
                        <td id="data-eng-top3-gm"></td>
                      </tr>
                      <tr>
                        <td>Blunder rate (&gt;100cp loss)</td>
                        <td id="data-eng-blunder-player"></td>
                        <td id="data-eng-blunder-peer"></td>
                        <td id="data-eng-blunder-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-6-engine-llm" class="llm-slot"></div>
              </div>

              <!-- 1.7 TACTICAL CONVERSION -->
              <div id="perf-tactical" class="subsection">
                <h3>1.7 Tactical Conversion</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Metric</th>
                        <th>Value</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Tactical opportunities found</td>
                        <td id="data-tac-found"></td>
                      </tr>
                      <tr>
                        <td>Tactical opportunities missed</td>
                        <td id="data-tac-missed"></td>
                      </tr>
                      <tr>
                        <td>Tactical conversion rate</td>
                        <td id="data-tac-rate"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-7-tactical-llm" class="llm-slot"></div>
              </div>

              <!-- 1.8 KNIGHT/BISHOP EXCHANGES -->
              <div id="perf-exchanges" class="subsection">
                <h3>1.8 Knight/Bishop Exchanges</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Accurate knight/bishop exchange</td>
                        <td id="data-exch-accurate-count"></td>
                        <td id="data-exch-accurate-ratio"></td>
                        <td id="data-exch-accurate-gm"></td>
                      </tr>
                      <tr>
                        <td>Inaccurate knight/bishop exchange</td>
                        <td id="data-exch-inaccurate-count"></td>
                        <td id="data-exch-inaccurate-ratio"></td>
                        <td id="data-exch-inaccurate-gm"></td>
                      </tr>
                      <tr>
                        <td>Bad knight/bishop exchange</td>
                        <td id="data-exch-bad-count"></td>
                        <td id="data-exch-bad-ratio"></td>
                        <td id="data-exch-bad-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Total exchange frequency</strong></td>
                        <td id="data-exch-total-count"></td>
                        <td id="data-exch-total-ratio"></td>
                        <td id="data-exch-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-8-exchanges-llm" class="llm-slot"></div>
              </div>

              <!-- 1.9 FORCED MOVES -->
              <div id="perf-forced" class="subsection">
                <h3>1.9 Forced Moves</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Forced moves</td>
                        <td id="data-forced-count"></td>
                        <td id="data-forced-ratio"></td>
                        <td id="data-forced-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Forced Moves Frequency vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-forced-moves-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">25%</span>
                    <span class="gm-scale-mark">50%</span>
                    <span class="gm-scale-mark">75%</span>
                    <span class="gm-scale-mark">100%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-1-9-forced-llm" class="llm-slot"></div>
              </div>

              <!-- 1.10 WINNING/LOSING POSITION HANDLING -->
              <div id="perf-positions" class="subsection">
                <h3>1.10 Winning/Losing Position Handling</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Winning position handling</td>
                        <td id="data-pos-winning-count"></td>
                        <td id="data-pos-winning-ratio"></td>
                        <td id="data-pos-winning-gm"></td>
                      </tr>
                      <tr>
                        <td>Losing position handling</td>
                        <td id="data-pos-losing-count"></td>
                        <td id="data-pos-losing-ratio"></td>
                        <td id="data-pos-losing-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Winning Position Handling vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-positions-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">25%</span>
                    <span class="gm-scale-mark">50%</span>
                    <span class="gm-scale-mark">75%</span>
                    <span class="gm-scale-mark">100%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-1-10-positions-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 2: STYLE PARAMETERS -->
        <!-- ============================================================ -->
        <section id="section2-style" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">2. Style Parameters</h2>
            <div class="section-body markdown-body">

              <!-- 2.1 MANEUVER -->
              <div id="style-maneuver" class="subsection">
                <h3>2.1 Maneuver</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Constructive maneuver</td>
                        <td id="data-style-maneuver-constructive-count"></td>
                        <td id="data-style-maneuver-constructive-ratio"></td>
                        <td id="data-style-maneuver-constructive-gm"></td>
                      </tr>
                      <tr>
                        <td>Constructive maneuver (prepare)</td>
                        <td id="data-style-maneuver-prepare-count"></td>
                        <td id="data-style-maneuver-prepare-ratio"></td>
                        <td id="data-style-maneuver-prepare-gm"></td>
                      </tr>
                      <tr>
                        <td>Neutral maneuver</td>
                        <td id="data-style-maneuver-neutral-count"></td>
                        <td id="data-style-maneuver-neutral-ratio"></td>
                        <td id="data-style-maneuver-neutral-gm"></td>
                      </tr>
                      <tr>
                        <td>Misplaced maneuver</td>
                        <td id="data-style-maneuver-misplaced-count"></td>
                        <td id="data-style-maneuver-misplaced-ratio"></td>
                        <td id="data-style-maneuver-misplaced-gm"></td>
                      </tr>
                      <tr>
                        <td>Opening maneuver</td>
                        <td id="data-style-maneuver-opening-count"></td>
                        <td id="data-style-maneuver-opening-ratio"></td>
                        <td id="data-style-maneuver-opening-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall maneuver ratio</strong></td>
                        <td id="data-style-maneuver-total-count"></td>
                        <td id="data-style-maneuver-total-ratio"></td>
                        <td id="data-style-maneuver-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Overall Maneuver Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-maneuver-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">40%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-1-maneuver-llm" class="llm-slot"></div>
              </div>

              <!-- 2.2 PROPHYLAXIS -->
              <div id="style-prophylaxis" class="subsection">
                <h3>2.2 Prophylaxis</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Direct prophylactic</td>
                        <td id="data-style-prophylaxis-direct-count"></td>
                        <td id="data-style-prophylaxis-direct-ratio"></td>
                        <td id="data-style-prophylaxis-direct-gm"></td>
                      </tr>
                      <tr>
                        <td>Latent prophylactic</td>
                        <td id="data-style-prophylaxis-latent-count"></td>
                        <td id="data-style-prophylaxis-latent-ratio"></td>
                        <td id="data-style-prophylaxis-latent-gm"></td>
                      </tr>
                      <tr>
                        <td>Meaningless prophylactic</td>
                        <td id="data-style-prophylaxis-meaningless-count"></td>
                        <td id="data-style-prophylaxis-meaningless-ratio"></td>
                        <td id="data-style-prophylaxis-meaningless-gm"></td>
                      </tr>
                      <tr>
                        <td>Failed prophylactic</td>
                        <td id="data-style-prophylaxis-failed-count"></td>
                        <td id="data-style-prophylaxis-failed-ratio"></td>
                        <td id="data-style-prophylaxis-failed-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall prophylaxis ratio</strong></td>
                        <td id="data-style-prophylaxis-total-count"></td>
                        <td id="data-style-prophylaxis-total-ratio"></td>
                        <td id="data-style-prophylaxis-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Overall Prophylaxis Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-prophylaxis-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">40%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-2-prophylaxis-llm" class="llm-slot"></div>
              </div>

              <!-- 2.3 SEMANTIC CONTROL -->
              <div id="style-semantic_control" class="subsection">
                <h3>2.3 Semantic Control</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Control: simplify</td>
                        <td id="data-style-control-simplify-count"></td>
                        <td id="data-style-control-simplify-ratio"></td>
                        <td id="data-style-control-simplify-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: plan kill</td>
                        <td id="data-style-control-plankill-count"></td>
                        <td id="data-style-control-plankill-ratio"></td>
                        <td id="data-style-control-plankill-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: freeze/bind</td>
                        <td id="data-style-control-freeze-count"></td>
                        <td id="data-style-control-freeze-ratio"></td>
                        <td id="data-style-control-freeze-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: blockade passed pawn</td>
                        <td id="data-style-control-blockade-count"></td>
                        <td id="data-style-control-blockade-ratio"></td>
                        <td id="data-style-control-blockade-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: file seal</td>
                        <td id="data-style-control-fileseal-count"></td>
                        <td id="data-style-control-fileseal-ratio"></td>
                        <td id="data-style-control-fileseal-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: king safety shell</td>
                        <td id="data-style-control-kingsafety-count"></td>
                        <td id="data-style-control-kingsafety-ratio"></td>
                        <td id="data-style-control-kingsafety-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: space clamp</td>
                        <td id="data-style-control-spaceclamp-count"></td>
                        <td id="data-style-control-spaceclamp-ratio"></td>
                        <td id="data-style-control-spaceclamp-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: regroup/consolidate</td>
                        <td id="data-style-control-regroup-count"></td>
                        <td id="data-style-control-regroup-ratio"></td>
                        <td id="data-style-control-regroup-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: slowdown</td>
                        <td id="data-style-control-slowdown-count"></td>
                        <td id="data-style-control-slowdown-ratio"></td>
                        <td id="data-style-control-slowdown-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall semantic control ratio</strong></td>
                        <td id="data-style-control-total-count"></td>
                        <td id="data-style-control-total-ratio"></td>
                        <td id="data-style-control-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Semantic Control Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-semantic-control-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">15%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">45%</span>
                    <span class="gm-scale-mark">60%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-3-semantic-control-llm" class="llm-slot"></div>
              </div>

              <!-- 2.4 CONTROL OVER DYNAMICS -->
              <div id="style-control_over_dynamics" class="subsection">
                <h3>2.4 Control Over Dynamics</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Control over dynamics (overall)</td>
                        <td id="data-style-cod-overall-count"></td>
                        <td id="data-style-cod-overall-ratio"></td>
                        <td id="data-style-cod-overall-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: file seal</td>
                        <td id="data-style-cod-fileseal-count"></td>
                        <td id="data-style-cod-fileseal-ratio"></td>
                        <td id="data-style-cod-fileseal-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: freeze/bind</td>
                        <td id="data-style-cod-freeze-count"></td>
                        <td id="data-style-cod-freeze-ratio"></td>
                        <td id="data-style-cod-freeze-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: king safety</td>
                        <td id="data-style-cod-kingsafety-count"></td>
                        <td id="data-style-cod-kingsafety-ratio"></td>
                        <td id="data-style-cod-kingsafety-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: regroup/consolidate</td>
                        <td id="data-style-cod-regroup-count"></td>
                        <td id="data-style-cod-regroup-ratio"></td>
                        <td id="data-style-cod-regroup-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: plan kill</td>
                        <td id="data-style-cod-plankill-count"></td>
                        <td id="data-style-cod-plankill-ratio"></td>
                        <td id="data-style-cod-plankill-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: blockade passed pawn</td>
                        <td id="data-style-cod-blockade-count"></td>
                        <td id="data-style-cod-blockade-ratio"></td>
                        <td id="data-style-cod-blockade-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: simplify</td>
                        <td id="data-style-cod-simplify-count"></td>
                        <td id="data-style-cod-simplify-ratio"></td>
                        <td id="data-style-cod-simplify-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: space clamp</td>
                        <td id="data-style-cod-spaceclamp-count"></td>
                        <td id="data-style-cod-spaceclamp-ratio"></td>
                        <td id="data-style-cod-spaceclamp-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: slowdown</td>
                        <td id="data-style-cod-slowdown-count"></td>
                        <td id="data-style-cod-slowdown-ratio"></td>
                        <td id="data-style-cod-slowdown-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Control Over Dynamics vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-cod-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">15%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">45%</span>
                    <span class="gm-scale-mark">60%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-4-cod-llm" class="llm-slot"></div>
              </div>

              <!-- 2.5 INITIATIVE -->
              <div id="style-initiative" class="subsection">
                <h3>2.5 Initiative</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Initiative attempt</td>
                        <td id="data-style-initiative-attempt-count"></td>
                        <td id="data-style-initiative-attempt-ratio"></td>
                        <td id="data-style-initiative-attempt-gm"></td>
                      </tr>
                      <tr>
                        <td>Deferred initiative</td>
                        <td id="data-style-initiative-deferred-count"></td>
                        <td id="data-style-initiative-deferred-ratio"></td>
                        <td id="data-style-initiative-deferred-gm"></td>
                      </tr>
                      <tr>
                        <td>Premature attack</td>
                        <td id="data-style-initiative-premature-count"></td>
                        <td id="data-style-initiative-premature-ratio"></td>
                        <td id="data-style-initiative-premature-gm"></td>
                      </tr>
                      <tr>
                        <td>C-file pressure</td>
                        <td id="data-style-initiative-cfile-count"></td>
                        <td id="data-style-initiative-cfile-ratio"></td>
                        <td id="data-style-initiative-cfile-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Initiative Attempt Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-initiative-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">40%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-5-initiative-llm" class="llm-slot"></div>
              </div>

              <!-- 2.6 TENSION MANAGEMENT -->
              <div id="style-tension" class="subsection">
                <h3>2.6 Tension Management</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Tension creation</td>
                        <td id="data-style-tension-creation-count"></td>
                        <td id="data-style-tension-creation-ratio"></td>
                        <td id="data-style-tension-creation-gm"></td>
                      </tr>
                      <tr>
                        <td>Neutral tension creation</td>
                        <td id="data-style-tension-neutral-count"></td>
                        <td id="data-style-tension-neutral-ratio"></td>
                        <td id="data-style-tension-neutral-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Tension Creation Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-tension-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">5%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">15%</span>
                    <span class="gm-scale-mark">20%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-6-tension-llm" class="llm-slot"></div>
              </div>

              <!-- 2.7 STRUCTURAL PLAY -->
              <div id="style-structural" class="subsection">
                <h3>2.7 Structural Play</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Structural integrity</td>
                        <td id="data-style-structural-integrity-count"></td>
                        <td id="data-style-structural-integrity-ratio"></td>
                        <td id="data-style-structural-integrity-gm"></td>
                      </tr>
                      <tr>
                        <td>Structural compromise (dynamic)</td>
                        <td id="data-style-structural-dynamic-count"></td>
                        <td id="data-style-structural-dynamic-ratio"></td>
                        <td id="data-style-structural-dynamic-gm"></td>
                      </tr>
                      <tr>
                        <td>Structural compromise (static)</td>
                        <td id="data-style-structural-static-count"></td>
                        <td id="data-style-structural-static-ratio"></td>
                        <td id="data-style-structural-static-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Structural Integrity Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-structural-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">40%</span>
                    <span class="gm-scale-mark">60%</span>
                    <span class="gm-scale-mark">80%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-7-structural-llm" class="llm-slot"></div>
              </div>

              <!-- 2.8 SACRIFICIAL PLAY -->
              <div id="style-sacrifice" class="subsection">
                <h3>2.8 Sacrificial Play</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Tactical sacrifice</td>
                        <td id="data-style-sacrifice-tactical-count"></td>
                        <td id="data-style-sacrifice-tactical-ratio"></td>
                        <td id="data-style-sacrifice-tactical-gm"></td>
                      </tr>
                      <tr>
                        <td>Positional sacrifice</td>
                        <td id="data-style-sacrifice-positional-count"></td>
                        <td id="data-style-sacrifice-positional-ratio"></td>
                        <td id="data-style-sacrifice-positional-gm"></td>
                      </tr>
                      <tr>
                        <td>Inaccurate tactical sacrifice</td>
                        <td id="data-style-sacrifice-inaccurate-count"></td>
                        <td id="data-style-sacrifice-inaccurate-ratio"></td>
                        <td id="data-style-sacrifice-inaccurate-gm"></td>
                      </tr>
                      <tr>
                        <td>Speculative sacrifice</td>
                        <td id="data-style-sacrifice-speculative-count"></td>
                        <td id="data-style-sacrifice-speculative-ratio"></td>
                        <td id="data-style-sacrifice-speculative-gm"></td>
                      </tr>
                      <tr>
                        <td>Desperate sacrifice</td>
                        <td id="data-style-sacrifice-desperate-count"></td>
                        <td id="data-style-sacrifice-desperate-ratio"></td>
                        <td id="data-style-sacrifice-desperate-gm"></td>
                      </tr>
                      <tr>
                        <td>Tactical combination sacrifice</td>
                        <td id="data-style-sacrifice-combination-count"></td>
                        <td id="data-style-sacrifice-combination-ratio"></td>
                        <td id="data-style-sacrifice-combination-gm"></td>
                      </tr>
                      <tr>
                        <td>Tactical initiative sacrifice</td>
                        <td id="data-style-sacrifice-init-count"></td>
                        <td id="data-style-sacrifice-init-ratio"></td>
                        <td id="data-style-sacrifice-init-gm"></td>
                      </tr>
                      <tr>
                        <td>Positional structure sacrifice</td>
                        <td id="data-style-sacrifice-structure-count"></td>
                        <td id="data-style-sacrifice-structure-ratio"></td>
                        <td id="data-style-sacrifice-structure-gm"></td>
                      </tr>
                      <tr>
                        <td>Positional space sacrifice</td>
                        <td id="data-style-sacrifice-space-count"></td>
                        <td id="data-style-sacrifice-space-ratio"></td>
                        <td id="data-style-sacrifice-space-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall sacrifice ratio</strong></td>
                        <td id="data-style-sacrifice-total-count"></td>
                        <td id="data-style-sacrifice-total-ratio"></td>
                        <td id="data-style-sacrifice-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Overall Sacrifice Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-sacrifice-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">3%</span>
                    <span class="gm-scale-mark">6%</span>
                    <span class="gm-scale-mark">9%</span>
                    <span class="gm-scale-mark">12%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-8-sacrifice-llm" class="llm-slot"></div>
              </div>

              <!-- 2.9 STYLE SYNTHESIS -->
              <div id="style-exchanges_forced" class="subsection">
                <h3>2.9 Style Synthesis</h3>
                <div id="section-2-9-synthesis-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 3: OVERALL SYNTHESIS -->
        <!-- ============================================================ -->
        <section id="section3-overall" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">3. Overall Synthesis</h2>
            <div class="section-body markdown-body">
              <div id="section-3-1-ability" class="subsection">
                <h3>3.1 Ability Evaluation</h3>
                <div id="section-3-1-ability-llm" class="llm-slot"></div>
              </div>
              <div id="section-3-2-rating" class="subsection">
                <h3>3.2 FIDE Rating Estimation</h3>
                <div id="section-3-2-rating-llm" class="llm-slot"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 4: OPENING REPERTOIRE -->
        <!-- ============================================================ -->
        <section id="section4-openings" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">4. Opening Repertoire</h2>
            <div class="section-body markdown-body">

              <!-- 4.1 WHITE OPENINGS TABLE -->
              <div id="opening-white-table" class="subsection">
                <h3>4.1 White Openings</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Opening Line</th>
                        <th>Variation Name</th>
                        <th>Games</th>
                        <th>Win %</th>
                        <th>Draw %</th>
                        <th>Loss %</th>
                        <th>Avg Accuracy</th>
                      </tr>
                    </thead>
                    <tbody id="data-opening-white-tbody">
                      <!-- Rows will be dynamically inserted -->
                    </tbody>
                  </table>
                </div>
                <div id="section-4-1-white-openings-llm" class="llm-slot"></div>
              </div>

              <!-- 4.2 BLACK OPENINGS TABLE -->
              <div id="opening-black-table" class="subsection">
                <h3>4.2 Black Openings</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Opening Line</th>
                        <th>Variation Name</th>
                        <th>Games</th>
                        <th>Win %</th>
                        <th>Draw %</th>
                        <th>Loss %</th>
                        <th>Avg Accuracy</th>
                      </tr>
                    </thead>
                    <tbody id="data-opening-black-tbody">
                      <!-- Rows will be dynamically inserted -->
                    </tbody>
                  </table>
                </div>
                <div id="section-4-2-black-openings-llm" class="llm-slot"></div>
              </div>

              <!-- 4.3 MAIN REPERTOIRES -->
              <div id="opening-main-repertoires" class="subsection">
                <h3>4.3 Main Repertoires</h3>
                <div id="section-4-3-main-repertoires-llm" class="llm-slot"></div>
              </div>

              <!-- 4.4 SECONDARY WEAPONS -->
              <div id="opening-secondary" class="subsection">
                <h3>4.4 Secondary Weapons</h3>
                <div id="section-4-4-secondary-llm" class="llm-slot"></div>
              </div>

              <!-- 4.5 THEORETICAL DEPTH -->
              <div id="opening-depth" class="subsection">
                <h3>4.5 Theoretical Depth</h3>
                <div id="section-4-5-depth-llm" class="llm-slot"></div>
              </div>

              <!-- 4.6 CONNECTION TO STYLE -->
              <div id="opening-style" class="subsection">
                <h3>4.6 Connection to Style</h3>
                <div id="section-4-6-style-llm" class="llm-slot"></div>
              </div>

              <!-- 4.7 UNDERPERFORMING VS SHINING -->
              <div id="opening-performance" class="subsection">
                <h3>4.7 Underperforming vs Shining Openings</h3>
                <div id="section-4-7-performance-llm" class="llm-slot"></div>
              </div>

              <!-- 4.8 PRACTICAL TAKEAWAYS -->
              <div id="opening-takeaways" class="subsection">
                <h3>4.8 Practical Takeaways</h3>
                <div id="section-4-8-takeaways-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 5: TRAINING RECOMMENDATIONS -->
        <!-- ============================================================ -->
        <section id="section5-training" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">5. Training Recommendations</h2>
            <div class="section-body markdown-body">

              <!-- 5.1 KEY PRIORITIES -->
              <div id="training-priorities" class="subsection">
                <h3>5.1 Key Priorities</h3>
                <div id="section-5-1-priorities-llm" class="llm-slot"></div>
              </div>

              <!-- 5.2 STUDY METHODS -->
              <div id="training-study" class="subsection">
                <h3>5.2 Study Methods</h3>
                <div id="section-5-2-study-llm" class="llm-slot"></div>
              </div>

              <!-- 5.3 PRACTICAL HABITS -->
              <div id="training-habits" class="subsection">
                <h3>5.3 Practical Habits</h3>
                <div id="section-5-3-habits-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 6: OPPONENT PREPARATION -->
        <!-- ============================================================ -->
        <section id="section6-opponent" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">6. Opponent Preparation</h2>
            <div class="section-body markdown-body">

              <!-- 6.1 OPENING CHOICES VS WHITE -->
              <div id="opponent-white" class="subsection">
                <h3>6.1 Opening Choices When Facing This Player as White</h3>
                <div id="section-6-1-vs-white-llm" class="llm-slot"></div>
              </div>

              <!-- 6.2 OPENING CHOICES VS BLACK -->
              <div id="opponent-black" class="subsection">
                <h3>6.2 Opening Choices When Facing This Player as Black</h3>
                <div id="section-6-2-vs-black-llm" class="llm-slot"></div>
              </div>

              <!-- 6.3 MIDDLEGAME STRATEGIES -->
              <div id="opponent-middlegame" class="subsection">
                <h3>6.3 Middlegame Strategies</h3>
                <div id="section-6-3-middlegame-llm" class="llm-slot"></div>
              </div>

              <!-- 6.4 ENDGAME STRATEGIES -->
              <div id="opponent-endgame" class="subsection">
                <h3>6.4 Endgame Strategies</h3>
                <div id="section-6-4-endgame-llm" class="llm-slot"></div>
              </div>

              <!-- 6.5 PSYCHOLOGY / RISK -->
              <div id="opponent-psychology" class="subsection">
                <h3>6.5 Psychology and Risk Profile</h3>
                <div id="section-6-5-psychology-llm" class="llm-slot"></div>
              </div>

              <!-- 6.6 SUMMARY GAME PLAN -->
              <div id="opponent-gameplan" class="subsection">
                <h3>6.6 Summary Game Plan</h3>
                <div id="section-6-6-gameplan-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

      </div>
    </main>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let vizLib;
      // Collapsible navigation
      const parentLinks = document.querySelectorAll(".parent-link");
      parentLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          const navSection = link.parentElement;
          const subsections = navSection.querySelector(".nav-subsections");
          if (subsections) {
            e.preventDefault();
            navSection.classList.toggle("expanded");
          }
        });
      });

      // Expand first section by default
      const firstNavSection = document.querySelector(".nav-section");
      if (firstNavSection) {
        firstNavSection.classList.add("expanded");
      }

      const sections = Array.from(document.querySelectorAll(".report-section"));
      const links = Array.from(document.querySelectorAll(".sidebar-link, .sidebar-sublink"));
      const linkMap = new Map(
        links.map((link) => [link.getAttribute("href").replace("#", ""), link])
      );

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const id = entry.target.id;
              links.forEach((l) => l.classList.remove("active"));
              const active = linkMap.get(id);
              if (active) active.classList.add("active");
            }
          });
        },
        { rootMargin: "-40% 0px -45% 0px", threshold: 0.2 }
      );

      sections.forEach((sec) => observer.observe(sec));
      if (links.length > 0) {
        links[0].classList.add("active");
      }

      // Tag explainers (backend can override; fallback is built-in)
      const DEFAULT_TAG_EXPLAINERS = {
        "White": "Performance when you played the white pieces.",
        "Black": "Performance when you played the black pieces.",
        "Total": "Overall results combining both colors.",
        "Overall": "All moves aggregated across games.",
        "Opening": "Moves made in the opening phase.",
        "Middlegame": "Moves made once development is mostly complete.",
        "Endgame": "Moves in simplified positions with few pieces.",
        "Queenful": "Positions where both sides still have queens.",
        "Queenless": "Positions after queens are traded off.",
        "Reached +1": "Games where you achieved at least a +1.0 engine edge.",
        "Reached +3": "Games where you achieved at least a +3.0 engine edge.",
        "Reached +5": "Games where you achieved at least a +5.0 engine edge.",
        "Reached +7": "Games where you achieved at least a +7.0 engine edge.",
        "Reached -1": "Games where you fell to -1.0 or worse.",
        "Reached -3": "Games where you fell to -3.0 or worse.",
        "Reached -5": "Games where you fell to -5.0 or worse.",
        "Reached -7": "Games where you fell to -7.0 or worse.",
        "Smooth crush (controlled opponent)": "You kept control from start to finish and converted cleanly.",
        "Smooth collapse (opponent controlled)": "Opponent kept control and you lost without big swings.",
        "Small swings (~±1.0)": "Advantage shifted modestly within about one pawn.",
        "Medium swings (~±2.0)": "Advantage oscillated around two pawns.",
        "Big swings (4+ swings of ±2.0)": "Multiple large lead changes of two-plus pawns.",
        "High-precision draws (no swings > ±0.8)": "Draws with almost no evaluation swings.",
        "Top-1 move %": "How often you played the engine’s first choice.",
        "Top-3 move %": "How often you played one of the engine’s top three choices.",
        "Blunder rate (>100cp loss)": "Moves that dropped over 100 centipawns.",
        "Constructive maneuver": "Reroute that improves piece harmony and future activity.",
        "Constructive maneuver (prepare)": "Quiet reroute that sets up a later plan or breakthrough.",
        "Neutral maneuver": "Repositioning with limited impact—neither improves nor harms much.",
        "Misplaced maneuver": "Reroute that wastes time or worsens coordination.",
        "Opening maneuver": "Early-game reroute to better squares after initial development.",
        "Overall maneuver ratio": "Share of moves classified as maneuvers.",
        "Direct prophylactic": "Move that directly stops the opponent’s immediate threat or plan.",
        "Latent prophylactic": "Restricts future ideas before they become concrete threats.",
        "Meaningless prophylactic": "Prophylaxis that addresses no real threat.",
        "Failed prophylactic": "Attempted prevention that still allows the threat.",
        "Overall prophylaxis ratio": "Share of moves aimed at prevention.",
        "Control: simplify": "Trades or simplifications to reduce complexity.",
        "Control: plan kill": "Stops the opponent’s main strategic plan.",
        "Control: freeze/bind": "Limits opponent mobility and counterplay.",
        "Control: blockade passed pawn": "Holds back or fixes a passed pawn.",
        "Control: file seal": "Secures or contests an open/semi-open file.",
        "Control: king safety shell": "Strengthens the king’s pawn and square cover.",
        "Control: space clamp": "Claims key squares to restrict counterplay.",
        "Control: regroup/consolidate": "Re-coordinates pieces after operations.",
        "Control: slowdown": "Tempers the position to avoid sharp forcing lines.",
        "Overall semantic control ratio": "Share of moves aimed at positional control.",
        "Control over dynamics (overall)": "Moves chosen to shape the game’s tactical temperature.",
        "CoD: file seal": "Dynamic control by contesting files before tactics explode.",
        "CoD: freeze/bind": "Dynamic restriction to keep the opponent cramped.",
        "CoD: king safety": "Dynamic tweaks that keep the king safe during tactics.",
        "CoD: regroup/consolidate": "Dynamic re-coordination to stabilize.",
        "CoD: plan kill": "Dynamic strike that halts opponent initiative.",
        "CoD: blockade passed pawn": "Dynamic blockading of a passed pawn in sharp play.",
        "CoD: simplify": "Trades to cool down complications.",
        "CoD: space clamp": "Dynamic space grab to limit enemy breaks.",
        "CoD: slowdown": "Tempo moves to cool the position.",
        "Initiative attempt": "Actively driving threats to keep the move-by-move pressure.",
        "Deferred initiative": "Postpones attack to finish prep or development.",
        "Premature attack": "Attack launched before position is ready.",
        "C-file pressure": "Initiative built around control of the c-file.",
        "Tension creation": "Creates or sustains pawn/piece tension.",
        "Neutral tension creation": "Tension that neither helps nor harms notably.",
        "Structural integrity": "Keeps pawn structure healthy and flexible.",
        "Structural compromise (dynamic)": "Accepts structural weakness for activity.",
        "Structural compromise (static)": "Weak structure without clear compensation.",
        "Tactical sacrifice": "Material given for concrete tactical gain.",
        "Positional sacrifice": "Material invested for long-term positional edge.",
        "Inaccurate tactical sacrifice": "Dubious sac without enough payoff.",
        "Speculative sacrifice": "High-risk sac with unclear compensation.",
        "Desperate sacrifice": "Last-ditch sac from a bad position.",
        "Tactical combination sacrifice": "Sac as part of a forcing combination.",
        "Tactical initiative sacrifice": "Sac to keep initiative flowing.",
        "Positional structure sacrifice": "Material for structural damage to opponent.",
        "Positional space sacrifice": "Material for space or central control.",
        "Overall sacrifice ratio": "Share of moves involving sacrifices.",
        "Accurate knight/bishop exchange": "Trade that improves your minor-piece balance.",
        "Inaccurate knight/bishop exchange": "Trade that hands the opponent better minors.",
        "Bad knight/bishop exchange": "Clearly harmful minor-piece trade.",
        "Total exchange frequency": "All tagged minor-piece exchanges.",
        "Forced moves": "Moves compelled by tactics to avoid big loss.",
        "Winning position handling": "Technique in converting clearly winning spots.",
        "Losing position handling": "Resilience when position is bad.",
        "Tactical opportunities found": "Tactics spotted and exploited.",
        "Tactical opportunities missed": "Tactics available but not taken.",
        "Tactical conversion rate": "Share of tactics you convert.",
      };
      let TAG_EXPLAINERS = { ...DEFAULT_TAG_EXPLAINERS };

      const attachTagHelps = () => {
        document.querySelectorAll('table.report-table tbody tr td:first-child').forEach((cell) => {
          const label = cell.textContent.trim();
          if (!TAG_EXPLAINERS || !TAG_EXPLAINERS[label]) return;
          // Avoid duplicating icons
          if (cell.querySelector('.tag-help')) return;
          cell.classList.add('tag-cell');
          const help = document.createElement('span');
          help.className = 'tag-help';
          help.textContent = '?';
          help.title = TAG_EXPLAINERS[label];
          help.setAttribute('aria-label', TAG_EXPLAINERS[label]);
          cell.appendChild(help);
          const tip = document.createElement('div');
          tip.className = 'tag-help-tooltip';
          tip.textContent = TAG_EXPLAINERS[label];
          cell.appendChild(tip);
        });
      };

      // PHASE 2: Data injection function
      window.fillReportData = function(dataJson) {
        const setText = (id, value) => {
          const el = document.getElementById(id);
          if (el) el.textContent = value;
        };
        const fmtPct = (v) => (v === null || v === undefined || Number.isNaN(v) ? '—' : `${v}%`);

        const formatWDL = (record) => {
          if (!record) return '—';
          const w = record.win ?? record.w ?? record.W;
          const d = record.draw ?? record.d ?? record.D;
          const l = record.loss ?? record.l ?? record.L;
          if ([w, d, l].some(v => v === undefined || v === null)) return '—';
          const fmt = (v) => typeof v === 'number' ? `${v}%` : v;
          return `${fmt(w)} / ${fmt(d)} / ${fmt(l)}`;
        };

        const formatCountRatio = (record) => {
          if (!record) return '—';
          const games = record.games ?? record.count ?? record.c;
          const ratio = record.ratio ?? record.pct ?? record.perc;
          if (games === undefined && ratio === undefined) return '—';
          if (games !== undefined && ratio !== undefined) {
            const r = typeof ratio === 'number' ? `${ratio}%` : ratio;
            return `${games} (${r})`;
          }
          if (games !== undefined) return `${games}`;
          return typeof ratio === 'number' ? `${ratio}%` : `${ratio}`;
        };

        // Apply player id to title/header when available
        if (dataJson.player_id) {
          const playerName = dataJson.player_display_name || dataJson.player_id || 'player';
          const titleText = `Chessortag Style Report - ${playerName}`;
          document.title = titleText;
          const h1 = document.querySelector('.report-title');
          if (h1) h1.textContent = `Chessortag Style Report: ${playerName}`;
        }

        // ========== SECTION 1: PERFORMANCE PROFILE ==========
        if (dataJson.fixed_data) {
          const d = dataJson.fixed_data;

          // 1.1 Win rate
          if (d.winrate) {
            document.getElementById('data-white-win').textContent = d.winrate.white.win + '%';
            document.getElementById('data-white-loss').textContent = d.winrate.white.loss + '%';
            document.getElementById('data-white-draw').textContent = d.winrate.white.draw + '%';
            document.getElementById('data-white-elo').textContent = d.winrate.white.elo;

            document.getElementById('data-black-win').textContent = d.winrate.black.win + '%';
            document.getElementById('data-black-loss').textContent = d.winrate.black.loss + '%';
            document.getElementById('data-black-draw').textContent = d.winrate.black.draw + '%';
            document.getElementById('data-black-elo').textContent = d.winrate.black.elo;

            document.getElementById('data-total-win').textContent = d.winrate.total.win + '%';
            document.getElementById('data-total-loss').textContent = d.winrate.total.loss + '%';
            document.getElementById('data-total-draw').textContent = d.winrate.total.draw + '%';
            document.getElementById('data-total-elo').textContent = d.winrate.total.elo;
          }

          // 1.2 Accuracy
          if (d.accuracy) {
            ['overall', 'opening', 'middlegame', 'endgame', 'queenful', 'queenless'].forEach(phase => {
              const prefix = 'data-acc-' + phase;
              if (d.accuracy[phase]) {
                document.getElementById(prefix + '-moves').textContent = d.accuracy[phase].moves;
                document.getElementById(prefix + '-loss').textContent = d.accuracy[phase].avg_loss;
                document.getElementById(prefix + '-score').textContent = d.accuracy[phase].score;
              }
            });
          }

          if (d.accuracy_comparison) {
            ['overall', 'opening', 'middlegame', 'endgame'].forEach(phase => {
              const prefix = 'data-cmp-' + phase;
              if (d.accuracy_comparison[phase]) {
                document.getElementById(prefix + '-player').textContent = d.accuracy_comparison[phase].player;
                document.getElementById(prefix + '-peer').textContent = d.accuracy_comparison[phase].peer;
                document.getElementById(prefix + '-gm').textContent = d.accuracy_comparison[phase].gm;
              }
            });
          }

          // 1.3 Advantage conversion (threshold-based W/D/L)
          if (d.advantage) {
            const thresholds = [
              { key: '+1', whiteId: 'data-adv-white-1', blackId: 'data-adv-black-1' },
              { key: '+3', whiteId: 'data-adv-white-3', blackId: 'data-adv-black-3' },
              { key: '+5', whiteId: 'data-adv-white-5', blackId: 'data-adv-black-5' },
              { key: '+7', whiteId: 'data-adv-white-7', blackId: 'data-adv-black-7' },
            ];
            thresholds.forEach(({ key, whiteId, blackId }) => {
              const rec = d.advantage[key] || (d.advantage.thresholds && d.advantage.thresholds[key]);
              if (rec) {
                setText(whiteId, formatWDL(rec.white));
                setText(blackId, formatWDL(rec.black));
              }
            });
          }

          // 1.4 Defensive conversion (threshold-based W/D/L)
          if (d.defensive) {
            const thresholds = [
              { key: '-1', whiteId: 'data-def-white-1', blackId: 'data-def-black-1' },
              { key: '-3', whiteId: 'data-def-white-3', blackId: 'data-def-black-3' },
              { key: '-5', whiteId: 'data-def-white-5', blackId: 'data-def-black-5' },
              { key: '-7', whiteId: 'data-def-white-7', blackId: 'data-def-black-7' },
            ];
            thresholds.forEach(({ key, whiteId, blackId }) => {
              const rec = d.defensive[key] || (d.defensive.thresholds && d.defensive.thresholds[key]);
              if (rec) {
                setText(whiteId, formatWDL(rec.white));
                setText(blackId, formatWDL(rec.black));
              }
            });
          }

          // 1.5 Volatility (white/black by flow type)
          if (d.volatility) {
            const map = [
              { key: 'smooth_crush', whiteId: 'data-vol-smooth-crush-white', blackId: 'data-vol-smooth-crush-black' },
              { key: 'smooth_collapse', whiteId: 'data-vol-smooth-collapse-white', blackId: 'data-vol-smooth-collapse-black' },
              { key: 'small_swings', whiteId: 'data-vol-small-swings-white', blackId: 'data-vol-small-swings-black' },
              { key: 'medium_swings', whiteId: 'data-vol-medium-swings-white', blackId: 'data-vol-medium-swings-black' },
              { key: 'big_swings', whiteId: 'data-vol-big-swings-white', blackId: 'data-vol-big-swings-black' },
              { key: 'high_precision_draws', whiteId: 'data-vol-precision-draws-white', blackId: 'data-vol-precision-draws-black' },
            ];
            map.forEach(({ key, whiteId, blackId }) => {
              const rec = d.volatility[key];
              if (rec) {
                setText(whiteId, formatCountRatio(rec.white));
                setText(blackId, formatCountRatio(rec.black));
              }
            });
          }

          // 1.6 Engine decision quality
          if (d.engine) {
            document.getElementById('data-eng-top1-player').textContent = d.engine.top1.player + '%';
            document.getElementById('data-eng-top1-peer').textContent = d.engine.top1.peer + '%';
            document.getElementById('data-eng-top1-gm').textContent = d.engine.top1.gm + '%';

            document.getElementById('data-eng-top3-player').textContent = d.engine.top3.player + '%';
            document.getElementById('data-eng-top3-peer').textContent = d.engine.top3.peer + '%';
            document.getElementById('data-eng-top3-gm').textContent = d.engine.top3.gm + '%';

            document.getElementById('data-eng-blunder-player').textContent = d.engine.blunder.player + '%';
            document.getElementById('data-eng-blunder-peer').textContent = d.engine.blunder.peer + '%';
            document.getElementById('data-eng-blunder-gm').textContent = d.engine.blunder.gm + '%';
          }

          // 1.7 Tactical conversion
          if (d.tactical) {
            document.getElementById('data-tac-found').textContent = d.tactical.found;
            document.getElementById('data-tac-missed').textContent = d.tactical.missed;
            document.getElementById('data-tac-rate').textContent = d.tactical.rate + '%';
          }

          // 1.8 Knight/Bishop exchanges
          if (d.exchanges) {
            document.getElementById('data-exch-accurate-count').textContent = d.exchanges.accurate.count;
            document.getElementById('data-exch-accurate-ratio').textContent = d.exchanges.accurate.ratio + '%';
            document.getElementById('data-exch-accurate-gm').textContent = d.exchanges.accurate.gm + '%';

            document.getElementById('data-exch-inaccurate-count').textContent = d.exchanges.inaccurate.count;
            document.getElementById('data-exch-inaccurate-ratio').textContent = d.exchanges.inaccurate.ratio + '%';
            document.getElementById('data-exch-inaccurate-gm').textContent = d.exchanges.inaccurate.gm + '%';

            document.getElementById('data-exch-bad-count').textContent = d.exchanges.bad.count;
            document.getElementById('data-exch-bad-ratio').textContent = d.exchanges.bad.ratio + '%';
            document.getElementById('data-exch-bad-gm').textContent = d.exchanges.bad.gm + '%';

            document.getElementById('data-exch-total-count').textContent = d.exchanges.total.count;
            document.getElementById('data-exch-total-ratio').textContent = d.exchanges.total.ratio + '%';
            document.getElementById('data-exch-total-gm').textContent = d.exchanges.total.gm + '%';
          }

          // 1.9 Forced moves
          if (d.forced) {
            document.getElementById('data-forced-count').textContent = d.forced.count;
            document.getElementById('data-forced-ratio').textContent = d.forced.ratio + '%';
            document.getElementById('data-forced-gm').textContent = d.forced.gm + '%';
          }

          // 1.10 Position handling
          if (d.positions) {
            document.getElementById('data-pos-winning-count').textContent = d.positions.winning.count;
            document.getElementById('data-pos-winning-ratio').textContent = fmtPct(d.positions.winning.ratio);
            document.getElementById('data-pos-winning-gm').textContent = fmtPct(d.positions.winning.gm);

            document.getElementById('data-pos-losing-count').textContent = d.positions.losing.count;
            document.getElementById('data-pos-losing-ratio').textContent = fmtPct(d.positions.losing.ratio);
            document.getElementById('data-pos-losing-gm').textContent = fmtPct(d.positions.losing.gm);
          }

          // ========== SECTION 2: STYLE PARAMETERS ==========
          const fillStyle = (section, prefixMap, includeTotal = false) => {
            if (!section) return;
            Object.entries(prefixMap).forEach(([key, baseId]) => {
              const rec = section[key];
              if (!rec) return;
              setText(`${baseId}-count`, rec.count);
              setText(`${baseId}-ratio`, fmtPct(rec.ratio));
              setText(`${baseId}-gm`, fmtPct(rec.gm));
            });
            if (includeTotal && section.total) {
              setText(`${prefixMap.total || 'data-style-total'}-count`, section.total.count);
              setText(`${prefixMap.total || 'data-style-total'}-ratio`, fmtPct(section.total.ratio));
              setText(`${prefixMap.total || 'data-style-total'}-gm`, fmtPct(section.total.gm));
            }
          };

          fillStyle(d.style_maneuver, {
            constructive: 'data-style-maneuver-constructive',
            prepare: 'data-style-maneuver-prepare',
            neutral: 'data-style-maneuver-neutral',
            misplaced: 'data-style-maneuver-misplaced',
            opening: 'data-style-maneuver-opening',
            total: 'data-style-maneuver-total',
          }, true);

          fillStyle(d.style_prophylaxis, {
            direct: 'data-style-prophylaxis-direct',
            latent: 'data-style-prophylaxis-latent',
            meaningless: 'data-style-prophylaxis-meaningless',
            failed: 'data-style-prophylaxis-failed',
            total: 'data-style-prophylaxis-total',
          }, true);

          fillStyle(d.style_semantic_control, {
            simplify: 'data-style-control-simplify',
            plankill: 'data-style-control-plankill',
            freeze: 'data-style-control-freeze',
            blockade: 'data-style-control-blockade',
            fileseal: 'data-style-control-fileseal',
            kingsafety: 'data-style-control-kingsafety',
            spaceclamp: 'data-style-control-spaceclamp',
            regroup: 'data-style-control-regroup',
            slowdown: 'data-style-control-slowdown',
            total: 'data-style-control-total',
          }, true);

          fillStyle(d.style_control_over_dynamics, {
            overall: 'data-style-cod-overall',
            fileseal: 'data-style-cod-fileseal',
            freeze: 'data-style-cod-freeze',
            kingsafety: 'data-style-cod-kingsafety',
            regroup: 'data-style-cod-regroup',
            plankill: 'data-style-cod-plankill',
            blockade: 'data-style-cod-blockade',
            simplify: 'data-style-cod-simplify',
            spaceclamp: 'data-style-cod-spaceclamp',
            slowdown: 'data-style-cod-slowdown',
          });

          fillStyle(d.style_initiative, {
            attempt: 'data-style-initiative-attempt',
            deferred: 'data-style-initiative-deferred',
            premature: 'data-style-initiative-premature',
            cfile: 'data-style-initiative-cfile',
          });

          fillStyle(d.style_tension, {
            creation: 'data-style-tension-creation',
            neutral: 'data-style-tension-neutral',
          });

          fillStyle(d.style_structural, {
            integrity: 'data-style-structural-integrity',
            dynamic: 'data-style-structural-dynamic',
            static: 'data-style-structural-static',
          });

          fillStyle(d.style_sacrifice, {
            tactical: 'data-style-sacrifice-tactical',
            positional: 'data-style-sacrifice-positional',
            inaccurate: 'data-style-sacrifice-inaccurate',
            speculative: 'data-style-sacrifice-speculative',
            desperate: 'data-style-sacrifice-desperate',
            combination: 'data-style-sacrifice-combination',
            init: 'data-style-sacrifice-init',
            structure: 'data-style-sacrifice-structure',
            space: 'data-style-sacrifice-space',
            total: 'data-style-sacrifice-total',
          }, true);

          // ========== SECTION 4: OPENING REPERTOIRE ==========
          // 4.1 & 4.2 Opening tables (dynamic row insertion)
          if (d.openings) {
            if (d.openings.white && d.openings.white.length > 0) {
              const whiteTbody = document.getElementById('data-opening-white-tbody');
              whiteTbody.innerHTML = '';
              d.openings.white.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                  <td>${row.line}</td>
                  <td>${row.variation}</td>
                  <td>${row.games}</td>
                  <td>${row.win}%</td>
                  <td>${row.draw}%</td>
                  <td>${row.loss}%</td>
                  <td>${row.accuracy}</td>
                `;
                whiteTbody.appendChild(tr);
              });
            }

            if (d.openings.black && d.openings.black.length > 0) {
              const blackTbody = document.getElementById('data-opening-black-tbody');
              blackTbody.innerHTML = '';
              d.openings.black.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                  <td>${row.line}</td>
                  <td>${row.variation}</td>
                  <td>${row.games}</td>
                  <td>${row.win}%</td>
                  <td>${row.draw}%</td>
                  <td>${row.loss}%</td>
                  <td>${row.accuracy}</td>
                `;
                blackTbody.appendChild(tr);
              });
            }
          }
        }

        // ========== LLM SLOTS ==========
        if (dataJson.llm_slots) {
          Object.keys(dataJson.llm_slots).forEach(slotId => {
            const element = document.getElementById(slotId);
            if (element) {
              element.innerHTML = dataJson.llm_slots[slotId];
            }
          });
        }

        // ========== VISUALIZATIONS ==========
        if (dataJson.visualizations && typeof vizLib !== 'undefined' && vizLib) {
          vizLib.clear();
          Object.keys(dataJson.visualizations).forEach(vizId => {
            vizLib.create(vizId, dataJson.visualizations[vizId]);
          });
        }

        window._payloadLoaded = true;
      };

      // Fetch report payload from backend and hydrate UI
      async function loadReportData() {
        const parts = window.location.pathname.split("/");
        const playerId = parts[parts.length - 1] || "player";
        try {
          const resp = await fetch(`/api/report/${playerId}`);
          if (!resp.ok) {
            throw new Error(`HTTP ${resp.status}`);
          }
          const payload = await resp.json();
          TAG_EXPLAINERS = { ...DEFAULT_TAG_EXPLAINERS, ...(payload.tag_explanations || {}) };
          if (window.fillReportData) {
            window.fillReportData(payload);
          }
          attachTagHelps();
        } catch (err) {
          console.error("Failed to load report data:", err);
        }
      }

      // Example usage (backend will inject this):
      window.__PHASE2_INLINE_PAYLOAD__ = {"player_id": "Nakamura,Hikaru", "player_display_name": "Nakamura,Hikaru", "player_key": "hikaru", "fixed_data": {"winrate": {"white": {"win": 65.0, "draw": 35.0, "loss": 0.0, "elo": 2609.7}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0, "elo": null}, "total": {"win": 65.0, "draw": 35.0, "loss": 0.0, "elo": 2609.7}}, "accuracy": {"overall": {"moves": 997, "avg_loss": 16.92, "score": 0.831}, "opening": {"moves": 0, "avg_loss": null, "score": null}, "middlegame": {"moves": 609, "avg_loss": 17.76, "score": 0.822}, "endgame": {"moves": 388, "avg_loss": 15.61, "score": 0.844}, "queenful": {"moves": 697, "avg_loss": 17.81, "score": 0.822}, "queenless": {"moves": 300, "avg_loss": 14.86, "score": 0.851}}, "accuracy_comparison": {"overall": {"player": 0.831, "peer": null, "gm": null}, "opening": {"player": null, "peer": null, "gm": null}, "middlegame": {"player": 0.822, "peer": null, "gm": null}, "endgame": {"player": 0.844, "peer": null, "gm": null}}, "advantage": {"+1": {"white": {"win": 81.2, "draw": 18.8, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "+3": {"white": {"win": 100.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "+5": {"white": {"win": 100.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "+7": {"white": {"win": 100.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}}, "defensive": {"-1": {"white": {"win": 37.5, "draw": 62.5, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "-3": {"white": {"win": 0.0, "draw": 100.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "-5": {"white": {"win": 0.0, "draw": 100.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "-7": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}}, "volatility": {"smooth_crush": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 0, "ratio": 0.0}}, "smooth_collapse": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 0, "ratio": 0.0}}, "small_swings": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 0, "ratio": 0.0}}, "medium_swings": {"white": {"games": 3, "ratio": 15.0}, "black": {"games": 0, "ratio": 0.0}}, "big_swings": {"white": {"games": 15, "ratio": 75.0}, "black": {"games": 0, "ratio": 0.0}}, "high_precision_draws": {"white": {"games": 2, "ratio": 10.0}, "black": {"games": 0, "ratio": 0.0}}}, "engine": {"top1": {"player": 48.1, "peer": 0, "gm": 0}, "top3": {"player": 90.2, "peer": 0, "gm": 0}, "blunder": {"player": 2.8, "peer": 0, "gm": 0}}, "tactical": {"found": 11, "missed": 10, "rate": 52.4}, "exchanges": {"accurate": {"count": 29, "ratio": 2.9, "gm": 3.2}, "inaccurate": {"count": 13, "ratio": 1.3, "gm": 0.6}, "bad": {"count": 3, "ratio": 0.3, "gm": 0.4}, "total": {"count": 45, "ratio": 4.5, "gm": 4.3}}, "forced": {"count": 64, "ratio": 6.4, "gm": 6.8}, "positions": {"winning": {"count": 60, "ratio": 6.0, "gm": 6.8}, "losing": {"count": 14, "ratio": 1.4, "gm": 4.4}}, "openings": {"white": [{"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.865, "first_moves": "1. b3 d5 2. Bb2 Bg4 3. Nf3 Nd7 4. d3 c6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.822, "first_moves": "1. b3 d5 2. Bb2 c5 3. e3 Nf6 4. Nf3 g6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.807, "first_moves": "1. b3 d5 2. Bb2 Nf6 3. e3 c5 4. Nf3 Nc6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.938, "first_moves": "1. b3 d5 2. Bb2 c5 3. e3 Nf6 4. Nf3 Bg4"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.892, "first_moves": "1. Nf3 d5 2. b3 Bg4 3. Ne5 Bf5 4. Bb2 Nd7"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.756, "first_moves": "1. b3 d5 2. Nf3 c5 3. e3 Nc6 4. Bb5 Nf6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.843, "first_moves": "1. b3 d5 2. Bb2 c5 3. e3 Nc6 4. Bb5 Bd7"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.835, "first_moves": "1. b3 d5 2. Bb2 Nf6 3. e3 Bf5 4. Nf3"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.801, "first_moves": "1. b3 d5 2. Bb2 Bg4 3. Nf3 Nd7 4. e3 Ngf6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.855, "first_moves": "1. b3 d5 2. Bb2 Nf6 3. Nf3 Bf5 4. Nh4 Bd7"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.825, "first_moves": "1. g3 d5 2. Nf3 Nf6 3. d3 Bg4 4. Nbd2 Nbd7"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.857, "first_moves": "1. Nf3 d5 2. b3 c6 3. Bb2 Bg4 4. Ne5 Bf5"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.634, "first_moves": "1. b3 d5 2. Bb2 Bf5 3. Nf3 e6 4. g3 Nf6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.815, "first_moves": "1. b3 d5 2. Bb2 Bg4 3. Nf3 c6 4. g3 Bxf3"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.78, "first_moves": "1. b3 c6 2. Bb2 d5 3. e3 Nf6 4. Nf3 Bg4"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.832, "first_moves": "1. b3 d5 2. Bb2 c5 3. Nf3 Nf6 4. e3 g6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.812, "first_moves": "1. b3 Nf6 2. Bb2 d5 3. Nf3 Bg4 4. h3 Bxf3"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.872, "first_moves": "1. Nf3 d5 2. e3 g6 3. c4 c6 4. cxd5 cxd5"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.837, "first_moves": "1. Nf3 d5 2. b3 c5 3. Bb2 f6 4. Nc3 Nc6"}, {"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.894, "first_moves": "1. Nf3 d5 2. b3 Bg4 3. Bb2 Bxf3 4. exf3 Nd7"}], "black": []}, "style_maneuver": {"constructive": {"count": 144, "ratio": 14.4, "gm": 14.3}, "prepare": {"count": 31, "ratio": 3.1, "gm": 3.9}, "neutral": {"count": 221, "ratio": 22.2, "gm": 19.1}, "misplaced": {"count": 78, "ratio": 7.8, "gm": 4.2}, "opening": {"count": 82, "ratio": 8.2, "gm": 9.4}, "total": {"count": 556, "ratio": 55.7, "gm": 50.8}}, "style_prophylaxis": {"direct": {"count": 65, "ratio": 6.5, "gm": 8.5}, "latent": {"count": 251, "ratio": 25.2, "gm": 21.7}, "meaningless": {"count": 36, "ratio": 3.6, "gm": 1.6}, "failed": {"count": 19, "ratio": 1.9, "gm": 1.2}, "total": {"count": 371, "ratio": 37.2, "gm": 33.1}}, "style_semantic_control": {"simplify": {"count": 0, "ratio": 0.0, "gm": 0.0}, "plankill": {"count": 36, "ratio": 3.6, "gm": 5.5}, "freeze": {"count": 14, "ratio": 1.4, "gm": 1.9}, "blockade": {"count": 4, "ratio": 0.4, "gm": 0.4}, "fileseal": {"count": 117, "ratio": 11.7, "gm": 14.2}, "kingsafety": {"count": 38, "ratio": 3.8, "gm": 4.2}, "spaceclamp": {"count": 7, "ratio": 0.7, "gm": 0.8}, "regroup": {"count": 62, "ratio": 6.2, "gm": 6.9}, "slowdown": {"count": 0, "ratio": 0.0, "gm": 0.1}, "total": {"count": 278, "ratio": 27.8, "gm": 33.9}}, "style_control_over_dynamics": {"overall": {"count": 193, "ratio": 19.4, "gm": 23.6}, "fileseal": {"count": 117, "ratio": 11.7, "gm": 14.2}, "freeze": {"count": 14, "ratio": 1.4, "gm": 1.9}, "kingsafety": {"count": 38, "ratio": 3.8, "gm": 4.2}, "regroup": {"count": 62, "ratio": 6.2, "gm": 6.9}, "plankill": {"count": 36, "ratio": 3.6, "gm": 5.5}, "blockade": {"count": 4, "ratio": 0.4, "gm": 0.4}, "simplify": {"count": 0, "ratio": 0.0, "gm": 0.0}, "spaceclamp": {"count": 7, "ratio": 0.7, "gm": 0.8}, "slowdown": {"count": 0, "ratio": 0.0, "gm": 0.1}}, "style_initiative": {"attempt": {"count": 37, "ratio": 3.7, "gm": 3.5}, "deferred": {"count": 228, "ratio": 22.9, "gm": 19.8}, "premature": {"count": 13, "ratio": 1.3, "gm": 1.1}, "cfile": {"count": 0, "ratio": 0.0, "gm": 0.0}}, "style_tension": {"creation": {"count": 55, "ratio": 5.5, "gm": 6.9}, "neutral": {"count": 83, "ratio": 8.3, "gm": 9.1}}, "style_structural": {"integrity": {"count": 120, "ratio": 12.0, "gm": 9.6}, "dynamic": {"count": 59, "ratio": 5.9, "gm": 5.5}, "static": {"count": 16, "ratio": 1.6, "gm": 1.5}}, "style_sacrifice": {"tactical": {"count": 9, "ratio": 0.9, "gm": 0.9}, "positional": {"count": 33, "ratio": 3.3, "gm": 3.9}, "inaccurate": {"count": 2, "ratio": 0.2, "gm": 0.1}, "speculative": {"count": 6, "ratio": 0.6, "gm": 0.3}, "desperate": {"count": 0, "ratio": 0.0, "gm": 0.0}, "combination": {"count": 2, "ratio": 0.2, "gm": 0.3}, "init": {"count": 7, "ratio": 0.7, "gm": 0.6}, "structure": {"count": 10, "ratio": 1.0, "gm": 0.9}, "space": {"count": 29, "ratio": 2.9, "gm": 3.7}, "total": {"count": 98, "ratio": 9.8, "gm": 10.7}}}, "llm_slots": {"section-1-1-winrate-llm": "<p>Your overall results are entirely from games with White, where you show a very strong 65% win rate and 35% draws, with no recorded losses. This produces the same split in your total statistics: 65% wins, 35% draws, and 0% losses, anchored around a 2609.7 performance level. There is no data for your games with Black, so your profile is currently skewed toward White and cannot be compared by color balance. All comparative conclusions therefore reflect only your performance with the White pieces.</p>", "section-1-2-accuracy-llm": "<p>Your overall accuracy score of 0.831 is solid, with no clear peer or GM benchmark provided for direct comparison. Within your own games, endgames and queenless positions are your relative strengths: endgame accuracy is higher (0.844) than in the middlegame (0.822), and queenless positions reach your best score at 0.851 with the lowest average loss (14.86). By contrast, queenful and middlegame positions both sit at 0.822 with noticeably higher average loss, indicating that your precision tends to improve as material comes off and positions simplify.</p>", "section-1-3-advantage-llm": "<p>Your advantage conversion with White is extremely reliable and scales well as the edge increases. At a modest +1, you already convert 81.2% of positions into wins, with the remaining 18.8% held as draws and no collapses into losses. This indicates good technical control and psychological stability in slightly better positions: you rarely let the advantage slip completely, even if you do sometimes allow opponents to hold.</p>\n\n<p>Once your advantage reaches +3 or more with White, your conversion becomes completely ruthless. At +3, +5, and +7, you post 100% wins, with 0% draws and 0% losses across all these bands. That pattern suggests that once you break through to a clear advantage, you finish games with GM-level precision, without giving opponents counterchances or allowing any stagnation into drawn endings.</p>\n\n<p>The missing black-sample data means we cannot yet assess whether this clinical conversion also appears in your games with Black, so your current profile is that of a very strong “White technician” who is especially lethal once a clear edge has been obtained.</p>", "section-1-4-defensive-llm": "<p>Your defensive results with White show a notable capacity to stabilize inferior positions rather than collapse. At –1, you convert a disadvantage into full points 37.5% of the time and draw the remaining 62.5%, with no games drifting into losses. This profile is more resilient than a typical peer who would usually show at least some proportion of outright defeats once slightly worse. The complete absence of losses at –1 suggests that once you sense danger, your play becomes more controlled and pragmatic, cutting out the blunders that would turn a small deficit into a collapse.</p>\n\n<p>At deeper material or evaluative deficits (–3 and –5), your results with White are 100% draws and 0% losses, again underlining a strong instinct for damage limitation. Rather than chasing speculative counterplay, you appear comfortable steering the game toward fortress-like positions or perpetual-check scenarios. There is no registered data yet for Black in any of these zones, so your resilience there remains an open question; the current picture is a White-heavy defensive profile that is impressively stable whenever you fall behind on that side of the board.</p>", "section-1-5-volatility-llm": "<p>Your volatility profile with White is dominated by sharp, unstable battles. An exceptionally high 75% of your White games fall into the “big swings” category, with another 15% in “medium swings.” This means that when you have the first move, the evaluation tends to fluctuate significantly, and the result often hinges on critical, high-impact moments rather than on a steady, accumulating advantage. In practice, this suggests a readiness to enter double-edged positions where both sides have real chances, but also a greater exposure to losing control if calculation or time management falters at key junctures.</p>\n\n<p>At the same time, 10% of your White games are “high-precision draws.” This is a noticeable minority compared with your swingy games, but it shows you do have the capacity to keep the position under tight control and neutralize counterplay when the situation calls for it. The absence of “smooth crush” and “smooth collapse” games with White indicates that your battles rarely follow a one-way narrative of simple domination or gradual self-destruction; instead, they are typically contested, with momentum changing hands.</p>\n\n<p>With Black, the current sample shows no games in any of the volatility categories, so your risk profile and degree of control are essentially defined by your White games. Overall, your current style leans toward taking on concrete risk with White, aiming for rich, fighting positions rather than safe, low-volatility control from start to finish.</p>", "section-1-6-engine-llm": "<p>Your engine decision profile shows a strong tendency to stay near the top of the engine’s preferences. You select the engine’s first choice 48.1% of the time, and your moves fall within the engine’s top three options in 90.2% of positions. This indicates that, even when you do not hit the absolute best move, you usually remain within a narrow band of high-quality alternatives that keep the evaluation stable.</p>\n\n<p>The blunder rate in your games is 2.8%, which means that outright collapses are relatively rare compared to the large majority of positions where you are playing engine-approved moves. The overall pattern is that your decision-making is consistently engine-friendly, with a broad base of solid moves and a relatively small pocket of serious errors. Since no peer or GM benchmarks are provided in the data, these conclusions focus on your internal balance between strong engine agreement and limited blunders, emphasizing a generally reliable level of move quality.</p>", "section-1-7-tactical-llm": "<p>Your tactical results show a very balanced, but also revealing picture: with 11 tactical opportunities converted and 10 missed, your overall conversion rate sits at 52.4%. This suggests that you are spotting and capitalizing on roughly half of the chances you create or are presented with. From a calculation and alertness standpoint, that typically indicates you are seeing the “first layer” of tactics reliably, but deeper or less obvious ideas may slip by.</p>\n<p>A rate around 50% often means your initial candidate moves are reasonable, yet the follow-up calculation can be inconsistent. Some tactics you convert because the pattern is familiar or the move is forcing; others are missed when the position requires an extra move or two of precise calculation. This points to a key growth area: improving systematic checking of forcing lines and counterplay. Strengthening your scan for checks, captures, and threats, and spending a bit more time verifying tactical shots, should raise this conversion rate and reflect sharper, more consistent tactical alertness in complex positions.</p>", "section-1-8-exchanges-llm": "<p>Your overall knight and bishop exchange ratio is slightly above the GM baseline (4.5 vs 4.3), indicating you are marginally more willing than the average GM to commit to minor-piece trades. A higher total frequency usually reflects a readiness to clarify the position and convert piece play into structural or positional assets, rather than keeping maximum tension. You do not appear excessively trade-happy, but you do show a consistent inclination to resolve knight–bishop imbalances rather than maintain them for long-term maneuvering.</p>\n\n<p>The quality breakdown of these exchanges paints a more nuanced picture. Your accurate exchange ratio (2.9) is a bit below the GM benchmark (3.2), meaning that while you find good trades often, top GMs convert slightly more of their opportunities into truly optimal knight/bishop exchanges. At the same time, your inaccurate exchange ratio (1.3) is more than double the GM average of 0.6. This suggests that a significant portion of your decisions to trade or keep a minor piece are positionally imprecise: the moves are playable but fail to extract full value from the resulting pawn structure, squares, or piece activity. Interestingly, your bad exchange ratio (0.3) is slightly better than the GM reference of 0.4, implying that outright blunders in these trades are relatively rare; your main issue is not catastrophic misjudgment, but a higher rate of small but meaningful inaccuracies.</p>\n\n<p>Compared to leading GMs, your accurate exchange ratio matches Garry Kasparov and Ding Liren (both 2.9), but unlike them you pair this with a much higher inaccurate ratio (you at 1.3 vs 0.4 for Kasparov and 0.6 for Ding). In that sense, your willingness to trade resembles their activity level, yet without the same precision in choosing when the trade truly favors you. Relative to Anatoly Karpov and Mihail Tal, both at 3.1 accurate exchanges with much lower inaccurate ratios (0.5 and 0.3 respectively), you again appear more error-prone in judging the finer points of these imbalances. Your inaccurate exchange frequency is closest to Petrosian’s 1.2, but he couples that with a much higher accurate rate of 4.5, indicating a deeper, more consistent grasp of when knight–bishop trades serve the long-term plan.</p>", "section-1-9-forced-llm": "<p>Forced-move frequency is a window into how often your games enter situations where there is only one or a very small number of playable moves. A high forced-move ratio usually means you spend more time in sharp, tactical, or heavily constrained positions, where calculation and accuracy are paramount and small errors are punished immediately. A lower ratio typically reflects more control, maneuvering, and prophylaxis: you or your opponent are kept short of direct threats, leaving a wider range of reasonable options on most moves. In this sense, forced-move frequency connects directly to your preferred type of struggle: whether you tend to welcome concrete, forcing sequences or steer games toward positions where you can gradually improve your pieces without being constantly under the gun.</p>\n\n<p>Your forced-move ratio of 6.4% is just under the GM snapshot average of 6.8%, suggesting you reach critical, forced moments slightly less often than a typical GM in this sample. This leans a bit toward a more controlled, less chaotic game environment, though you are still very much in mainstream GM territory. Comparing you to specific references, your ratio is higher than Tigran Petrosian’s 3.7%, indicating you face significantly more forced decisions than his extremely prophylactic, risk-averse style, which often suffocated tactics before they appeared. At the same time, you are well below Garry Kasparov’s 9.9% and Bobby Fischer’s 8.7%, both indicative of players whose games are rich in sharp forcing lines and concrete calculation, and a bit below Ding Liren’s 7.0%, who also sees a slightly higher density of forced positions than you.</p>\n\n<p>Your closest numerical peers in this snapshot are Anatoly Karpov at 5.9% and Mihail Tal at 5.4%, though for very different reasons. Being near Karpov’s ratio suggests you share some affinity for controlling the board so that you are not perpetually in do-or-die scenarios; your games likely feature many moments with a choice among several acceptable plans. Being above Tal’s 5.4% indicates you actually encounter more forced moments than he does in this sample, hinting that you do allow a fair amount of tactical or concrete play into your games. Taken together, your profile points to a balanced style: broadly in line with GM norms, slightly on the side of control rather than constant calculation, but still comfortable engaging with concrete, forcing sequences when the position demands it.</p>", "section-1-10-positions-llm": "<p>Your handling of winning positions sits slightly below the GM snapshot: a ratio of 6.0 versus the reference 6.8. This suggests that you usually convert advantages, but not with the same relentlessness as the top sample. Compared to Ding Liren’s 6.8, your conversion rate is a touch lower, indicating that some promising positions slip into either long technical grinds or occasional missed wins. Relative to ultra-precise converters like Fischer at 12.7 or Karpov at 8.2, your style is less “squeezing” and more humanly practical: you tend to bring games home, but without the consistently maximal exploitation of small pluses that marks their play.</p>\n\n<p>In difficult positions, your losing-position handling ratio of 1.4 is significantly below the GM snapshot of 4.4. Against the reference specialists in defense and resistance, this gap is even starker: Petrosian reaches 4.2, Karpov 3.6, and Fischer 2.7, while Ding’s 1.9 still remains above your figure. Practically, this means that once you are worse, games tend to end relatively quickly, with fewer successful escapes or swindles. Where someone like Tal at 9.4 or Petrosian at 4.2 might repeatedly pose problems and generate counterchances, your games more often confirm the evaluation rather than muddying the waters. Overall, your style is more comfortable with pressing advantages than with stubbornly defending bad positions, and improving defensive tenacity could markedly raise your results.</p>", "section-2-1-maneuver-llm": "<p>Your overall maneuver ratio of 55.7% is clearly above the GM snapshot average of 50.8%, indicating that you rely on piece shuffling more than the reference group. This does not mean passive play by itself; it means a larger share of your decisions are about improving or relocating pieces rather than direct contact or pawn breaks, so efficiency inside this high volume becomes critical.</p>\n\n<p>Constructive maneuvers are well balanced: 14.4% is almost identical to the GM average of 14.3%. You are close to Kasparov’s 13.6%, Tal’s 13.0%, and Fischer’s 12.2%, but a bit below the more maneuver-focused Petrosian at 16.1% and Karpov at 15.7%. This suggests you are not underperforming in finding useful squares, even with your higher overall maneuver volume.</p>\n\n<p>Your prepare maneuvers at 3.1% are lower than the GM average of 3.9% and trail every reference GM, from Kasparov’s 4.3% and Fischer’s 4.2% to Tal’s 4.1%. Compared with Ding’s 3.5% and Petrosian’s 3.5%, you invest less in short-term regrouping that sets up a later operation, which can limit the payoff of your constructive ideas.</p>\n\n<p>The clearest contrast is in neutral and misplaced maneuvers. Neutral maneuvers at 22.2% exceed the GM average of 19.1% and even Tal’s 23.5% is only slightly higher. Misplaced maneuvers at 7.8% are almost double the GM average of 4.2% and far above Petrosian’s 2.3%, Karpov’s 2.1%, or Ding’s 1.3%. Combined with a slightly lower opening-maneuver rate (8.2% vs GM 9.4%, and below Kasparov’s 10.5% or Fischer’s 10.8%), this points to a style where pieces are often redirected later, suggesting that earlier, more purposeful maneuvering would both reduce waste and move you closer to the Ding–Petrosian efficiency profile.</p>", "section-2-2-prophylaxis-llm": "<p>Your overall prophylactic activity is high: 37.2% of your moves have a preventive flavor, above the GM snapshot at 33.1%. This means you think about the opponent’s ideas quite often. The way you express it, however, is clearly biased toward latent measures: 25.2% latent versus 6.5% direct. Compared with the GM baseline (21.7% latent and 8.5% direct), you rely more on multi‑purpose, quietly controlling moves and less on explicit blocking or covering. In this respect you sit stylistically closer to Petrosian’s high latent profile (29.3%) than to more direct players like Kasparov (10.1% direct) or Ding (9.2% direct), though your direct prevention is lower than any GM in the snapshot.</p>\n\n<p>The quality signal is mixed. Your meaningless prophylaxis at 3.6% is more than double the GM reference of 1.6%. Only Tal approaches you here, at 3.5%, while more “clean” technicians like Kasparov (1.1%), Karpov (1.3%), Ding (0.9%), and Fischer (1.2%) keep this much lower. Similarly, your failed prophylaxis at 1.9% exceeds the GM sample’s 1.2%; Tal again is higher at 2.7%, while others range from 0.2% to 1.4%. This suggests that you are willing to invest many moves into prevention, but a larger share than typical GMs either misjudges the opponent’s real threats or fails to fully neutralize them. In practical terms, your prophylactic philosophy is rich and ambitious, but it would benefit from sharpening: slightly fewer speculative “just-in-case” precautions and a higher proportion of concrete, accurately targeted defensive decisions.</p>", "section-2-3-semantic-control-llm": "<p>Your overall semantic control ratio sits clearly below the GM snapshot, which indicates a more modest use of deep, strategic control motifs. You are not neglecting these tools, but you call on them less often than elite peers, preferring a simpler, more direct handling of positions rather than squeezing every structural nuance.</p>\n\n<p>Your plan_kill usage is noticeably lower than the GM baseline, showing that you convert advantages in a more restrained way. Compared with Kasparov and Fischer, you launch concrete, advantage‑driven plans less frequently, often allowing positions to remain flexible rather than forcing matters. This aligns with your freeze_bind and blockade metrics, which also trail their GM counterparts: you do employ binds and blockades, but you are less insistent about locking the opponent down than Karpov or Petrosian in the reference set.</p>\n\n<p>Your file_seal ratio is also lower than the GM average and distinctly shy of Petrosian, Kasparov, and Fischer. You use files and lines as a positional resource, but you do not lean on them as a primary strategic weapon. The same pattern appears in king_safety_shell and space_clamp: both are slightly below the GM snapshot, suggesting you secure your king and claim space adequately but not in the same systematic, prophylactic way that Ding Liren or Petrosian exemplify.</p>\n\n<p>Regrouping sits just under the GM level and quite close to Petrosian and Fischer, hinting that you are comfortable with consolidation and piece improvement, even if you do it a bit less frequently. The complete absence of simplify and slowdown motifs underscores a bias toward playing positions out rather than clarifying them or deliberately reducing the game’s dynamic content.</p>", "section-2-4-cod-llm": "<p>Control over dynamics measures how often you steer the game away from chaos and back into positions where you dictate the terms: limiting counterplay, reorganizing pieces, and cooling opponent initiatives. Your overall control ratio of 19.4 is below both the GM snapshot at 23.6 and the specialist controllers like Petrosian at 21.5 or Karpov at 21.8, indicating that you allow more dynamic tension to remain in the position than these models.</p>\n\n<p>Your most prominent tool is file sealing: at 11.7 you are close to Petrosian’s 12.1 but behind the broader GM value of 14.2 and well below players like Tal at 18.0 or Ding at 15.2. This suggests you are comfortable closing files and reducing piece activity, but you do it less systematically than top GMs. In freeze motifs (binds and long-term restrictions), your 1.4 matches Petrosian and trails the GM 1.9, again pointing to some feel for long-term grips without fully relying on them.</p>\n\n<p>King-safety shells (3.8 vs GM 4.2) and regroups (6.2 vs GM 6.9) show you are willing to consolidate, yet not as frequently as Fischer or Kasparov, who are above 6.0 in this area. Your plan-kill ratio at 3.6 is notably below the GM 5.5 and all listed references, meaning you allow opponent plans more latitude before challenging them. Blockades (0.4) and space clamps (0.7) are in GM range, while simplify and slowdown are barely present. Overall, you have a credible but not dominant control toolkit: you can restrain and consolidate, yet you more often coexist with dynamic complexity than the classic control specialists.</p>", "section-2-5-initiative-llm": "<p>Your overall initiative attempt ratio of 3.7 is slightly higher than the GM snapshot baseline of 3.5, suggesting you are a bit more willing than the average GM sample to seize the initiative when opportunities arise. Compared to individual references, you are more ambitious than Petrosian and Fischer (2.5 and 2.6) and also somewhat more active than Karpov and Tal (both 3.3), but still more restrained than Kasparov and Ding (4.5 and 4.9). This places your initiative attempts in a moderately assertive, but not ultra-aggressive, range.</p>\n\n<p>Your deferred initiative ratio of 22.9 exceeds the GM snapshot value of 19.8 and closely matches Ding Liren’s 22.9, while being higher than Kasparov, Karpov, Tal, and Fischer. Only Petrosian’s 23.6 slightly surpasses you. This indicates a strong tendency to build up pressure patiently before striking, aligning you more with technically precise controllers of the game than with pure attackers.</p>\n\n<p>The premature attack ratio of 1.3 is higher than the GM snapshot of 1.1 and above Karpov, Kasparov, Tal, and Ding, while close to Petrosian’s 1.4 and slightly above Fischer’s 1.2. This points to a small, but noticeable, cost to your ambitious approach: you occasionally launch operations a tempo or two too early.</p>\n\n<p>Finally, your c-file pressure ratio of 0.0 exactly matches the GM baseline, implying no measurable stylistic lean toward c-file based initiative in this sample.</p>", "section-2-6-tension-llm": "<p>Your games show a moderate inclination to create tension, but at a level clearly below both the overall GM snapshot and most of the individual reference players. Your tension_creation ratio of 5.5 trails the GM average of 6.9, and is lower than the profiles of Petrosian, Kasparov, Karpov, Ding Liren, and even Tal, who sits at 5.7. In practical terms, this suggests you are somewhat selective about entering sharp pawn or piece conflicts and may decline borderline dynamic opportunities that these GMs would more often embrace.</p>\n\n<p>On the neutral_tension_creation side, your ratio of 8.3 is again below the GM snapshot of 9.1. Compared with individual models, you sit beneath Petrosian (9.8), Kasparov (9.2), Ding (9.7), Karpov (8.9), and Tal (8.8), but slightly above Fischer’s 8.0. This indicates that once tension appears, you are more inclined than most GMs to clarify the structure or trade pieces rather than maintain a poised, flexible position. Overall, your profile is closer to Fischer than to players like Petrosian or Ding: you do create and use tension, but you do not keep it hovering on the board as long as they do. To grow more “GM-like” here, aim to hold tense pawn chains and contested files one or two moves longer before resolving them.</p>", "section-2-7-structural-llm": "<p>Your structural profile shows a clear preference for keeping the pawn skeleton and key squares intact. With an integrity ratio of 12.0 versus a GM snapshot of 9.6, you maintain healthy structures more often than the typical grandmaster in this pool. This is even more pronounced when compared to structurally solid icons: you exceed Petrosian and Karpov (both 10.2), Kasparov (10.7), and Fischer (9.5), and you are far above Tal’s 7.6 and Ding’s 9.3. This suggests low tolerance for long-term weaknesses and a strong instinct to avoid self-inflicted targets.</p>\n\n<p>Your willingness to compromise structure dynamically is only slightly above the GM snapshot (5.9 vs 5.5), very close to Fischer’s 5.6 and Tal’s 5.4, and between Kasparov’s 4.8 and Petrosian’s 6.9. You do take on dynamic defects, but usually from a position of prior solidity rather than as a default weapon. Static compromises are also just above the GM snapshot (1.6 vs 1.5), matching Karpov’s 1.6 and exceeding Kasparov’s 1.0 and Ding’s 1.2. Overall, you resemble a structurally principled player who occasionally accepts weaknesses for concrete reasons, but your baseline bias is to keep the position sound and only later stretch the structure when you judge the dynamic return to be clearly sufficient.</p>", "section-2-8-sacrifice-llm": "<p>Your overall sacrifice ratio of 9.8 versus the GM baseline of 10.7 indicates you sacrifice slightly less often than the model grandmaster profile, but still within a clearly active, sacrifice-friendly style. This is not a cautious, material-obsessed approach; it is a moderately restrained one.</p>\n\n<p>In the tactical sphere, your ratio of 0.9 matches the GM reference of 0.9 almost exactly, so your willingness to sacrifice on concrete calculation is very “normal” for elite practice. The inaccuracy ratio of 0.2 versus 0.1 suggests that when you do gamble tactically, you accept somewhat more risk than the average, in the direction of Kasparov’s 0.2 rather than Karpov’s 0.0. Your speculative sacrifices at 0.6 versus a GM 0.3 underline this: you are twice as likely to enter unclear, objectively dubious territory, closer in spirit to Tal’s 0.6 than to the more controlled Karpov or Ding profiles.</p>\n\n<p>Positional sacrifices at 3.3 compared to a 3.9 GM baseline show that you use long-term, non-forced sacrifices less frequently than most of the reference GMs. While Fischer (4.4) and Petrosian (4.2) lean heavily on positional exchanges and pawns, you are more selective. Within that, your initiative sacrifices at 0.7 versus a 0.6 GM reference are quite typical, sitting near Ding (0.7) and slightly above Kasparov (0.6), indicating you willingly invest material for tempo and activity when the compensation is evident.</p>\n\n<p>Your structure sacrifices at 1.0 against a 0.9 GM norm, again very close to Fischer (0.9) and Kasparov (0.8), show a healthy readiness to damage your own structure for dynamic returns. By contrast, your space-oriented sacrifices at 2.9, below the GM 3.7 and well under Petrosian’s 4.1 or Fischer’s 4.2, suggest that pure spatial domination is a less frequent motive than in those models.</p>\n\n<p>Overall, your closest blend is between Fischer’s structural and Kasparov’s risk-tolerant tactical profile, but with fewer broad positional and space sacrifices, and a noticeable tilt toward speculative forays reminiscent of Tal’s ratio in that specific category.</p>", "section-2-9-synthesis-llm": "<p>Your overall style leans toward maneuvering and prophylaxis, with both categories appearing more frequently than the GM baseline. You maneuver in 55.7% of moves versus 50.8% for GMs, and prophylactic ideas occur in 37.2% of moves compared with 33.1%. Within this, your constructive maneuvers are essentially GM-like (14.4 vs 14.3), but you also produce more neutral maneuvers (22.2 vs 19.1) and almost double the GM rate of misplaced maneuvers (7.8 vs 4.2). This suggests strong interest in piece movement and reconfiguration, but with a higher-than-GM share of moves that do not fully coordinate with the position’s demands.</p>\n\n<p>Your prophylaxis has a distinctly latent character. Latent prophylactic moves are more common than the GM norm (25.2 vs 21.7), while direct defensive measures are lower (6.5 vs 8.5). At the same time, “meaningless” prophylaxis is more than twice the GM ratio (3.6 vs 1.6) and failed prophylaxis is also somewhat higher (1.9 vs 1.2), indicating that your anticipatory play is active and frequent, but not always accurately tuned to real threats.</p>\n\n<p>In terms of controlling dynamics and structures, your semantic control tags are somewhat lower overall than the GM benchmark (27.8 vs 33.9), reflecting a slightly more permissive attitude toward dynamic play. You close files, restrain, and regroup at near-GM levels, but with slightly reduced emphasis across fileseal, kingsafety, and plankill. By contrast, your structural integrity ratio is clearly higher than the GM reference (12.0 vs 9.6), while dynamic and static structural decisions track the GM numbers closely. This points to a preference for keeping your pawn structure sound and flexible, even if you exert a bit less formal control over the opponent’s activity.</p>\n\n<p>Your initiative profile is characterized by patience: deferred initiative is significantly higher than the GM figure (22.9 vs 19.8), while attempts and premature pushes are close to GM levels. You create and maintain tension slightly less than GMs, which fits a style that prefers solidity over maximum friction. Sacrifices appear with a near-GM total frequency (9.8 vs 10.7), but with a higher share of speculative and slightly more inaccurate decisions, indicating a willingness to speculate when the position feels promising. Finally, your exchange decisions occur at roughly GM volume, but with a higher proportion of inaccurate trades (1.3 vs 0.6), and your use of forced moves is very close to GM norms (6.4 vs 6.8). Overall, this portrays a player who values structure, latent prophylaxis, and delayed initiative, but who can refine the precision of maneuvers, prophylactic choices, and exchanges to align more closely with top-level standards.</p>", "section-3-1-ability-llm": "<p>Your current corpus shows a very successful and highly resilient White repertoire, built almost entirely around flexible systems with 1.b3 and 1.Nf3. A 65% win rate and 35% draws with White, with no losses and a performance near 2610, indicates that once you reach playable positions you are at least strong IM / low-GM level in practical results. The fact that your winning position ratio (6.0 vs a GM cluster at 6.8) is only slightly lower while your losing position ratio is much lower (1.4 vs 4.4) suggests you reach bad positions less often than the GM reference, even if you convert advantages somewhat less frequently than they do. Your advantage-conversion numbers from +3 onward (100% converted) reinforce the picture of a player who is very reliable once clearly ahead.</p>\n\n<p>Stylistically, your game has a distinct tilt toward latent, subtle control rather than sharp forcing dominance. Your constructive maneuver ratio (14.4) is very close to Petrosian (16.1), Karpov (15.7), and Ding (15.1), but you compensate with a higher neutral maneuver ratio (22.2 vs their 18.6–21.9 ranges). This points to a readiness to “wait and see” rather than consistently steer the game to your ideal structure. The initiative data supports this: your deferred initiative (22.9) is almost identical to Petrosian’s 23.6 and Ding’s 22.9, while your attempt ratio (3.7) sits between Kasparov (4.5) and Petrosian (2.5). You are closer to the Petrosian–Ding cluster in preferring to build and postpone direct clashes rather than constantly seizing the first tactical opportunity.</p>\n\n<p>Your prophylaxis profile is also revealing. Latent prophylaxis (25.2) is quite close to Petrosian (29.3) and Ding (21.9), and proportionally higher than Kasparov and Fischer, which fits your choice of quiet, elastic openings. However, your “meaningless” prophylaxis (3.6) and failed prophylaxis (1.9) are well above their reference ranges, showing that some of your safety-oriented moves do not meet the same objective standard. Similarly, your control-over-dynamics overall ratio (19.4) trails all the reference GMs (21.5–27.0), and your file-seal and plan-kill ratios are consistently below them. Combined with a middlegame accuracy of 0.822 vs 0.844 in the endgame, this suggests your positional control and transformation of advantages lag slightly behind your defensive resourcefulness and technical ability once the position is clarified.</p>\n\n<p>Structurally, you are at least as solid as the model GMs, with structural integrity at 12.0 compared to their ~9.3–10.7, mirroring Karpov and Ding’s emphasis on sound pawn structures. Yet your misplaced maneuver ratio (7.8) is much higher than the GM cluster (around 1.6–3.2), and your inaccurate exchanges (1.3 vs a GM 0.6, and above Petrosian/Kasparov’s inaccurate-exchange baselines) show that piece placement and trade decisions are still a clear growth area. The speculative sacrifice ratio (0.6) matches closely with Tal (0.6) and exceeds Kasparov and Karpov, but coupled with only a middling tactical hit rate (52.4%) and elevated inaccurate sacrifices, this currently costs you consistency more than it yields “Tal-like” practical magic.</p>\n\n<p>Your opening choices with 1.b3/1.Nf3 are working extremely well in this sample, giving you positions where your latent prophylaxis, structural integrity, and endgame accuracy can shine. Compared with the reference GMs, you resemble a more risk-managed Petrosian–Ding hybrid: high deferred initiative, strong structure, and relatively few losing positions, but with less precise dynamic control and more frequent misplacement and exchange errors. To progress toward true GM stability, the main focus should be on improving the quality of your maneuvers and exchanges in the middlegame, and tightening your dynamic control so that your already strong results and defensive resilience translate into GM-level conversion and tactical consistency.</p>", "section-3-2-rating-llm": "<p>Based on your White results and accuracy profile, your estimated FIDE strength is around 2350, with an error margin of roughly ±120 Elo. The White-only performance rating of 2609.7 and perfect loss avoidance are clearly above your underlying level, likely inflated by a small sample and favorable positions, but your 0.831 overall accuracy and 2.8% blunder rate still point solidly to a strong master range. More games, especially with Black, would narrow this uncertainty.</p>\n\n<p>Compared with players in the next lower band (around 2150–2200), you convert advantages more cleanly and defend worse positions better: your winning-position ratio of 6.0 is closer to GM reference levels (6.8) than your likely rating, and your exposure to losing positions is far lower at 1.4 versus the GM 4.4 baseline. Your structural integrity ratio of 12.0 also exceeds typical GM levels of 9.6, indicating a more consistent pawn structure than typical sub-2300 opposition.</p>\n\n<p>Relative to the next higher band (around 2450–2500), your style is more volatile and less GM-like in precision. You rely more on neutral and misplaced maneuvers (22.2 and 7.8 versus GM 19.1 and 4.2), and your inaccurate exchanges ratio of 1.3 is more than double the GM 0.6 benchmark. You also trail top GMs slightly in constructive maneuvering (14.4 vs Petrosian’s 16.1) and in disciplined prophylaxis, with more meaningless and failed prophylactic moves than their reference values, which is typical of a strong master still refining elite-level consistency.</p>", "section-4-1-white-openings-llm": "<p>Your White repertoire is narrowly focused but highly effective in this sample. Almost every game starts with a flank setup based on b3 or Nf3, and all lines score either 100% or 50% with no recorded losses. The best-performing sequences by accuracy include 1.b3 d5 2.Bb2 c5 3.e3 Nf6 4.Nf3 Bg4 (0.938), 1.Nf3 d5 2.b3 Bg4 3.Bb2 Bxf3 4.exf3 Nd7 (0.894), and 1.Nf3 d5 2.b3 Bg4 3.Ne5 Bf5 4.Bb2 Nd7 (0.892), combining strong accuracy with a perfect score. Your lowest-accuracy win is 1.b3 d5 2.Bb2 Bf5 3.Nf3 e6 4.g3 Nf6 (0.634), suggesting this structure is less comfortable. Overall, you handle the b3 systems consistently well across different Black setups.</p>", "section-4-2-black-openings-llm": "<p>There is no available data in the JSON for your Black openings, so we cannot yet identify which defenses or specific variations are performing best or worst. The empty dataset means we cannot compare your opening choices or results to peers or to any GM benchmarks, nor can we reliably say whether you are gravitating toward solid, dynamic, or offbeat systems. To draw meaningful conclusions about your Black repertoire, we would need game counts, results, and variation breakdowns. Once such data is recorded, we can highlight which defenses are overperforming, which lines may be statistical weaknesses, and where your results diverge from strong reference players, then recommend focused improvements in your Black opening strategy.</p>", "section-4-3-main-repertoires-llm": "<p>Your White repertoire is clearly built around flexible queen’s‑side fianchettos. The overwhelming majority of games start with 1.b3, often followed by Bb2 and e3, or by Nf3 first and then b3. This recurring structure appears across many lines such as 1.b3 d5 2.Bb2 Bg4, 1.b3 d5 2.Bb2 c5, and 1.b3 d5 2.Nf3 c5, marking the “Nimzo‑Larsen style” systems as your core choice with White. Even when you begin with 1.Nf3 or 1.g3, you frequently transpose back into the same b3/Bb2 setups, reinforcing their central role in your repertoire.</p>\n\n<p>These lines are not just frequent; they are also handled with consistently strong accuracy, often in the 0.80–0.89 range and peaking at 0.938 in one of the b3–Bb2 structures. That combination of repetition and reliable execution indicates real comfort with the resulting middlegame plans. By contrast, other White first moves (such as pure 1.Nf3 without b3) appear less often and tend to transpose back, underlining that these b3/Bb2 systems are your practical home base. With Black there is currently no stable repertoire yet, as no games are recorded.</p>", "section-4-4-secondary-llm": "<p>Your secondary White repertoire is built almost entirely on flank systems, especially with 1.b3 and related move orders. Across these low-volume lines you maintain consistently strong precision: every single game in this sample is above 0.63 accuracy, and most cluster in the 0.80–0.89 range. That level, combined with a 100% non-loss rate (no recorded losses), makes your offbeat choices significantly more efficient than typical peer play in rarely studied systems.</p>\n\n<p>The fact that many structures repeat – …d5 plus …c5 or …c6 against both 1.b3 and 1.Nf3 – suggests you are not just surprising opponents, but also navigating the resulting middlegames with above-average control. However, each individual line here is represented by only one game, so the apparent 100% scores in many branches are statistically fragile. These weapons should therefore be treated as promising but still unproven: excellent practical results and solid accuracy over a handful of games, but not yet backed by the kind of volume that would confirm them as fully reliable mainstays of your repertoire.</p>", "section-4-5-depth-llm": "<p>Your White repertoire shows both high theoretical precision and notable breadth. Across 20 distinct lines, your accuracy is consistently strong, clustering in the 0.80–0.89 range with several games above 0.86 (for example 0.872 and 0.894), and only one clear outlier at 0.634. This combination of stable accuracy and a wide spread of first-move setups (b3, Nf3, g3, and hybrid systems) indicates preparation that is deeper and more reliable than that of a typical peer relying on a narrower move tree.</p>\n<p>The repeated handling of similar Black structures with different move orders (…d5/…c5/…c6, various …Bg4 and …Bf5 setups) suggests that your preparation is concept-based rather than memorized, which usually scales better in unfamiliar branches. The absence of Black games in the dataset prevents direct comparison of depth between colors, but it does mean that, relative to peers, your theoretical identity is currently far more developed with White. Future work should focus on building a similarly coherent, multi-structure repertoire as Black.</p>", "section-4-6-style-llm": "<p>Your consistent use of 1.b3, Nf3 and g3 systems fits neatly with the style profile. These openings avoid early direct clashes and invite a slower, latent fight for control, which matches your higher-than-GM ratios in neutral maneuvers (22.2 vs 19.1) and latent prophylaxis (25.2 vs 21.7). By steering games into flexible structures, you give yourself time to maneuver, but this also correlates with a noticeably elevated rate of misplaced maneuvers (7.8 vs 4.2), showing that the freedom you seek can sometimes dilute piece coordination.</p>\n<p>Your structural integrity moves are more frequent than GM norms (12.0 vs 9.6), quite logical for double‑fianchetto and b3 setups where you protect your pawn chain and king first. At the same time, total semantic control is lower (27.8 vs 33.9), suggesting that these offbeat openings do not always lead to the clear clamps and file control positions GMs extract from more mainstream systems. Initiative is typically deferred (22.9 vs 19.8), which suits your solid, system-based approach. Sacrifices remain broadly in line with GM ratios in total (9.8 vs 10.7), reinforcing the picture of a player who uses flexible flank openings to build a safe, maneuvering platform before committing to dynamic decisions.</p>", "section-4-7-performance-llm": "<p>Your White repertoire is extremely narrow but effective: every game comes from flank setups with b3, Nf3, or g3, and there are no Black games in the sample at all. Within that slice, the raw results are outstanding: the b3/Bb2 systems score almost all wins, with only a few draws and no recorded losses. However, because every individual line appears only once, the results say more about single-game performance than about long-term reliability.</p>\n\n<p>Even with that caveat, some patterns stand out. Your best showings mix strong results with high accuracy, such as the Nf3–b3 line with 0.894 accuracy after 1. Nf3 d5 2. b3 Bg4 3. Bb2 Bxf3 4. exf3, and the central break approach with 0.872 after 1. Nf3 d5 2. e3 g6 3. c4. By contrast, the only clearly underperforming White line is the win at just 0.634 accuracy following 1. b3 d5 2. Bb2 Bf5 3. Nf3 e6 4. g3, where the result hides some looseness in move quality. Overall, you shine in flexible b3/Nf3 structures, but the absence of Black data and the one-game samples mean these trends should be treated as provisional rather than definitive.", "section-4-8-takeaways-llm": "<p>Your white repertoire is extremely narrow but handled with consistently strong accuracy across very different move orders. Almost every game features 1.b3 or a quick Bb2, with occasional 1.Nf3 or 1.g3 transpositions, and your accuracy in these systems stays mostly in the 0.80–0.89 range, peaking at 0.938 in a drawn 1.b3 d5 2.Bb2 c5 3.e3 Nf6 4.Nf3 Bg4 game. Results with 1.b3 against …d5–…c5 or …d5–…Nf6 structures are uniformly positive: all such entries with wins show accuracies above 0.80, while even the draws against setups with …Bg4 and …Bxf3 remain above 0.81. The only clear dip is the 1.b3 d5 2.Bb2 Bf5 3.Nf3 e6 4.g3 line at 0.634, suggesting that specific structure is less comfortable than your other Bb2 systems. Overall, your current white repertoire around b3/Bb2 is both cohesive and effective, with no black games yet recorded to balance this picture.</p>", "section-5-1-priorities-llm": "<p>Your white results and conversion of advantages are excellent, so priorities should focus less on scoring and more on bringing your play up to GM-like quality in critical decision areas. Exchange handling is a clear target: your accurate exchanges ratio (2.9) is close to the GM benchmark (3.2), but your inaccurate exchanges are more than double the GM ratio (1.3 vs 0.6). Systematic work on exchange evaluation, especially in queenful middlegames where your accuracy is lower than in queenless ones (0.822 vs 0.851), should yield immediate gains.</p>\n<p>Middlegame accuracy (0.822) trails your own endgame level (0.844), indicating that you reach technically good endings but waste some equity earlier. This aligns with your higher-than-GM rate of misplaced maneuvers (7.8 vs 4.2) and meaningless prophylaxis (3.6 vs 1.6). Training should emphasize improving the purposefulness of your maneuvering and prophylactic moves, converting neutral moves into constructive or directly prophylactic ones.</p>\n<p>Finally, your tactical solve rate (52.4%) and speculative sacrifices ratio (0.6 vs GM 0.3) suggest that sharpening concrete calculation and tactic-checking discipline is a higher priority than expanding your opening repertoire or stylistic experimentation.</p>", "section-5-2-study-llm": "<p>Your overall accuracy of 0.831, with a slightly higher 0.844 in endgames than 0.822 in middlegames, suggests you convert better once the position clarifies. To sharpen calculation in the middlegame, build daily exercises around your 52.4% tactic solve rate: set a timer and calculate until you can reliably match your in-game 48.1% top-engine move rate, then push toward your already excellent 90.2% top‑3 rate.</p>\n\n<p>Your exchange handling is mixed: total exchange ratio (4.5) is close to GM level (4.3), but inaccurate exchanges (1.3 vs GM 0.6) are clearly higher. Study annotated model games specifically focusing on when strong players trade into better structures, then analyze your own games where exchanges shifted evaluations, comparing your choice with the engine’s top line.</p>\n\n<p>Structurally, your integrity ratio (12.0 vs GM 9.6) and low losing-position ratio (1.4 vs GM 4.4) indicate you handle pawn structure and risk better than typical. Leverage this by choosing openings that lead to long, queenless struggles, where your 0.851 queenless accuracy and higher structural understanding can systematically outplay peers.</p>", "section-5-3-habits-llm": "<p>Your results suggest several concrete habits to reinforce. With White you convert advantages very well: at +1 you already win 81.2% and at +3 or more you win 100%. To support this strength, build a time habit of “investing early, harvesting late”: spend more time before positions become clearly winning, then play faster but precise moves once you reach +3 or better, trusting your 0.844 endgame score.</p>\n\n<p>Your volatility profile is skewed toward big swings (75% of games), and your inaccurate exchange ratio (1.3 versus 0.6 for GMs) and misplaced maneuvers (7.8 versus 4.2) are likely contributors. To control risk, adopt a checkpoint routine: before any exchange or non‑forcing maneuver, briefly compare material, king safety, and key squares, prioritizing simpler continuations when already better. This aligns with your lower losing‑position ratio (1.4 versus 4.4 for GMs): you usually avoid disaster, so you gain more by cutting out self‑inflicted swings than by gambling.</p>\n\n<p>In review, focus less on opening memorization and more on middlegame critical moments where your accuracy dips (0.822) and speculative or inaccurate sacrifices appear. Tag those positions and regularly revisit them to sharpen your judgment under pressure.</p>", "section-6-1-vs-white-llm": "<p>As White, this player almost exclusively relies on 1.b3 and related fianchetto setups, with strong practical results and solid accuracy around 0.82–0.89 in those games. You should therefore avoid entering unfamiliar sidelines; choose classical central systems with …d5 and …c5 that mirror the structures they already know, then steer for positions where their stylistic weaknesses matter more than the opening surprise value.</p>\n\n<p>Their maneuver profile shows more misplaced moves than GM norms (7.8% vs 4.2%) and fewer preparatory maneuvers (3.1% vs 3.9%), so aim for positions where accurate piece regrouping is critical. They also rely more on neutral moves (22.2% vs 19.1%), suggesting you should choose openings that punish passivity—sharp central breaks in flexible Queen’s Pawn or King’s Indian–type structures after 1.b3 work well.</p>\n\n<p>They have higher latent prophylaxis and more “meaningless” and failed prophylaxis than GM averages, so long-term, hard-to-read plans can overload their defensive understanding. Exchange sequences are a clear pressure point: they make inaccurate exchanges at more than double GM rate (1.3% vs 0.6%). With White, guide the game toward structures where the value of trades is non-obvious, then exploit the resulting imbalances in the middlegame.</p>", "section-6-2-vs-black-llm": "<p>From Black’s perspective you want structures that expose this player’s loose manoeuvring and only moderate control of dynamics. Their constructive manoeuvre ratio is essentially GM-level, but the 7.8% misplaced moves are almost double the GM reference of 4.2, and neutral manoeuvres are also higher. Aim for flexible …d5/…c5 setups against their b3 and Nf3 systems, keeping pieces on the board and giving them chances to misplace pieces rather than simplify early.</p>\n\n<p>They rely more on latent prophylaxis (25.2 vs 21.7) and much less on direct prophylaxis (6.5 vs 8.5), so choose openings where direct counterplay matters: quick …Bg4, …Bf5, or …c4 to confront their queenside fianchetto. Their control-over-dynamics total (19.4 vs 23.6) and lower fileseal and plankill ratios suggest you should aim for open files and pawn breaks rather than static positions.</p>\n\n<p>Structurally they score higher than GMs on integrity (12.0 vs 9.6), so pure, healthy-pawn positions are comfortable for them; prefer slightly unbalanced structures where precise exchanges matter, since their inaccurate exchange ratio is more than double the GM reference (1.3 vs 0.6). In sum: choose dynamic, slightly messy queen’s pawn or English-type setups, provoke tension, and avoid sterile symmetry.</p>", "section-6-3-middlegame-llm": "<p>In the middlegame, you should steer positions toward this player’s structural comfort and then exploit the weaknesses in how they handle dynamics. Their constructive maneuvers are close to GM levels (14.4 vs 14.3), but they rely more on neutral moves (22.2 vs 19.1) and have a much higher rate of misplaced maneuvers (7.8 vs 4.2). Aim for positions where piece coordination really matters: repeated regrouping will tend to expose their less precise piece placement.</p>\n\n<p>They use prophylaxis frequently (37.2 vs 33.1), especially latent ideas (25.2 vs 21.7), but with more meaningless (3.6 vs 1.6) and failed prophylaxis (1.9 vs 1.2). Create multi-purpose threats so their defensive moves can easily become misdirected. Their overall semantic control is lower than GMs (27.8 vs 33.9), and control over dynamics is also lower (19.4 vs 23.6), so complex, dynamic structures are preferable to static ones.</p>\n\n<p>Once you gain an advantage, be cautious: with White they convert +1 positions very reliably (81.2% wins) and never lose even at -3 or -5. Instead, press them into big-swing battles; 75% of their White games show large evaluation swings, and their exchange play is more inaccurate than GMs (1.3 vs 0.6), giving you practical chances to turn pressure into decisive errors.</p>", "section-6-4-endgame-llm": "<p>Your endgame profile is statistically one of your relative strengths. Accuracy improves from a middlegame score of 0.822 to 0.844 in the endgame, and your queenless score rises further to 0.851 with the lowest average loss at 14.86. This suggests that as material comes off, you convert advantages and defend worse positions more cleanly than in earlier phases.</p>\n\n<p>Compared with GM maneuver patterns, your constructive maneuver ratio of 14.4 is essentially GM-like at 14.3, but this is offset by a clearly higher misplaced ratio (7.8 versus 4.2) and fewer preparatory moves (3.1 versus 3.9. You steer a large share of maneuvers into neutral territory (22.2 versus 19.1), which indicates solid but sometimes non-ambitious piece handling in technical endings.</p>\n\n<p>Structurally, you exceed GM integrity ratios (12.0 versus 9.6) and are slightly above in both dynamic and static structures, giving you a good platform for endgame play. You reach winning positions at a slightly lower rate than GMs (6.0 versus 6.8) but end up in losing ones far less often (1.4 versus 4.4), reinforcing the picture of a comparatively resilient and risk-aware endgame style.</p>", "section-6-5-psychology-llm": "<p>Your games with White show a very swingy psychological profile: 75% of them feature big evaluation swings and another 15% medium swings, with no smooth crushes or collapses. This suggests you are comfortable operating in chaos and are willing to accept large risk rather than steer toward controlled wins or controlled losses. Yet within this volatility you still find clean games: 10% of your White games are high-precision draws, showing you can stabilize when needed.</p>\n<p>Your initiative profile is slightly more assertive than GM norms: you attempt to seize the initiative a bit more often (3.7 vs 3.5) and defer it more frequently as well (22.9 vs 19.8), while also drifting into premature pushes a touch above GM levels (1.3 vs 1.1). Psychologically, that points to a player who values the initiative, but sometimes presses just before the position is fully ready. Your sacrifice rates are overall close to GM norms, but your speculative sacrifices are twice the GM ratio (0.6 vs 0.3) and inaccurate ones are also higher (0.2 vs 0.1), signaling confidence in dynamic play and a willingness to gamble.</p>\n<p>Conversion and defense with White are resilient: at +3 and beyond you convert 100% of the time, and even at -3 or -5 you always hold the draw. Opponents should aim for stable, low-swing positions, avoiding complications where your speculative style and defensive tenacity become assets. Prolonging small, risk-free edges rather than forcing sharp races is the best way to neutralize your psychological comfort zone.</p>", "section-6-6-gameplan-llm": "<p>As Black you should aim for solid, principled development against the opponent’s flank openings. Their opening accuracy ranges widely from 0.634 to 0.938, so maintain a compact center with ...d5, ...c5, and quick piece development, inviting them to overextend. Their games show a high ratio of big-swings (75.0% vs 0.0% for smooth crushes), so avoid early all-in tactics and instead steer for stable structures that let their inaccuracies accumulate.</p>\n\n<p>In the middlegame, their maneuvering is more misplaced than GM norms (7.8 vs 4.2) and their prophylaxis has more meaningless moves (3.6 vs 1.6). You should pressure multiple weaknesses and set subtle traps, counting on them to drift. Their exchanges are less accurate than GMs (accurate 2.9 vs 3.2, inaccurate 1.3 vs 0.6), so engineer critical trades where precision matters.</p>\n\n<p>Transitioning to the endgame favors you: their queenless accuracy (0.851) is higher than queenful (0.822), but they reach fewer winning positions than GMs (6.0 vs 6.8) and far fewer losing ones (1.4 vs 4.4), indicating risk aversion. Press small, safe advantages, avoid giving them sharp counterplay, and gradually convert once you reach +1, where they still fail to win 18.8% of the time.</p>"}, "visualizations": {"viz-forced-moves-axis": {"player": {"name": "You", "value": 6.4}, "gms": [{"name": "Tigran Petrosian", "value": 3.7}, {"name": "Garry Kasparov", "value": 9.9}, {"name": "Anatoly Karpov", "value": 5.9}, {"name": "Mihail Tal", "value": 5.4}, {"name": "Ding Liren", "value": 7.0}, {"name": "Bobby Fischer", "value": 8.7}]}, "viz-positions-axis": {"player": {"name": "You", "value": 6.0}, "gms": [{"name": "Tigran Petrosian", "value": 1.8}, {"name": "Garry Kasparov", "value": 9.6}, {"name": "Anatoly Karpov", "value": 8.2}, {"name": "Mihail Tal", "value": 1.8}, {"name": "Ding Liren", "value": 6.8}, {"name": "Bobby Fischer", "value": 12.7}]}, "viz-maneuver-axis": {"player": {"name": "You", "value": 55.7}, "gms": [{"name": "Tigran Petrosian", "value": 55.7}, {"name": "Garry Kasparov", "value": 47.4}, {"name": "Anatoly Karpov", "value": 52.1}, {"name": "Mihail Tal", "value": 54.2}, {"name": "Ding Liren", "value": 50.4}, {"name": "Bobby Fischer", "value": 44.7}]}, "viz-prophylaxis-axis": {"player": {"name": "You", "value": 37.2}, "gms": [{"name": "Tigran Petrosian", "value": 41.1}, {"name": "Garry Kasparov", "value": 29.3}, {"name": "Anatoly Karpov", "value": 32.5}, {"name": "Mihail Tal", "value": 35.3}, {"name": "Ding Liren", "value": 32.5}, {"name": "Bobby Fischer", "value": 27.8}]}, "viz-semantic-control-axis": {"player": {"name": "You", "value": 27.8}, "gms": [{"name": "Tigran Petrosian", "value": 29.1}, {"name": "Garry Kasparov", "value": 34.0}, {"name": "Anatoly Karpov", "value": 30.3}, {"name": "Mihail Tal", "value": 40.9}, {"name": "Ding Liren", "value": 36.6}, {"name": "Bobby Fischer", "value": 32.7}]}, "viz-cod-axis": {"player": {"name": "You", "value": 19.4}, "gms": [{"name": "Tigran Petrosian", "value": 21.5}, {"name": "Garry Kasparov", "value": 24.0}, {"name": "Anatoly Karpov", "value": 21.8}, {"name": "Mihail Tal", "value": 27.0}, {"name": "Ding Liren", "value": 25.0}, {"name": "Bobby Fischer", "value": 22.3}]}, "viz-initiative-axis": {"player": {"name": "You", "value": 3.7}, "gms": [{"name": "Tigran Petrosian", "value": 2.5}, {"name": "Garry Kasparov", "value": 4.5}, {"name": "Anatoly Karpov", "value": 3.3}, {"name": "Mihail Tal", "value": 3.3}, {"name": "Ding Liren", "value": 4.9}, {"name": "Bobby Fischer", "value": 2.6}]}, "viz-tension-axis": {"player": {"name": "You", "value": 5.5}, "gms": [{"name": "Tigran Petrosian", "value": 8.6}, {"name": "Garry Kasparov", "value": 7.7}, {"name": "Anatoly Karpov", "value": 7.3}, {"name": "Mihail Tal", "value": 5.7}, {"name": "Ding Liren", "value": 7.1}, {"name": "Bobby Fischer", "value": 5.1}]}, "viz-structural-axis": {"player": {"name": "You", "value": 12.0}, "gms": [{"name": "Tigran Petrosian", "value": 10.2}, {"name": "Garry Kasparov", "value": 10.7}, {"name": "Anatoly Karpov", "value": 10.2}, {"name": "Mihail Tal", "value": 7.6}, {"name": "Ding Liren", "value": 9.3}, {"name": "Bobby Fischer", "value": 9.5}]}, "viz-sacrifice-axis": {"player": {"name": "You", "value": 9.8}, "gms": [{"name": "Tigran Petrosian", "value": 11.9}, {"name": "Garry Kasparov", "value": 10.1}, {"name": "Anatoly Karpov", "value": 9.0}, {"name": "Mihail Tal", "value": 11.4}, {"name": "Ding Liren", "value": 10.4}, {"name": "Bobby Fischer", "value": 11.3}]}}, "tag_explanations": {"Constructive maneuver": "Reroute that improves piece harmony and future activity.", "Constructive maneuver (prepare)": "Quiet reroute that sets up a later plan or breakthrough.", "Neutral maneuver": "Repositioning with limited impact—neither improves nor harms much.", "Misplaced maneuver": "Reroute that wastes time or worsens coordination.", "Opening maneuver": "Early-game reroute to better squares after initial development.", "Overall maneuver ratio": "Share of moves classified as maneuvers.", "Direct prophylactic": "Move that directly stops the opponent’s immediate threat or plan.", "Latent prophylactic": "Restricts future ideas before they become concrete threats.", "Meaningless prophylactic": "Prophylaxis that addresses no real threat.", "Failed prophylactic": "Attempted prevention that still allows the threat.", "Overall prophylaxis ratio": "Share of moves aimed at prevention.", "Control: simplify": "Trades or simplifications to reduce complexity.", "Control: plan kill": "Stops the opponent’s main strategic plan.", "Control: freeze/bind": "Limits opponent mobility and counterplay.", "Control: blockade passed pawn": "Holds back or fixes a passed pawn.", "Control: file seal": "Secures or contests an open/semi-open file.", "Control: king safety shell": "Strengthens the king’s pawn and square cover.", "Control: space clamp": "Claims key squares to restrict counterplay.", "Control: regroup/consolidate": "Re-coordinates pieces after operations.", "Control: slowdown": "Tempers the position to avoid sharp forcing lines.", "Overall semantic control ratio": "Share of moves aimed at positional control.", "Control over dynamics (overall)": "Moves chosen to shape the game’s tactical temperature.", "CoD: file seal": "Dynamic control by contesting files before tactics explode.", "CoD: freeze/bind": "Dynamic restriction to keep the opponent cramped.", "CoD: king safety": "Dynamic tweaks that keep the king safe during tactics.", "CoD: regroup/consolidate": "Dynamic re-coordination to stabilize.", "CoD: plan kill": "Dynamic strike that halts opponent initiative.", "CoD: blockade passed pawn": "Dynamic blockading of a passed pawn in sharp play.", "CoD: simplify": "Trades to cool down complications.", "CoD: space clamp": "Dynamic space grab to limit enemy breaks.", "CoD: slowdown": "Tempo moves to cool the position.", "Initiative attempt": "Actively driving threats to keep the move-by-move pressure.", "Deferred initiative": "Postpones attack to finish prep or development.", "Premature attack": "Attack launched before position is ready.", "C-file pressure": "Initiative built around control of the c-file.", "Tension creation": "Creates or sustains pawn/piece tension.", "Neutral tension creation": "Tension that neither helps nor harms notably.", "Structural integrity": "Keeps pawn structure healthy and flexible.", "Structural compromise (dynamic)": "Accepts structural weakness for activity.", "Structural compromise (static)": "Weak structure without clear compensation.", "Tactical sacrifice": "Material given for concrete tactical gain.", "Positional sacrifice": "Material invested for long-term positional edge.", "Inaccurate tactical sacrifice": "Dubious sac without enough payoff.", "Speculative sacrifice": "High-risk sac with unclear compensation.", "Desperate sacrifice": "Last-ditch sac from a bad position.", "Tactical combination sacrifice": "Sac as part of a forcing combination.", "Tactical initiative sacrifice": "Sac to keep initiative flowing.", "Positional structure sacrifice": "Material for structural damage to opponent.", "Positional space sacrifice": "Material for space or central control.", "Overall sacrifice ratio": "Share of moves involving sacrifices.", "Accurate knight/bishop exchange": "Trade that improves your minor-piece balance.", "Inaccurate knight/bishop exchange": "Trade that hands the opponent better minors.", "Bad knight/bishop exchange": "Clearly harmful minor-piece trade.", "Total exchange frequency": "All tagged minor-piece exchanges.", "Forced moves": "Moves compelled by tactics to avoid big loss.", "Winning position handling": "Technique in converting clearly winning spots.", "Losing position handling": "Resilience when position is bad.", "Tactical opportunities found": "Tactics spotted and exploited.", "Tactical opportunities missed": "Tactics available but not taken.", "Tactical conversion rate": "Share of tactics you convert."}};

      // Whitelisted GMs (must exist in "current GM metrics" folder) with photo paths
      const GM_PHOTO_MAP = {
        'bobby fischer': '/assets/bobby-fischer.jpg',
        'garry kasparov': '/assets/garry-kasparov.jpg',
        'anatoly karpov': '/assets/anatoly-karpov.jpeg',
        'mihail tal': '/assets/mihail-tal.jpg',
        'tigran petrosian': '/assets/tigran-petrosian.jpg',
        'ding liren': '/assets/ding-liren.jpg',
      };

      // ========== GM AXIS VISUALIZATION LIBRARY ==========
      class GMAxisViz {
        constructor() {
          this.visualizations = [];
        }

        /**
         * Create an axis visualization
         * @param {string} containerId - ID of the container element
         * @param {Object} config - Configuration object
         *   - min: minimum value for the axis
         *   - max: maximum value for the axis
         *   - player: { name, value }
         *   - gms: [{ name, value }, ...]
         */
        create(containerId, config) {
          const container = document.getElementById(containerId);
          if (!container) {
            console.warn(`Container ${containerId} not found`);
            return;
          }

          const player = config.player;
          const gms = this.filterAndEnrichGMs(config.gms || []);
          const { min, max } = this.computeRange(config, gms, player);
          const range = max - min;

          // Clear existing content
          container.innerHTML = '';

          // Create GM markers
          if (gms && gms.length > 0) {
            gms.forEach(gm => {
              const percentage = this.calculatePercentage(gm.value, min, range);
              const marker = this.createMarker(gm.name, gm.value, percentage, false, gm.photo);
              container.appendChild(marker);
            });
          }

          // Create player marker
          if (player) {
            const playerPercentage = this.calculatePercentage(player.value, min, range);
            const playerMarker = this.createMarker(player.name, player.value, playerPercentage, true);
            container.appendChild(playerMarker);
          }

          this.visualizations.push({ containerId, config });
        }

        filterAndEnrichGMs(gms) {
          return gms
            .map(gm => {
              if (!gm || !gm.name) return null;
              const key = gm.name.trim().toLowerCase();
              const photo = GM_PHOTO_MAP[key];
              if (!photo) return null; // Filter out non-whitelisted GMs
              return { ...gm, photo };
            })
            .filter(Boolean);
        }

        computeRange(config, gms, player) {
          const gmValues = gms
            .map(gm => gm && typeof gm.value === 'number' ? gm.value : null)
            .filter(v => v !== null);

          let min = typeof config.min === 'number' ? config.min : null;
          let max = typeof config.max === 'number' ? config.max : null;

          if (gmValues.length > 0) {
            const gmMin = Math.min(...gmValues);
            const gmMax = Math.max(...gmValues);
            min = min === null ? gmMin : Math.min(min, gmMin);
            max = max === null ? gmMax : Math.max(max, gmMax);
          }

          const playerVal = player && typeof player.value === 'number' ? player.value : null;
          if (playerVal !== null) {
            min = min === null ? playerVal : Math.min(min, playerVal);
            max = max === null ? playerVal : Math.max(max, playerVal);
          }

          // Fallback if still null (no data)
          if (min === null || max === null) {
            min = 0;
            max = 1;
          }

          // Avoid zero range
          if (min === max) {
            min -= 1;
            max += 1;
          }

          return { min, max };
        }

        calculatePercentage(value, min, range) {
          if (range === 0) return 50; // Default to center if no range
          const percentage = ((value - min) / range) * 100;
          // Clamp between 2% and 98% to prevent edge overflow
          return Math.max(2, Math.min(98, percentage));
        }

        createMarker(name, value, percentage, isPlayer, photo) {
          const marker = document.createElement('div');
          marker.className = isPlayer ? 'player-marker' : 'gm-marker';
          marker.style.left = `${percentage}%`;

          const label = document.createElement('div');
          label.className = isPlayer ? 'player-marker-label' : 'gm-marker-label';
          if (photo && !isPlayer) {
            const img = document.createElement('img');
            img.src = photo;
            img.alt = name;
            img.className = 'gm-marker-avatar';
            label.appendChild(img);
          }
          const nameSpan = document.createElement('span');
          nameSpan.textContent = name;
          label.appendChild(nameSpan);

          const dot = document.createElement('div');
          dot.className = isPlayer ? 'player-marker-dot' : 'gm-marker-dot';

          const line = document.createElement('div');
          line.className = isPlayer ? 'player-marker-line' : 'gm-marker-line';

          const valueLabel = document.createElement('div');
          valueLabel.className = isPlayer ? 'player-marker-value' : 'gm-marker-value';
          valueLabel.textContent = this.formatValue(value);

          marker.appendChild(label);
          marker.appendChild(dot);
          marker.appendChild(line);
          marker.appendChild(valueLabel);

          return marker;
        }

        formatValue(value) {
          if (typeof value === 'number') {
            const fixed = value.toFixed(1);
            return value % 1 === 0 ? `${Math.round(value)}%` : `${fixed}%`;
          }
          return value;
        }

        /**
         * Batch create multiple visualizations
         * @param {Object} configs - Object with containerId as key and config as value
         */
        createMultiple(configs) {
          Object.keys(configs).forEach(containerId => {
            this.create(containerId, configs[containerId]);
          });
        }

        /**
         * Update an existing visualization
         * @param {string} containerId - ID of the container element
         * @param {Object} newConfig - New configuration
         */
        update(containerId, newConfig) {
          const index = this.visualizations.findIndex(v => v.containerId === containerId);
          if (index !== -1) {
            this.visualizations[index].config = newConfig;
            this.create(containerId, newConfig);
          }
        }

        /**
         * Remove all visualizations
         */
        clear() {
          this.visualizations.forEach(viz => {
            const container = document.getElementById(viz.containerId);
            if (container) {
              container.innerHTML = '';
            }
          });
          this.visualizations = [];
        }
      }

      // Init visualization library
      vizLib = new GMAxisViz();

      // Prefer inline payload injected by generator; otherwise fetch from API.
      if (window.__PHASE2_INLINE_PAYLOAD__) {
        const payload = window.__PHASE2_INLINE_PAYLOAD__;
        TAG_EXPLAINERS = { ...DEFAULT_TAG_EXPLAINERS, ...(payload.tag_explanations || {}) };
        if (window.fillReportData) {
          window.fillReportData(payload);
        }
        attachTagHelps();
      } else {
        loadReportData();
        attachTagHelps();
      }
    });
  </script>
</body>
</html>
