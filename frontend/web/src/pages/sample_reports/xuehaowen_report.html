<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chessortag Style Report - Xue,Haowen</title>
  <link rel="stylesheet" href="/assets/reports_css/report.css" id="report-css" />
  <link rel="stylesheet" href="/assets/reports_css/report_viz.css" id="report-viz-css" />
  <style>
    .tag-help {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-left: 6px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #e4e9ff;
      color: #1f2a44;
      font-size: 11px;
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
    }
    .tag-help:hover {
      background: #d6ddff;
    }
    .tag-cell {
      position: relative;
    }
    .tag-help-tooltip {
      position: absolute;
      left: 22px;
      top: 50%;
      transform: translateY(-50%);
      background: #0f172a;
      color: #fff;
      padding: 6px 8px;
      border-radius: 6px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
      font-size: 12px;
      line-height: 1.3;
      min-width: 180px;
      max-width: 260px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.15s ease, visibility 0.15s ease;
      z-index: 5;
      pointer-events: none;
    }
    .tag-cell:hover .tag-help-tooltip {
      opacity: 1;
      visibility: visible;
    }
  </style>
  <script>
    // Fallback: if root-based assets are served with wrong MIME/404, retry relative to this file.
    (function() {
      const fallbackMap = {
        'report-css': '../assets/reports_css/report.css',
        'report-viz-css': '../assets/reports_css/report_viz.css',
      };
      Object.entries(fallbackMap).forEach(([id, href]) => {
        const linkEl = document.getElementById(id);
        if (!linkEl) return;
        linkEl.addEventListener('error', () => {
          linkEl.href = href;
        });
      });
    })();
  </script>
</head>
<body>
  <div class="report-root">
    <aside class="report-sidebar">
      <div class="sidebar-title">Chess Style Report</div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <a href="#section1-performance" class="sidebar-link parent-link">1. Performance Profile</a>
          <div class="nav-subsections">
            <a href="#perf-winrate" class="sidebar-sublink">1.1 Win rate</a>
            <a href="#perf-accuracy" class="sidebar-sublink">1.2 Accuracy</a>
            <a href="#perf-advantage" class="sidebar-sublink">1.3 Advantage conversion</a>
            <a href="#perf-defensive" class="sidebar-sublink">1.4 Defensive conversion</a>
            <a href="#perf-volatility" class="sidebar-sublink">1.5 Volatility/trajectory</a>
            <a href="#perf-engine" class="sidebar-sublink">1.6 Engine decision quality</a>
            <a href="#perf-tactical" class="sidebar-sublink">1.7 Tactical conversion</a>
            <a href="#perf-exchanges" class="sidebar-sublink">1.8 Knight/bishop exchanges</a>
            <a href="#perf-forced" class="sidebar-sublink">1.9 Forced moves</a>
            <a href="#perf-positions" class="sidebar-sublink">1.10 Winning/losing position handling</a>
          </div>
        </div>
        <div class="nav-section">
          <a href="#section2-style" class="sidebar-link parent-link">2. Style Parameters</a>
          <div class="nav-subsections">
            <a href="#style-maneuver" class="sidebar-sublink">2.1 Maneuver</a>
            <a href="#style-prophylaxis" class="sidebar-sublink">2.2 Prophylaxis</a>
            <a href="#style-semantic_control" class="sidebar-sublink">2.3 Semantic control</a>
            <a href="#style-control_over_dynamics" class="sidebar-sublink">2.4 Control over dynamics</a>
            <a href="#style-initiative" class="sidebar-sublink">2.5 Initiative</a>
            <a href="#style-tension" class="sidebar-sublink">2.6 Tension management</a>
            <a href="#style-structural" class="sidebar-sublink">2.7 Structural play</a>
            <a href="#style-sacrifice" class="sidebar-sublink">2.8 Sacrificial play</a>
            <a href="#style-exchanges_forced" class="sidebar-sublink">2.9 Style synthesis</a>
          </div>
        </div>
        <a href="#section3-overall" class="sidebar-link">3. Overall Synthesis</a>
        <div class="nav-subsections">
          <a href="#section-3-1-ability" class="sidebar-sublink">3.1 Ability evaluation</a>
          <a href="#section-3-2-rating" class="sidebar-sublink">3.2 FIDE rating estimation</a>
        </div>
        <div class="nav-section">
          <a href="#section4-openings" class="sidebar-link parent-link">4. Opening Repertoire</a>
          <div class="nav-subsections">
            <a href="#opening-white-table" class="sidebar-sublink">4.1 White openings table</a>
            <a href="#opening-black-table" class="sidebar-sublink">4.2 Black openings</a>
            <a href="#opening-main-repertoires" class="sidebar-sublink">4.3 Main repertoires</a>
            <a href="#opening-secondary" class="sidebar-sublink">4.4 Secondary weapons</a>
            <a href="#opening-depth" class="sidebar-sublink">4.5 Theoretical depth</a>
            <a href="#opening-style" class="sidebar-sublink">4.6 Connection to style</a>
            <a href="#opening-performance" class="sidebar-sublink">4.7 Underperforming vs shining</a>
            <a href="#opening-takeaways" class="sidebar-sublink">4.8 Practical takeaways</a>
          </div>
        </div>
        <div class="nav-section">
          <a href="#section5-training" class="sidebar-link parent-link">5. Training Recommendations</a>
          <div class="nav-subsections">
            <a href="#training-priorities" class="sidebar-sublink">5.1 Key priorities</a>
            <a href="#training-study" class="sidebar-sublink">5.2 Study methods</a>
            <a href="#training-habits" class="sidebar-sublink">5.3 Practical habits</a>
          </div>
        </div>
        <div class="nav-section">
          <a href="#section6-opponent" class="sidebar-link parent-link">6. Opponent Preparation</a>
          <div class="nav-subsections">
            <a href="#opponent-white" class="sidebar-sublink">6.1 Opening choices vs white</a>
            <a href="#opponent-black" class="sidebar-sublink">6.2 Opening choices vs black</a>
            <a href="#opponent-middlegame" class="sidebar-sublink">6.3 Middlegame strategies</a>
            <a href="#opponent-endgame" class="sidebar-sublink">6.4 Endgame strategies</a>
            <a href="#opponent-psychology" class="sidebar-sublink">6.5 Psychology / risk</a>
            <a href="#opponent-gameplan" class="sidebar-sublink">6.6 Summary game plan</a>
          </div>
        </div>
      </nav>
    </aside>

    <main class="report-main">
      <div class="main-inner">
        <!-- HEADER -->
        <section class="section-card report-header" id="top">
          <p class="eyebrow">Player Overview</p>
          <h1 class="report-title">Chessortag Style Report: Xue,Haowen</h1>
          <p class="report-subtitle">Comprehensive breakdown across performance, style tags, openings, and preparation.</p>
          <div class="gm-strip"></div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 1: PERFORMANCE PROFILE -->
        <!-- ============================================================ -->
        <section id="section1-performance" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">1. Performance Profile</h2>
            <div class="section-body markdown-body">

              <!-- 1.1 WIN RATE -->
              <div id="perf-winrate" class="subsection">
                <h3>1.1 Win Rate</h3>
                <h4>Win–Loss–Draw by Color</h4>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Color</th>
                        <th>Win %</th>
                        <th>Loss %</th>
                        <th>Draw %</th>
                        <th>Avg Opponent Elo</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>White</td>
                        <td id="data-white-win"></td>
                        <td id="data-white-loss"></td>
                        <td id="data-white-draw"></td>
                        <td id="data-white-elo"></td>
                      </tr>
                      <tr>
                        <td>Black</td>
                        <td id="data-black-win"></td>
                        <td id="data-black-loss"></td>
                        <td id="data-black-draw"></td>
                        <td id="data-black-elo"></td>
                      </tr>
                      <tr>
                        <td><strong>Total</strong></td>
                        <td id="data-total-win"></td>
                        <td id="data-total-loss"></td>
                        <td id="data-total-draw"></td>
                        <td id="data-total-elo"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-1-winrate-llm" class="llm-slot"></div>
              </div>

              <!-- 1.2 ACCURACY -->
              <div id="perf-accuracy" class="subsection">
                <h3>1.2 Accuracy: Player vs Phases and Structures</h3>
                <h4>Accuracy System (Player)</h4>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Phase / Structure</th>
                        <th>Moves</th>
                        <th>Avg Loss (cp)</th>
                        <th>Accuracy Score</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Overall</td>
                        <td id="data-acc-overall-moves"></td>
                        <td id="data-acc-overall-loss"></td>
                        <td id="data-acc-overall-score"></td>
                      </tr>
                      <tr>
                        <td>Opening</td>
                        <td id="data-acc-opening-moves"></td>
                        <td id="data-acc-opening-loss"></td>
                        <td id="data-acc-opening-score"></td>
                      </tr>
                      <tr>
                        <td>Middlegame</td>
                        <td id="data-acc-middlegame-moves"></td>
                        <td id="data-acc-middlegame-loss"></td>
                        <td id="data-acc-middlegame-score"></td>
                      </tr>
                      <tr>
                        <td>Endgame</td>
                        <td id="data-acc-endgame-moves"></td>
                        <td id="data-acc-endgame-loss"></td>
                        <td id="data-acc-endgame-score"></td>
                      </tr>
                      <tr>
                        <td>Queenful</td>
                        <td id="data-acc-queenful-moves"></td>
                        <td id="data-acc-queenful-loss"></td>
                        <td id="data-acc-queenful-score"></td>
                      </tr>
                      <tr>
                        <td>Queenless</td>
                        <td id="data-acc-queenless-moves"></td>
                        <td id="data-acc-queenless-loss"></td>
                        <td id="data-acc-queenless-score"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <h4>Comparison with Peer and GM Baseline</h4>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Phase</th>
                        <th>Player</th>
                        <th>Same-Age Peer</th>
                        <th>GM Baseline</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Overall</td>
                        <td id="data-cmp-overall-player"></td>
                        <td id="data-cmp-overall-peer"></td>
                        <td id="data-cmp-overall-gm"></td>
                      </tr>
                      <tr>
                        <td>Opening</td>
                        <td id="data-cmp-opening-player"></td>
                        <td id="data-cmp-opening-peer"></td>
                        <td id="data-cmp-opening-gm"></td>
                      </tr>
                      <tr>
                        <td>Middlegame</td>
                        <td id="data-cmp-middlegame-player"></td>
                        <td id="data-cmp-middlegame-peer"></td>
                        <td id="data-cmp-middlegame-gm"></td>
                      </tr>
                      <tr>
                        <td>Endgame</td>
                        <td id="data-cmp-endgame-player"></td>
                        <td id="data-cmp-endgame-peer"></td>
                        <td id="data-cmp-endgame-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-2-accuracy-llm" class="llm-slot"></div>
              </div>

              <!-- 1.3 ADVANTAGE CONVERSION -->
              <div id="perf-advantage" class="subsection">
                <h3>1.3 Advantage Conversion</h3>
                <div class="table-wrapper">
                  <table class="report-table metric-table">
                    <thead>
                      <tr>
                        <th>Advantage Threshold</th>
                        <th>White: W / D / L</th>
                        <th>Black: W / D / L</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Reached +1</td>
                        <td id="data-adv-white-1"></td>
                        <td id="data-adv-black-1"></td>
                      </tr>
                      <tr>
                        <td>Reached +3</td>
                        <td id="data-adv-white-3"></td>
                        <td id="data-adv-black-3"></td>
                      </tr>
                      <tr>
                        <td>Reached +5</td>
                        <td id="data-adv-white-5"></td>
                        <td id="data-adv-black-5"></td>
                      </tr>
                      <tr>
                        <td>Reached +7</td>
                        <td id="data-adv-white-7"></td>
                        <td id="data-adv-black-7"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-3-advantage-llm" class="llm-slot"></div>
              </div>

              <!-- 1.4 DEFENSIVE CONVERSION -->
              <div id="perf-defensive" class="subsection">
                <h3>1.4 Defensive Conversion</h3>
                <div class="table-wrapper">
                  <table class="report-table metric-table">
                    <thead>
                      <tr>
                        <th>Deficit Threshold</th>
                        <th>White: W / D / L</th>
                        <th>Black: W / D / L</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Reached -1</td>
                        <td id="data-def-white-1"></td>
                        <td id="data-def-black-1"></td>
                      </tr>
                      <tr>
                        <td>Reached -3</td>
                        <td id="data-def-white-3"></td>
                        <td id="data-def-black-3"></td>
                      </tr>
                      <tr>
                        <td>Reached -5</td>
                        <td id="data-def-white-5"></td>
                        <td id="data-def-black-5"></td>
                      </tr>
                      <tr>
                        <td>Reached -7</td>
                        <td id="data-def-white-7"></td>
                        <td id="data-def-black-7"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-4-defensive-llm" class="llm-slot"></div>
              </div>

              <!-- 1.5 VOLATILITY/TRAJECTORY -->
              <div id="perf-volatility" class="subsection">
                <h3>1.5 Volatility/Trajectory</h3>
                <div class="table-wrapper">
                  <table class="report-table metric-table">
                    <thead>
                      <tr>
                        <th>Volatility Type</th>
                        <th>White</th>
                        <th>Black</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Smooth crush (controlled opponent)</td>
                        <td id="data-vol-smooth-crush-white"></td>
                        <td id="data-vol-smooth-crush-black"></td>
                      </tr>
                      <tr>
                        <td>Smooth collapse (opponent controlled)</td>
                        <td id="data-vol-smooth-collapse-white"></td>
                        <td id="data-vol-smooth-collapse-black"></td>
                      </tr>
                      <tr>
                        <td>Small swings (~±1.0)</td>
                        <td id="data-vol-small-swings-white"></td>
                        <td id="data-vol-small-swings-black"></td>
                      </tr>
                      <tr>
                        <td>Medium swings (~±2.0)</td>
                        <td id="data-vol-medium-swings-white"></td>
                        <td id="data-vol-medium-swings-black"></td>
                      </tr>
                      <tr>
                        <td>Big swings (4+ swings of ±2.0)</td>
                        <td id="data-vol-big-swings-white"></td>
                        <td id="data-vol-big-swings-black"></td>
                      </tr>
                      <tr>
                        <td>High-precision draws (no swings &gt; ±0.8)</td>
                        <td id="data-vol-precision-draws-white"></td>
                        <td id="data-vol-precision-draws-black"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-5-volatility-llm" class="llm-slot"></div>
              </div>

              <!-- 1.6 ENGINE DECISION QUALITY -->
              <div id="perf-engine" class="subsection">
                <h3>1.6 Engine Decision Quality</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Metric</th>
                        <th>Player</th>
                        <th>Peer Avg</th>
                        <th>GM Baseline</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Top-1 move %</td>
                        <td id="data-eng-top1-player"></td>
                        <td id="data-eng-top1-peer"></td>
                        <td id="data-eng-top1-gm"></td>
                      </tr>
                      <tr>
                        <td>Top-3 move %</td>
                        <td id="data-eng-top3-player"></td>
                        <td id="data-eng-top3-peer"></td>
                        <td id="data-eng-top3-gm"></td>
                      </tr>
                      <tr>
                        <td>Blunder rate (&gt;100cp loss)</td>
                        <td id="data-eng-blunder-player"></td>
                        <td id="data-eng-blunder-peer"></td>
                        <td id="data-eng-blunder-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-6-engine-llm" class="llm-slot"></div>
              </div>

              <!-- 1.7 TACTICAL CONVERSION -->
              <div id="perf-tactical" class="subsection">
                <h3>1.7 Tactical Conversion</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Metric</th>
                        <th>Value</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Tactical opportunities found</td>
                        <td id="data-tac-found"></td>
                      </tr>
                      <tr>
                        <td>Tactical opportunities missed</td>
                        <td id="data-tac-missed"></td>
                      </tr>
                      <tr>
                        <td>Tactical conversion rate</td>
                        <td id="data-tac-rate"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-7-tactical-llm" class="llm-slot"></div>
              </div>

              <!-- 1.8 KNIGHT/BISHOP EXCHANGES -->
              <div id="perf-exchanges" class="subsection">
                <h3>1.8 Knight/Bishop Exchanges</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Accurate knight/bishop exchange</td>
                        <td id="data-exch-accurate-count"></td>
                        <td id="data-exch-accurate-ratio"></td>
                        <td id="data-exch-accurate-gm"></td>
                      </tr>
                      <tr>
                        <td>Inaccurate knight/bishop exchange</td>
                        <td id="data-exch-inaccurate-count"></td>
                        <td id="data-exch-inaccurate-ratio"></td>
                        <td id="data-exch-inaccurate-gm"></td>
                      </tr>
                      <tr>
                        <td>Bad knight/bishop exchange</td>
                        <td id="data-exch-bad-count"></td>
                        <td id="data-exch-bad-ratio"></td>
                        <td id="data-exch-bad-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Total exchange frequency</strong></td>
                        <td id="data-exch-total-count"></td>
                        <td id="data-exch-total-ratio"></td>
                        <td id="data-exch-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="section-1-8-exchanges-llm" class="llm-slot"></div>
              </div>

              <!-- 1.9 FORCED MOVES -->
              <div id="perf-forced" class="subsection">
                <h3>1.9 Forced Moves</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Forced moves</td>
                        <td id="data-forced-count"></td>
                        <td id="data-forced-ratio"></td>
                        <td id="data-forced-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Forced Moves Frequency vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-forced-moves-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">25%</span>
                    <span class="gm-scale-mark">50%</span>
                    <span class="gm-scale-mark">75%</span>
                    <span class="gm-scale-mark">100%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-1-9-forced-llm" class="llm-slot"></div>
              </div>

              <!-- 1.10 WINNING/LOSING POSITION HANDLING -->
              <div id="perf-positions" class="subsection">
                <h3>1.10 Winning/Losing Position Handling</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Winning position handling</td>
                        <td id="data-pos-winning-count"></td>
                        <td id="data-pos-winning-ratio"></td>
                        <td id="data-pos-winning-gm"></td>
                      </tr>
                      <tr>
                        <td>Losing position handling</td>
                        <td id="data-pos-losing-count"></td>
                        <td id="data-pos-losing-ratio"></td>
                        <td id="data-pos-losing-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Winning Position Handling vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-positions-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">25%</span>
                    <span class="gm-scale-mark">50%</span>
                    <span class="gm-scale-mark">75%</span>
                    <span class="gm-scale-mark">100%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-1-10-positions-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 2: STYLE PARAMETERS -->
        <!-- ============================================================ -->
        <section id="section2-style" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">2. Style Parameters</h2>
            <div class="section-body markdown-body">

              <!-- 2.1 MANEUVER -->
              <div id="style-maneuver" class="subsection">
                <h3>2.1 Maneuver</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Constructive maneuver</td>
                        <td id="data-style-maneuver-constructive-count"></td>
                        <td id="data-style-maneuver-constructive-ratio"></td>
                        <td id="data-style-maneuver-constructive-gm"></td>
                      </tr>
                      <tr>
                        <td>Constructive maneuver (prepare)</td>
                        <td id="data-style-maneuver-prepare-count"></td>
                        <td id="data-style-maneuver-prepare-ratio"></td>
                        <td id="data-style-maneuver-prepare-gm"></td>
                      </tr>
                      <tr>
                        <td>Neutral maneuver</td>
                        <td id="data-style-maneuver-neutral-count"></td>
                        <td id="data-style-maneuver-neutral-ratio"></td>
                        <td id="data-style-maneuver-neutral-gm"></td>
                      </tr>
                      <tr>
                        <td>Misplaced maneuver</td>
                        <td id="data-style-maneuver-misplaced-count"></td>
                        <td id="data-style-maneuver-misplaced-ratio"></td>
                        <td id="data-style-maneuver-misplaced-gm"></td>
                      </tr>
                      <tr>
                        <td>Opening maneuver</td>
                        <td id="data-style-maneuver-opening-count"></td>
                        <td id="data-style-maneuver-opening-ratio"></td>
                        <td id="data-style-maneuver-opening-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall maneuver ratio</strong></td>
                        <td id="data-style-maneuver-total-count"></td>
                        <td id="data-style-maneuver-total-ratio"></td>
                        <td id="data-style-maneuver-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Overall Maneuver Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-maneuver-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">40%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-1-maneuver-llm" class="llm-slot"></div>
              </div>

              <!-- 2.2 PROPHYLAXIS -->
              <div id="style-prophylaxis" class="subsection">
                <h3>2.2 Prophylaxis</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Direct prophylactic</td>
                        <td id="data-style-prophylaxis-direct-count"></td>
                        <td id="data-style-prophylaxis-direct-ratio"></td>
                        <td id="data-style-prophylaxis-direct-gm"></td>
                      </tr>
                      <tr>
                        <td>Latent prophylactic</td>
                        <td id="data-style-prophylaxis-latent-count"></td>
                        <td id="data-style-prophylaxis-latent-ratio"></td>
                        <td id="data-style-prophylaxis-latent-gm"></td>
                      </tr>
                      <tr>
                        <td>Meaningless prophylactic</td>
                        <td id="data-style-prophylaxis-meaningless-count"></td>
                        <td id="data-style-prophylaxis-meaningless-ratio"></td>
                        <td id="data-style-prophylaxis-meaningless-gm"></td>
                      </tr>
                      <tr>
                        <td>Failed prophylactic</td>
                        <td id="data-style-prophylaxis-failed-count"></td>
                        <td id="data-style-prophylaxis-failed-ratio"></td>
                        <td id="data-style-prophylaxis-failed-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall prophylaxis ratio</strong></td>
                        <td id="data-style-prophylaxis-total-count"></td>
                        <td id="data-style-prophylaxis-total-ratio"></td>
                        <td id="data-style-prophylaxis-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Overall Prophylaxis Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-prophylaxis-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">40%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-2-prophylaxis-llm" class="llm-slot"></div>
              </div>

              <!-- 2.3 SEMANTIC CONTROL -->
              <div id="style-semantic_control" class="subsection">
                <h3>2.3 Semantic Control</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Control: simplify</td>
                        <td id="data-style-control-simplify-count"></td>
                        <td id="data-style-control-simplify-ratio"></td>
                        <td id="data-style-control-simplify-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: plan kill</td>
                        <td id="data-style-control-plankill-count"></td>
                        <td id="data-style-control-plankill-ratio"></td>
                        <td id="data-style-control-plankill-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: freeze/bind</td>
                        <td id="data-style-control-freeze-count"></td>
                        <td id="data-style-control-freeze-ratio"></td>
                        <td id="data-style-control-freeze-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: blockade passed pawn</td>
                        <td id="data-style-control-blockade-count"></td>
                        <td id="data-style-control-blockade-ratio"></td>
                        <td id="data-style-control-blockade-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: file seal</td>
                        <td id="data-style-control-fileseal-count"></td>
                        <td id="data-style-control-fileseal-ratio"></td>
                        <td id="data-style-control-fileseal-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: king safety shell</td>
                        <td id="data-style-control-kingsafety-count"></td>
                        <td id="data-style-control-kingsafety-ratio"></td>
                        <td id="data-style-control-kingsafety-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: space clamp</td>
                        <td id="data-style-control-spaceclamp-count"></td>
                        <td id="data-style-control-spaceclamp-ratio"></td>
                        <td id="data-style-control-spaceclamp-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: regroup/consolidate</td>
                        <td id="data-style-control-regroup-count"></td>
                        <td id="data-style-control-regroup-ratio"></td>
                        <td id="data-style-control-regroup-gm"></td>
                      </tr>
                      <tr>
                        <td>Control: slowdown</td>
                        <td id="data-style-control-slowdown-count"></td>
                        <td id="data-style-control-slowdown-ratio"></td>
                        <td id="data-style-control-slowdown-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall semantic control ratio</strong></td>
                        <td id="data-style-control-total-count"></td>
                        <td id="data-style-control-total-ratio"></td>
                        <td id="data-style-control-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Semantic Control Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-semantic-control-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">15%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">45%</span>
                    <span class="gm-scale-mark">60%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-3-semantic-control-llm" class="llm-slot"></div>
              </div>

              <!-- 2.4 CONTROL OVER DYNAMICS -->
              <div id="style-control_over_dynamics" class="subsection">
                <h3>2.4 Control Over Dynamics</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Control over dynamics (overall)</td>
                        <td id="data-style-cod-overall-count"></td>
                        <td id="data-style-cod-overall-ratio"></td>
                        <td id="data-style-cod-overall-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: file seal</td>
                        <td id="data-style-cod-fileseal-count"></td>
                        <td id="data-style-cod-fileseal-ratio"></td>
                        <td id="data-style-cod-fileseal-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: freeze/bind</td>
                        <td id="data-style-cod-freeze-count"></td>
                        <td id="data-style-cod-freeze-ratio"></td>
                        <td id="data-style-cod-freeze-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: king safety</td>
                        <td id="data-style-cod-kingsafety-count"></td>
                        <td id="data-style-cod-kingsafety-ratio"></td>
                        <td id="data-style-cod-kingsafety-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: regroup/consolidate</td>
                        <td id="data-style-cod-regroup-count"></td>
                        <td id="data-style-cod-regroup-ratio"></td>
                        <td id="data-style-cod-regroup-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: plan kill</td>
                        <td id="data-style-cod-plankill-count"></td>
                        <td id="data-style-cod-plankill-ratio"></td>
                        <td id="data-style-cod-plankill-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: blockade passed pawn</td>
                        <td id="data-style-cod-blockade-count"></td>
                        <td id="data-style-cod-blockade-ratio"></td>
                        <td id="data-style-cod-blockade-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: simplify</td>
                        <td id="data-style-cod-simplify-count"></td>
                        <td id="data-style-cod-simplify-ratio"></td>
                        <td id="data-style-cod-simplify-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: space clamp</td>
                        <td id="data-style-cod-spaceclamp-count"></td>
                        <td id="data-style-cod-spaceclamp-ratio"></td>
                        <td id="data-style-cod-spaceclamp-gm"></td>
                      </tr>
                      <tr>
                        <td>CoD: slowdown</td>
                        <td id="data-style-cod-slowdown-count"></td>
                        <td id="data-style-cod-slowdown-ratio"></td>
                        <td id="data-style-cod-slowdown-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Control Over Dynamics vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-cod-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">15%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">45%</span>
                    <span class="gm-scale-mark">60%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-4-cod-llm" class="llm-slot"></div>
              </div>

              <!-- 2.5 INITIATIVE -->
              <div id="style-initiative" class="subsection">
                <h3>2.5 Initiative</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Initiative attempt</td>
                        <td id="data-style-initiative-attempt-count"></td>
                        <td id="data-style-initiative-attempt-ratio"></td>
                        <td id="data-style-initiative-attempt-gm"></td>
                      </tr>
                      <tr>
                        <td>Deferred initiative</td>
                        <td id="data-style-initiative-deferred-count"></td>
                        <td id="data-style-initiative-deferred-ratio"></td>
                        <td id="data-style-initiative-deferred-gm"></td>
                      </tr>
                      <tr>
                        <td>Premature attack</td>
                        <td id="data-style-initiative-premature-count"></td>
                        <td id="data-style-initiative-premature-ratio"></td>
                        <td id="data-style-initiative-premature-gm"></td>
                      </tr>
                      <tr>
                        <td>C-file pressure</td>
                        <td id="data-style-initiative-cfile-count"></td>
                        <td id="data-style-initiative-cfile-ratio"></td>
                        <td id="data-style-initiative-cfile-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Initiative Attempt Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-initiative-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">30%</span>
                    <span class="gm-scale-mark">40%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-5-initiative-llm" class="llm-slot"></div>
              </div>

              <!-- 2.6 TENSION MANAGEMENT -->
              <div id="style-tension" class="subsection">
                <h3>2.6 Tension Management</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Tension creation</td>
                        <td id="data-style-tension-creation-count"></td>
                        <td id="data-style-tension-creation-ratio"></td>
                        <td id="data-style-tension-creation-gm"></td>
                      </tr>
                      <tr>
                        <td>Neutral tension creation</td>
                        <td id="data-style-tension-neutral-count"></td>
                        <td id="data-style-tension-neutral-ratio"></td>
                        <td id="data-style-tension-neutral-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Tension Creation Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-tension-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">5%</span>
                    <span class="gm-scale-mark">10%</span>
                    <span class="gm-scale-mark">15%</span>
                    <span class="gm-scale-mark">20%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-6-tension-llm" class="llm-slot"></div>
              </div>

              <!-- 2.7 STRUCTURAL PLAY -->
              <div id="style-structural" class="subsection">
                <h3>2.7 Structural Play</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Structural integrity</td>
                        <td id="data-style-structural-integrity-count"></td>
                        <td id="data-style-structural-integrity-ratio"></td>
                        <td id="data-style-structural-integrity-gm"></td>
                      </tr>
                      <tr>
                        <td>Structural compromise (dynamic)</td>
                        <td id="data-style-structural-dynamic-count"></td>
                        <td id="data-style-structural-dynamic-ratio"></td>
                        <td id="data-style-structural-dynamic-gm"></td>
                      </tr>
                      <tr>
                        <td>Structural compromise (static)</td>
                        <td id="data-style-structural-static-count"></td>
                        <td id="data-style-structural-static-ratio"></td>
                        <td id="data-style-structural-static-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Structural Integrity Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-structural-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">20%</span>
                    <span class="gm-scale-mark">40%</span>
                    <span class="gm-scale-mark">60%</span>
                    <span class="gm-scale-mark">80%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-7-structural-llm" class="llm-slot"></div>
              </div>

              <!-- 2.8 SACRIFICIAL PLAY -->
              <div id="style-sacrifice" class="subsection">
                <h3>2.8 Sacrificial Play</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Tag Name</th>
                        <th>Player Count</th>
                        <th>Player Ratio</th>
                        <th>Top GM Ratio</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Tactical sacrifice</td>
                        <td id="data-style-sacrifice-tactical-count"></td>
                        <td id="data-style-sacrifice-tactical-ratio"></td>
                        <td id="data-style-sacrifice-tactical-gm"></td>
                      </tr>
                      <tr>
                        <td>Positional sacrifice</td>
                        <td id="data-style-sacrifice-positional-count"></td>
                        <td id="data-style-sacrifice-positional-ratio"></td>
                        <td id="data-style-sacrifice-positional-gm"></td>
                      </tr>
                      <tr>
                        <td>Inaccurate tactical sacrifice</td>
                        <td id="data-style-sacrifice-inaccurate-count"></td>
                        <td id="data-style-sacrifice-inaccurate-ratio"></td>
                        <td id="data-style-sacrifice-inaccurate-gm"></td>
                      </tr>
                      <tr>
                        <td>Speculative sacrifice</td>
                        <td id="data-style-sacrifice-speculative-count"></td>
                        <td id="data-style-sacrifice-speculative-ratio"></td>
                        <td id="data-style-sacrifice-speculative-gm"></td>
                      </tr>
                      <tr>
                        <td>Desperate sacrifice</td>
                        <td id="data-style-sacrifice-desperate-count"></td>
                        <td id="data-style-sacrifice-desperate-ratio"></td>
                        <td id="data-style-sacrifice-desperate-gm"></td>
                      </tr>
                      <tr>
                        <td>Tactical combination sacrifice</td>
                        <td id="data-style-sacrifice-combination-count"></td>
                        <td id="data-style-sacrifice-combination-ratio"></td>
                        <td id="data-style-sacrifice-combination-gm"></td>
                      </tr>
                      <tr>
                        <td>Tactical initiative sacrifice</td>
                        <td id="data-style-sacrifice-init-count"></td>
                        <td id="data-style-sacrifice-init-ratio"></td>
                        <td id="data-style-sacrifice-init-gm"></td>
                      </tr>
                      <tr>
                        <td>Positional structure sacrifice</td>
                        <td id="data-style-sacrifice-structure-count"></td>
                        <td id="data-style-sacrifice-structure-ratio"></td>
                        <td id="data-style-sacrifice-structure-gm"></td>
                      </tr>
                      <tr>
                        <td>Positional space sacrifice</td>
                        <td id="data-style-sacrifice-space-count"></td>
                        <td id="data-style-sacrifice-space-ratio"></td>
                        <td id="data-style-sacrifice-space-gm"></td>
                      </tr>
                      <tr>
                        <td><strong>Overall sacrifice ratio</strong></td>
                        <td id="data-style-sacrifice-total-count"></td>
                        <td id="data-style-sacrifice-total-ratio"></td>
                        <td id="data-style-sacrifice-total-gm"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- GM Comparison Axis Visualization -->
                <div class="gm-axis-viz">
                  <div class="gm-axis-title">Overall Sacrifice Ratio vs Top GMs</div>
                  <div class="gm-axis-container">
                    <div class="gm-axis-line"></div>
                    <div class="gm-markers-layer" id="viz-sacrifice-axis"></div>
                  </div>
                  <div class="gm-axis-scale">
                    <span class="gm-scale-mark">0%</span>
                    <span class="gm-scale-mark">3%</span>
                    <span class="gm-scale-mark">6%</span>
                    <span class="gm-scale-mark">9%</span>
                    <span class="gm-scale-mark">12%</span>
                  </div>
                  <div class="gm-axis-legend">
                    <div class="legend-item">
                      <div class="legend-dot"></div>
                      <span>Top GMs</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot player"></div>
                      <span>You</span>
                    </div>
                  </div>
                </div>

                <div id="section-2-8-sacrifice-llm" class="llm-slot"></div>
              </div>

              <!-- 2.9 STYLE SYNTHESIS -->
              <div id="style-exchanges_forced" class="subsection">
                <h3>2.9 Style Synthesis</h3>
                <div id="section-2-9-synthesis-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 3: OVERALL SYNTHESIS -->
        <!-- ============================================================ -->
        <section id="section3-overall" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">3. Overall Synthesis</h2>
            <div class="section-body markdown-body">
              <div id="section-3-1-ability" class="subsection">
                <h3>3.1 Ability Evaluation</h3>
                <div id="section-3-1-ability-llm" class="llm-slot"></div>
              </div>
              <div id="section-3-2-rating" class="subsection">
                <h3>3.2 FIDE Rating Estimation</h3>
                <div id="section-3-2-rating-llm" class="llm-slot"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 4: OPENING REPERTOIRE -->
        <!-- ============================================================ -->
        <section id="section4-openings" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">4. Opening Repertoire</h2>
            <div class="section-body markdown-body">

              <!-- 4.1 WHITE OPENINGS TABLE -->
              <div id="opening-white-table" class="subsection">
                <h3>4.1 White Openings</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Opening Line</th>
                        <th>Variation Name</th>
                        <th>Games</th>
                        <th>Win %</th>
                        <th>Draw %</th>
                        <th>Loss %</th>
                        <th>Avg Accuracy</th>
                      </tr>
                    </thead>
                    <tbody id="data-opening-white-tbody">
                      <!-- Rows will be dynamically inserted -->
                    </tbody>
                  </table>
                </div>
                <div id="section-4-1-white-openings-llm" class="llm-slot"></div>
              </div>

              <!-- 4.2 BLACK OPENINGS TABLE -->
              <div id="opening-black-table" class="subsection">
                <h3>4.2 Black Openings</h3>
                <div class="table-wrapper">
                  <table class="report-table">
                    <thead>
                      <tr>
                        <th>Opening Line</th>
                        <th>Variation Name</th>
                        <th>Games</th>
                        <th>Win %</th>
                        <th>Draw %</th>
                        <th>Loss %</th>
                        <th>Avg Accuracy</th>
                      </tr>
                    </thead>
                    <tbody id="data-opening-black-tbody">
                      <!-- Rows will be dynamically inserted -->
                    </tbody>
                  </table>
                </div>
                <div id="section-4-2-black-openings-llm" class="llm-slot"></div>
              </div>

              <!-- 4.3 MAIN REPERTOIRES -->
              <div id="opening-main-repertoires" class="subsection">
                <h3>4.3 Main Repertoires</h3>
                <div id="section-4-3-main-repertoires-llm" class="llm-slot"></div>
              </div>

              <!-- 4.4 SECONDARY WEAPONS -->
              <div id="opening-secondary" class="subsection">
                <h3>4.4 Secondary Weapons</h3>
                <div id="section-4-4-secondary-llm" class="llm-slot"></div>
              </div>

              <!-- 4.5 THEORETICAL DEPTH -->
              <div id="opening-depth" class="subsection">
                <h3>4.5 Theoretical Depth</h3>
                <div id="section-4-5-depth-llm" class="llm-slot"></div>
              </div>

              <!-- 4.6 CONNECTION TO STYLE -->
              <div id="opening-style" class="subsection">
                <h3>4.6 Connection to Style</h3>
                <div id="section-4-6-style-llm" class="llm-slot"></div>
              </div>

              <!-- 4.7 UNDERPERFORMING VS SHINING -->
              <div id="opening-performance" class="subsection">
                <h3>4.7 Underperforming vs Shining Openings</h3>
                <div id="section-4-7-performance-llm" class="llm-slot"></div>
              </div>

              <!-- 4.8 PRACTICAL TAKEAWAYS -->
              <div id="opening-takeaways" class="subsection">
                <h3>4.8 Practical Takeaways</h3>
                <div id="section-4-8-takeaways-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 5: TRAINING RECOMMENDATIONS -->
        <!-- ============================================================ -->
        <section id="section5-training" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">5. Training Recommendations</h2>
            <div class="section-body markdown-body">

              <!-- 5.1 KEY PRIORITIES -->
              <div id="training-priorities" class="subsection">
                <h3>5.1 Key Priorities</h3>
                <div id="section-5-1-priorities-llm" class="llm-slot"></div>
              </div>

              <!-- 5.2 STUDY METHODS -->
              <div id="training-study" class="subsection">
                <h3>5.2 Study Methods</h3>
                <div id="section-5-2-study-llm" class="llm-slot"></div>
              </div>

              <!-- 5.3 PRACTICAL HABITS -->
              <div id="training-habits" class="subsection">
                <h3>5.3 Practical Habits</h3>
                <div id="section-5-3-habits-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

        <!-- ============================================================ -->
        <!-- SECTION 6: OPPONENT PREPARATION -->
        <!-- ============================================================ -->
        <section id="section6-opponent" class="report-section">
          <div class="section-card">
            <h2 class="section-heading">6. Opponent Preparation</h2>
            <div class="section-body markdown-body">

              <!-- 6.1 OPENING CHOICES VS WHITE -->
              <div id="opponent-white" class="subsection">
                <h3>6.1 Opening Choices When Facing This Player as White</h3>
                <div id="section-6-1-vs-white-llm" class="llm-slot"></div>
              </div>

              <!-- 6.2 OPENING CHOICES VS BLACK -->
              <div id="opponent-black" class="subsection">
                <h3>6.2 Opening Choices When Facing This Player as Black</h3>
                <div id="section-6-2-vs-black-llm" class="llm-slot"></div>
              </div>

              <!-- 6.3 MIDDLEGAME STRATEGIES -->
              <div id="opponent-middlegame" class="subsection">
                <h3>6.3 Middlegame Strategies</h3>
                <div id="section-6-3-middlegame-llm" class="llm-slot"></div>
              </div>

              <!-- 6.4 ENDGAME STRATEGIES -->
              <div id="opponent-endgame" class="subsection">
                <h3>6.4 Endgame Strategies</h3>
                <div id="section-6-4-endgame-llm" class="llm-slot"></div>
              </div>

              <!-- 6.5 PSYCHOLOGY / RISK -->
              <div id="opponent-psychology" class="subsection">
                <h3>6.5 Psychology and Risk Profile</h3>
                <div id="section-6-5-psychology-llm" class="llm-slot"></div>
              </div>

              <!-- 6.6 SUMMARY GAME PLAN -->
              <div id="opponent-gameplan" class="subsection">
                <h3>6.6 Summary Game Plan</h3>
                <div id="section-6-6-gameplan-llm" class="llm-slot"></div>
              </div>

            </div>
          </div>
        </section>

      </div>
    </main>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let vizLib;
      // Collapsible navigation
      const parentLinks = document.querySelectorAll(".parent-link");
      parentLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          const navSection = link.parentElement;
          const subsections = navSection.querySelector(".nav-subsections");
          if (subsections) {
            e.preventDefault();
            navSection.classList.toggle("expanded");
          }
        });
      });

      // Expand first section by default
      const firstNavSection = document.querySelector(".nav-section");
      if (firstNavSection) {
        firstNavSection.classList.add("expanded");
      }

      const sections = Array.from(document.querySelectorAll(".report-section"));
      const links = Array.from(document.querySelectorAll(".sidebar-link, .sidebar-sublink"));
      const linkMap = new Map(
        links.map((link) => [link.getAttribute("href").replace("#", ""), link])
      );

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const id = entry.target.id;
              links.forEach((l) => l.classList.remove("active"));
              const active = linkMap.get(id);
              if (active) active.classList.add("active");
            }
          });
        },
        { rootMargin: "-40% 0px -45% 0px", threshold: 0.2 }
      );

      sections.forEach((sec) => observer.observe(sec));
      if (links.length > 0) {
        links[0].classList.add("active");
      }

      // Tag explainers (backend can override; fallback is built-in)
      const DEFAULT_TAG_EXPLAINERS = {
        "White": "Performance when you played the white pieces.",
        "Black": "Performance when you played the black pieces.",
        "Total": "Overall results combining both colors.",
        "Overall": "All moves aggregated across games.",
        "Opening": "Moves made in the opening phase.",
        "Middlegame": "Moves made once development is mostly complete.",
        "Endgame": "Moves in simplified positions with few pieces.",
        "Queenful": "Positions where both sides still have queens.",
        "Queenless": "Positions after queens are traded off.",
        "Reached +1": "Games where you achieved at least a +1.0 engine edge.",
        "Reached +3": "Games where you achieved at least a +3.0 engine edge.",
        "Reached +5": "Games where you achieved at least a +5.0 engine edge.",
        "Reached +7": "Games where you achieved at least a +7.0 engine edge.",
        "Reached -1": "Games where you fell to -1.0 or worse.",
        "Reached -3": "Games where you fell to -3.0 or worse.",
        "Reached -5": "Games where you fell to -5.0 or worse.",
        "Reached -7": "Games where you fell to -7.0 or worse.",
        "Smooth crush (controlled opponent)": "You kept control from start to finish and converted cleanly.",
        "Smooth collapse (opponent controlled)": "Opponent kept control and you lost without big swings.",
        "Small swings (~±1.0)": "Advantage shifted modestly within about one pawn.",
        "Medium swings (~±2.0)": "Advantage oscillated around two pawns.",
        "Big swings (4+ swings of ±2.0)": "Multiple large lead changes of two-plus pawns.",
        "High-precision draws (no swings > ±0.8)": "Draws with almost no evaluation swings.",
        "Top-1 move %": "How often you played the engine’s first choice.",
        "Top-3 move %": "How often you played one of the engine’s top three choices.",
        "Blunder rate (>100cp loss)": "Moves that dropped over 100 centipawns.",
        "Constructive maneuver": "Reroute that improves piece harmony and future activity.",
        "Constructive maneuver (prepare)": "Quiet reroute that sets up a later plan or breakthrough.",
        "Neutral maneuver": "Repositioning with limited impact—neither improves nor harms much.",
        "Misplaced maneuver": "Reroute that wastes time or worsens coordination.",
        "Opening maneuver": "Early-game reroute to better squares after initial development.",
        "Overall maneuver ratio": "Share of moves classified as maneuvers.",
        "Direct prophylactic": "Move that directly stops the opponent’s immediate threat or plan.",
        "Latent prophylactic": "Restricts future ideas before they become concrete threats.",
        "Meaningless prophylactic": "Prophylaxis that addresses no real threat.",
        "Failed prophylactic": "Attempted prevention that still allows the threat.",
        "Overall prophylaxis ratio": "Share of moves aimed at prevention.",
        "Control: simplify": "Trades or simplifications to reduce complexity.",
        "Control: plan kill": "Stops the opponent’s main strategic plan.",
        "Control: freeze/bind": "Limits opponent mobility and counterplay.",
        "Control: blockade passed pawn": "Holds back or fixes a passed pawn.",
        "Control: file seal": "Secures or contests an open/semi-open file.",
        "Control: king safety shell": "Strengthens the king’s pawn and square cover.",
        "Control: space clamp": "Claims key squares to restrict counterplay.",
        "Control: regroup/consolidate": "Re-coordinates pieces after operations.",
        "Control: slowdown": "Tempers the position to avoid sharp forcing lines.",
        "Overall semantic control ratio": "Share of moves aimed at positional control.",
        "Control over dynamics (overall)": "Moves chosen to shape the game’s tactical temperature.",
        "CoD: file seal": "Dynamic control by contesting files before tactics explode.",
        "CoD: freeze/bind": "Dynamic restriction to keep the opponent cramped.",
        "CoD: king safety": "Dynamic tweaks that keep the king safe during tactics.",
        "CoD: regroup/consolidate": "Dynamic re-coordination to stabilize.",
        "CoD: plan kill": "Dynamic strike that halts opponent initiative.",
        "CoD: blockade passed pawn": "Dynamic blockading of a passed pawn in sharp play.",
        "CoD: simplify": "Trades to cool down complications.",
        "CoD: space clamp": "Dynamic space grab to limit enemy breaks.",
        "CoD: slowdown": "Tempo moves to cool the position.",
        "Initiative attempt": "Actively driving threats to keep the move-by-move pressure.",
        "Deferred initiative": "Postpones attack to finish prep or development.",
        "Premature attack": "Attack launched before position is ready.",
        "C-file pressure": "Initiative built around control of the c-file.",
        "Tension creation": "Creates or sustains pawn/piece tension.",
        "Neutral tension creation": "Tension that neither helps nor harms notably.",
        "Structural integrity": "Keeps pawn structure healthy and flexible.",
        "Structural compromise (dynamic)": "Accepts structural weakness for activity.",
        "Structural compromise (static)": "Weak structure without clear compensation.",
        "Tactical sacrifice": "Material given for concrete tactical gain.",
        "Positional sacrifice": "Material invested for long-term positional edge.",
        "Inaccurate tactical sacrifice": "Dubious sac without enough payoff.",
        "Speculative sacrifice": "High-risk sac with unclear compensation.",
        "Desperate sacrifice": "Last-ditch sac from a bad position.",
        "Tactical combination sacrifice": "Sac as part of a forcing combination.",
        "Tactical initiative sacrifice": "Sac to keep initiative flowing.",
        "Positional structure sacrifice": "Material for structural damage to opponent.",
        "Positional space sacrifice": "Material for space or central control.",
        "Overall sacrifice ratio": "Share of moves involving sacrifices.",
        "Accurate knight/bishop exchange": "Trade that improves your minor-piece balance.",
        "Inaccurate knight/bishop exchange": "Trade that hands the opponent better minors.",
        "Bad knight/bishop exchange": "Clearly harmful minor-piece trade.",
        "Total exchange frequency": "All tagged minor-piece exchanges.",
        "Forced moves": "Moves compelled by tactics to avoid big loss.",
        "Winning position handling": "Technique in converting clearly winning spots.",
        "Losing position handling": "Resilience when position is bad.",
        "Tactical opportunities found": "Tactics spotted and exploited.",
        "Tactical opportunities missed": "Tactics available but not taken.",
        "Tactical conversion rate": "Share of tactics you convert.",
      };
      let TAG_EXPLAINERS = { ...DEFAULT_TAG_EXPLAINERS };

      const attachTagHelps = () => {
        document.querySelectorAll('table.report-table tbody tr td:first-child').forEach((cell) => {
          const label = cell.textContent.trim();
          if (!TAG_EXPLAINERS || !TAG_EXPLAINERS[label]) return;
          // Avoid duplicating icons
          if (cell.querySelector('.tag-help')) return;
          cell.classList.add('tag-cell');
          const help = document.createElement('span');
          help.className = 'tag-help';
          help.textContent = '?';
          help.title = TAG_EXPLAINERS[label];
          help.setAttribute('aria-label', TAG_EXPLAINERS[label]);
          cell.appendChild(help);
          const tip = document.createElement('div');
          tip.className = 'tag-help-tooltip';
          tip.textContent = TAG_EXPLAINERS[label];
          cell.appendChild(tip);
        });
      };

      // PHASE 2: Data injection function
      window.fillReportData = function(dataJson) {
        const setText = (id, value) => {
          const el = document.getElementById(id);
          if (el) el.textContent = value;
        };
        const fmtPct = (v) => (v === null || v === undefined || Number.isNaN(v) ? '—' : `${v}%`);

        const formatWDL = (record) => {
          if (!record) return '—';
          const w = record.win ?? record.w ?? record.W;
          const d = record.draw ?? record.d ?? record.D;
          const l = record.loss ?? record.l ?? record.L;
          if ([w, d, l].some(v => v === undefined || v === null)) return '—';
          const fmt = (v) => typeof v === 'number' ? `${v}%` : v;
          return `${fmt(w)} / ${fmt(d)} / ${fmt(l)}`;
        };

        const formatCountRatio = (record) => {
          if (!record) return '—';
          const games = record.games ?? record.count ?? record.c;
          const ratio = record.ratio ?? record.pct ?? record.perc;
          if (games === undefined && ratio === undefined) return '—';
          if (games !== undefined && ratio !== undefined) {
            const r = typeof ratio === 'number' ? `${ratio}%` : ratio;
            return `${games} (${r})`;
          }
          if (games !== undefined) return `${games}`;
          return typeof ratio === 'number' ? `${ratio}%` : `${ratio}`;
        };

        // Apply player id to title/header when available
        if (dataJson.player_id) {
          const playerName = dataJson.player_display_name || dataJson.player_id || 'player';
          const titleText = `Chessortag Style Report - ${playerName}`;
          document.title = titleText;
          const h1 = document.querySelector('.report-title');
          if (h1) h1.textContent = `Chessortag Style Report: ${playerName}`;
        }

        // ========== SECTION 1: PERFORMANCE PROFILE ==========
        if (dataJson.fixed_data) {
          const d = dataJson.fixed_data;

          // 1.1 Win rate
          if (d.winrate) {
            document.getElementById('data-white-win').textContent = d.winrate.white.win + '%';
            document.getElementById('data-white-loss').textContent = d.winrate.white.loss + '%';
            document.getElementById('data-white-draw').textContent = d.winrate.white.draw + '%';
            document.getElementById('data-white-elo').textContent = d.winrate.white.elo;

            document.getElementById('data-black-win').textContent = d.winrate.black.win + '%';
            document.getElementById('data-black-loss').textContent = d.winrate.black.loss + '%';
            document.getElementById('data-black-draw').textContent = d.winrate.black.draw + '%';
            document.getElementById('data-black-elo').textContent = d.winrate.black.elo;

            document.getElementById('data-total-win').textContent = d.winrate.total.win + '%';
            document.getElementById('data-total-loss').textContent = d.winrate.total.loss + '%';
            document.getElementById('data-total-draw').textContent = d.winrate.total.draw + '%';
            document.getElementById('data-total-elo').textContent = d.winrate.total.elo;
          }

          // 1.2 Accuracy
          if (d.accuracy) {
            ['overall', 'opening', 'middlegame', 'endgame', 'queenful', 'queenless'].forEach(phase => {
              const prefix = 'data-acc-' + phase;
              if (d.accuracy[phase]) {
                document.getElementById(prefix + '-moves').textContent = d.accuracy[phase].moves;
                document.getElementById(prefix + '-loss').textContent = d.accuracy[phase].avg_loss;
                document.getElementById(prefix + '-score').textContent = d.accuracy[phase].score;
              }
            });
          }

          if (d.accuracy_comparison) {
            ['overall', 'opening', 'middlegame', 'endgame'].forEach(phase => {
              const prefix = 'data-cmp-' + phase;
              if (d.accuracy_comparison[phase]) {
                document.getElementById(prefix + '-player').textContent = d.accuracy_comparison[phase].player;
                document.getElementById(prefix + '-peer').textContent = d.accuracy_comparison[phase].peer;
                document.getElementById(prefix + '-gm').textContent = d.accuracy_comparison[phase].gm;
              }
            });
          }

          // 1.3 Advantage conversion (threshold-based W/D/L)
          if (d.advantage) {
            const thresholds = [
              { key: '+1', whiteId: 'data-adv-white-1', blackId: 'data-adv-black-1' },
              { key: '+3', whiteId: 'data-adv-white-3', blackId: 'data-adv-black-3' },
              { key: '+5', whiteId: 'data-adv-white-5', blackId: 'data-adv-black-5' },
              { key: '+7', whiteId: 'data-adv-white-7', blackId: 'data-adv-black-7' },
            ];
            thresholds.forEach(({ key, whiteId, blackId }) => {
              const rec = d.advantage[key] || (d.advantage.thresholds && d.advantage.thresholds[key]);
              if (rec) {
                setText(whiteId, formatWDL(rec.white));
                setText(blackId, formatWDL(rec.black));
              }
            });
          }

          // 1.4 Defensive conversion (threshold-based W/D/L)
          if (d.defensive) {
            const thresholds = [
              { key: '-1', whiteId: 'data-def-white-1', blackId: 'data-def-black-1' },
              { key: '-3', whiteId: 'data-def-white-3', blackId: 'data-def-black-3' },
              { key: '-5', whiteId: 'data-def-white-5', blackId: 'data-def-black-5' },
              { key: '-7', whiteId: 'data-def-white-7', blackId: 'data-def-black-7' },
            ];
            thresholds.forEach(({ key, whiteId, blackId }) => {
              const rec = d.defensive[key] || (d.defensive.thresholds && d.defensive.thresholds[key]);
              if (rec) {
                setText(whiteId, formatWDL(rec.white));
                setText(blackId, formatWDL(rec.black));
              }
            });
          }

          // 1.5 Volatility (white/black by flow type)
          if (d.volatility) {
            const map = [
              { key: 'smooth_crush', whiteId: 'data-vol-smooth-crush-white', blackId: 'data-vol-smooth-crush-black' },
              { key: 'smooth_collapse', whiteId: 'data-vol-smooth-collapse-white', blackId: 'data-vol-smooth-collapse-black' },
              { key: 'small_swings', whiteId: 'data-vol-small-swings-white', blackId: 'data-vol-small-swings-black' },
              { key: 'medium_swings', whiteId: 'data-vol-medium-swings-white', blackId: 'data-vol-medium-swings-black' },
              { key: 'big_swings', whiteId: 'data-vol-big-swings-white', blackId: 'data-vol-big-swings-black' },
              { key: 'high_precision_draws', whiteId: 'data-vol-precision-draws-white', blackId: 'data-vol-precision-draws-black' },
            ];
            map.forEach(({ key, whiteId, blackId }) => {
              const rec = d.volatility[key];
              if (rec) {
                setText(whiteId, formatCountRatio(rec.white));
                setText(blackId, formatCountRatio(rec.black));
              }
            });
          }

          // 1.6 Engine decision quality
          if (d.engine) {
            document.getElementById('data-eng-top1-player').textContent = d.engine.top1.player + '%';
            document.getElementById('data-eng-top1-peer').textContent = d.engine.top1.peer + '%';
            document.getElementById('data-eng-top1-gm').textContent = d.engine.top1.gm + '%';

            document.getElementById('data-eng-top3-player').textContent = d.engine.top3.player + '%';
            document.getElementById('data-eng-top3-peer').textContent = d.engine.top3.peer + '%';
            document.getElementById('data-eng-top3-gm').textContent = d.engine.top3.gm + '%';

            document.getElementById('data-eng-blunder-player').textContent = d.engine.blunder.player + '%';
            document.getElementById('data-eng-blunder-peer').textContent = d.engine.blunder.peer + '%';
            document.getElementById('data-eng-blunder-gm').textContent = d.engine.blunder.gm + '%';
          }

          // 1.7 Tactical conversion
          if (d.tactical) {
            document.getElementById('data-tac-found').textContent = d.tactical.found;
            document.getElementById('data-tac-missed').textContent = d.tactical.missed;
            document.getElementById('data-tac-rate').textContent = d.tactical.rate + '%';
          }

          // 1.8 Knight/Bishop exchanges
          if (d.exchanges) {
            document.getElementById('data-exch-accurate-count').textContent = d.exchanges.accurate.count;
            document.getElementById('data-exch-accurate-ratio').textContent = d.exchanges.accurate.ratio + '%';
            document.getElementById('data-exch-accurate-gm').textContent = d.exchanges.accurate.gm + '%';

            document.getElementById('data-exch-inaccurate-count').textContent = d.exchanges.inaccurate.count;
            document.getElementById('data-exch-inaccurate-ratio').textContent = d.exchanges.inaccurate.ratio + '%';
            document.getElementById('data-exch-inaccurate-gm').textContent = d.exchanges.inaccurate.gm + '%';

            document.getElementById('data-exch-bad-count').textContent = d.exchanges.bad.count;
            document.getElementById('data-exch-bad-ratio').textContent = d.exchanges.bad.ratio + '%';
            document.getElementById('data-exch-bad-gm').textContent = d.exchanges.bad.gm + '%';

            document.getElementById('data-exch-total-count').textContent = d.exchanges.total.count;
            document.getElementById('data-exch-total-ratio').textContent = d.exchanges.total.ratio + '%';
            document.getElementById('data-exch-total-gm').textContent = d.exchanges.total.gm + '%';
          }

          // 1.9 Forced moves
          if (d.forced) {
            document.getElementById('data-forced-count').textContent = d.forced.count;
            document.getElementById('data-forced-ratio').textContent = d.forced.ratio + '%';
            document.getElementById('data-forced-gm').textContent = d.forced.gm + '%';
          }

          // 1.10 Position handling
          if (d.positions) {
            document.getElementById('data-pos-winning-count').textContent = d.positions.winning.count;
            document.getElementById('data-pos-winning-ratio').textContent = fmtPct(d.positions.winning.ratio);
            document.getElementById('data-pos-winning-gm').textContent = fmtPct(d.positions.winning.gm);

            document.getElementById('data-pos-losing-count').textContent = d.positions.losing.count;
            document.getElementById('data-pos-losing-ratio').textContent = fmtPct(d.positions.losing.ratio);
            document.getElementById('data-pos-losing-gm').textContent = fmtPct(d.positions.losing.gm);
          }

          // ========== SECTION 2: STYLE PARAMETERS ==========
          const fillStyle = (section, prefixMap, includeTotal = false) => {
            if (!section) return;
            Object.entries(prefixMap).forEach(([key, baseId]) => {
              const rec = section[key];
              if (!rec) return;
              setText(`${baseId}-count`, rec.count);
              setText(`${baseId}-ratio`, fmtPct(rec.ratio));
              setText(`${baseId}-gm`, fmtPct(rec.gm));
            });
            if (includeTotal && section.total) {
              setText(`${prefixMap.total || 'data-style-total'}-count`, section.total.count);
              setText(`${prefixMap.total || 'data-style-total'}-ratio`, fmtPct(section.total.ratio));
              setText(`${prefixMap.total || 'data-style-total'}-gm`, fmtPct(section.total.gm));
            }
          };

          fillStyle(d.style_maneuver, {
            constructive: 'data-style-maneuver-constructive',
            prepare: 'data-style-maneuver-prepare',
            neutral: 'data-style-maneuver-neutral',
            misplaced: 'data-style-maneuver-misplaced',
            opening: 'data-style-maneuver-opening',
            total: 'data-style-maneuver-total',
          }, true);

          fillStyle(d.style_prophylaxis, {
            direct: 'data-style-prophylaxis-direct',
            latent: 'data-style-prophylaxis-latent',
            meaningless: 'data-style-prophylaxis-meaningless',
            failed: 'data-style-prophylaxis-failed',
            total: 'data-style-prophylaxis-total',
          }, true);

          fillStyle(d.style_semantic_control, {
            simplify: 'data-style-control-simplify',
            plankill: 'data-style-control-plankill',
            freeze: 'data-style-control-freeze',
            blockade: 'data-style-control-blockade',
            fileseal: 'data-style-control-fileseal',
            kingsafety: 'data-style-control-kingsafety',
            spaceclamp: 'data-style-control-spaceclamp',
            regroup: 'data-style-control-regroup',
            slowdown: 'data-style-control-slowdown',
            total: 'data-style-control-total',
          }, true);

          fillStyle(d.style_control_over_dynamics, {
            overall: 'data-style-cod-overall',
            fileseal: 'data-style-cod-fileseal',
            freeze: 'data-style-cod-freeze',
            kingsafety: 'data-style-cod-kingsafety',
            regroup: 'data-style-cod-regroup',
            plankill: 'data-style-cod-plankill',
            blockade: 'data-style-cod-blockade',
            simplify: 'data-style-cod-simplify',
            spaceclamp: 'data-style-cod-spaceclamp',
            slowdown: 'data-style-cod-slowdown',
          });

          fillStyle(d.style_initiative, {
            attempt: 'data-style-initiative-attempt',
            deferred: 'data-style-initiative-deferred',
            premature: 'data-style-initiative-premature',
            cfile: 'data-style-initiative-cfile',
          });

          fillStyle(d.style_tension, {
            creation: 'data-style-tension-creation',
            neutral: 'data-style-tension-neutral',
          });

          fillStyle(d.style_structural, {
            integrity: 'data-style-structural-integrity',
            dynamic: 'data-style-structural-dynamic',
            static: 'data-style-structural-static',
          });

          fillStyle(d.style_sacrifice, {
            tactical: 'data-style-sacrifice-tactical',
            positional: 'data-style-sacrifice-positional',
            inaccurate: 'data-style-sacrifice-inaccurate',
            speculative: 'data-style-sacrifice-speculative',
            desperate: 'data-style-sacrifice-desperate',
            combination: 'data-style-sacrifice-combination',
            init: 'data-style-sacrifice-init',
            structure: 'data-style-sacrifice-structure',
            space: 'data-style-sacrifice-space',
            total: 'data-style-sacrifice-total',
          }, true);

          // ========== SECTION 4: OPENING REPERTOIRE ==========
          // 4.1 & 4.2 Opening tables (dynamic row insertion)
          if (d.openings) {
            if (d.openings.white && d.openings.white.length > 0) {
              const whiteTbody = document.getElementById('data-opening-white-tbody');
              whiteTbody.innerHTML = '';
              d.openings.white.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                  <td>${row.line}</td>
                  <td>${row.variation}</td>
                  <td>${row.games}</td>
                  <td>${row.win}%</td>
                  <td>${row.draw}%</td>
                  <td>${row.loss}%</td>
                  <td>${row.accuracy}</td>
                `;
                whiteTbody.appendChild(tr);
              });
            }

            if (d.openings.black && d.openings.black.length > 0) {
              const blackTbody = document.getElementById('data-opening-black-tbody');
              blackTbody.innerHTML = '';
              d.openings.black.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                  <td>${row.line}</td>
                  <td>${row.variation}</td>
                  <td>${row.games}</td>
                  <td>${row.win}%</td>
                  <td>${row.draw}%</td>
                  <td>${row.loss}%</td>
                  <td>${row.accuracy}</td>
                `;
                blackTbody.appendChild(tr);
              });
            }
          }
        }

        // ========== LLM SLOTS ==========
        if (dataJson.llm_slots) {
          Object.keys(dataJson.llm_slots).forEach(slotId => {
            const element = document.getElementById(slotId);
            if (element) {
              element.innerHTML = dataJson.llm_slots[slotId];
            }
          });
        }

        // ========== VISUALIZATIONS ==========
        if (dataJson.visualizations && typeof vizLib !== 'undefined' && vizLib) {
          vizLib.clear();
          Object.keys(dataJson.visualizations).forEach(vizId => {
            vizLib.create(vizId, dataJson.visualizations[vizId]);
          });
        }

        window._payloadLoaded = true;
      };

      // Fetch report payload from backend and hydrate UI
      async function loadReportData() {
        const parts = window.location.pathname.split("/");
        const playerId = parts[parts.length - 1] || "player";
        try {
          const resp = await fetch(`/api/report/${playerId}`);
          if (!resp.ok) {
            throw new Error(`HTTP ${resp.status}`);
          }
          const payload = await resp.json();
          TAG_EXPLAINERS = { ...DEFAULT_TAG_EXPLAINERS, ...(payload.tag_explanations || {}) };
          if (window.fillReportData) {
            window.fillReportData(payload);
          }
          attachTagHelps();
        } catch (err) {
          console.error("Failed to load report data:", err);
        }
      }

      // Example usage (backend will inject this):
      window.__PHASE2_INLINE_PAYLOAD__ = {"player_id": "Xue,Haowen", "player_display_name": "Xue,Haowen", "player_key": "xuehaowen", "fixed_data": {"winrate": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0, "elo": null}, "black": {"win": 33.3, "draw": 33.3, "loss": 33.3, "elo": 2493.7}, "total": {"win": 33.3, "draw": 33.3, "loss": 33.3, "elo": 2493.7}}, "accuracy": {"overall": {"moves": 120, "avg_loss": 11.72, "score": 0.883}, "opening": {"moves": 0, "avg_loss": null, "score": null}, "middlegame": {"moves": 45, "avg_loss": 5.84, "score": 0.942}, "endgame": {"moves": 75, "avg_loss": 15.25, "score": 0.847}, "queenful": {"moves": 45, "avg_loss": 5.84, "score": 0.942}, "queenless": {"moves": 75, "avg_loss": 15.25, "score": 0.847}}, "accuracy_comparison": {"overall": {"player": 0.883, "peer": null, "gm": null}, "opening": {"player": null, "peer": null, "gm": null}, "middlegame": {"player": 0.942, "peer": null, "gm": null}, "endgame": {"player": 0.847, "peer": null, "gm": null}}, "advantage": {"+1": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 50.0, "draw": 50.0, "loss": 0.0}}, "+3": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 100.0, "draw": 0.0, "loss": 0.0}}, "+5": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "+7": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}}, "defensive": {"-1": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "-3": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "-5": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}, "-7": {"white": {"win": 0.0, "draw": 0.0, "loss": 0.0}, "black": {"win": 0.0, "draw": 0.0, "loss": 0.0}}}, "volatility": {"smooth_crush": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 0, "ratio": 0.0}}, "smooth_collapse": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 0, "ratio": 0.0}}, "small_swings": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 1, "ratio": 33.3}}, "medium_swings": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 1, "ratio": 33.3}}, "big_swings": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 1, "ratio": 33.3}}, "high_precision_draws": {"white": {"games": 0, "ratio": 0.0}, "black": {"games": 0, "ratio": 0.0}}}, "engine": {"top1": {"player": 50.8, "peer": 0, "gm": 0}, "top3": {"player": 97.5, "peer": 0, "gm": 0}, "blunder": {"player": 0.8, "peer": 0, "gm": 0}}, "tactical": {"found": 5, "missed": 1, "rate": 83.3}, "exchanges": {"accurate": {"count": 3, "ratio": 2.6, "gm": 3.2}, "inaccurate": {"count": 0, "ratio": 0.0, "gm": 0.6}, "bad": {"count": 0, "ratio": 0.0, "gm": 0.4}, "total": {"count": 3, "ratio": 2.6, "gm": 4.3}}, "forced": {"count": 2, "ratio": 1.7, "gm": 6.8}, "positions": {"winning": {"count": 2, "ratio": 1.7, "gm": 6.8}, "losing": {"count": 0, "ratio": 0.0, "gm": 4.4}}, "openings": {"white": [], "black": [{"line": "Unknown", "variation": "", "games": 1, "win": 100.0, "draw": 0.0, "loss": 0.0, "accuracy": 0.929, "first_moves": "1. Nf3 Nf6 2. g3 b6 3. c4 Bb7 4. Bg2 c5"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 100.0, "loss": 0.0, "accuracy": 0.869, "first_moves": "1. Nf3 Nf6 2. c4 b6 3. g3 Bb7 4. Bg2 c5"}, {"line": "Unknown", "variation": "", "games": 1, "win": 0.0, "draw": 0.0, "loss": 100.0, "accuracy": 0.952, "first_moves": "1. Nf3 Nf6 2. g3 b6 3. Bg2 Bb7 4. c4 c5"}]}, "style_maneuver": {"constructive": {"count": 39, "ratio": 33.9, "gm": 14.3}, "prepare": {"count": 5, "ratio": 4.3, "gm": 3.9}, "neutral": {"count": 30, "ratio": 26.1, "gm": 19.1}, "misplaced": {"count": 4, "ratio": 3.4, "gm": 4.2}, "opening": {"count": 8, "ratio": 7.0, "gm": 9.4}, "total": {"count": 86, "ratio": 74.7, "gm": 50.8}}, "style_prophylaxis": {"direct": {"count": 9, "ratio": 7.8, "gm": 8.5}, "latent": {"count": 43, "ratio": 37.4, "gm": 21.7}, "meaningless": {"count": 2, "ratio": 1.7, "gm": 1.6}, "failed": {"count": 0, "ratio": 0.0, "gm": 1.2}, "total": {"count": 54, "ratio": 46.9, "gm": 33.1}}, "style_semantic_control": {"simplify": {"count": 0, "ratio": 0.0, "gm": 0.0}, "plankill": {"count": 5, "ratio": 4.3, "gm": 5.5}, "freeze": {"count": 1, "ratio": 0.9, "gm": 1.9}, "blockade": {"count": 0, "ratio": 0.0, "gm": 0.4}, "fileseal": {"count": 17, "ratio": 14.8, "gm": 14.2}, "kingsafety": {"count": 9, "ratio": 7.8, "gm": 4.2}, "spaceclamp": {"count": 1, "ratio": 0.9, "gm": 0.8}, "regroup": {"count": 8, "ratio": 7.0, "gm": 6.9}, "slowdown": {"count": 0, "ratio": 0.0, "gm": 0.1}, "total": {"count": 41, "ratio": 35.7, "gm": 33.9}}, "style_control_over_dynamics": {"overall": {"count": 31, "ratio": 27.0, "gm": 23.6}, "fileseal": {"count": 17, "ratio": 14.8, "gm": 14.2}, "freeze": {"count": 1, "ratio": 0.9, "gm": 1.9}, "kingsafety": {"count": 9, "ratio": 7.8, "gm": 4.2}, "regroup": {"count": 8, "ratio": 7.0, "gm": 6.9}, "plankill": {"count": 5, "ratio": 4.3, "gm": 5.5}, "blockade": {"count": 0, "ratio": 0.0, "gm": 0.4}, "simplify": {"count": 0, "ratio": 0.0, "gm": 0.0}, "spaceclamp": {"count": 1, "ratio": 0.9, "gm": 0.8}, "slowdown": {"count": 0, "ratio": 0.0, "gm": 0.1}}, "style_initiative": {"attempt": {"count": 4, "ratio": 3.5, "gm": 3.5}, "deferred": {"count": 32, "ratio": 27.8, "gm": 19.8}, "premature": {"count": 0, "ratio": 0.0, "gm": 1.1}, "cfile": {"count": 0, "ratio": 0.0, "gm": 0.0}}, "style_tension": {"creation": {"count": 2, "ratio": 1.7, "gm": 6.9}, "neutral": {"count": 28, "ratio": 24.3, "gm": 9.1}}, "style_structural": {"integrity": {"count": 6, "ratio": 5.2, "gm": 9.6}, "dynamic": {"count": 8, "ratio": 7.0, "gm": 5.5}, "static": {"count": 1, "ratio": 0.9, "gm": 1.5}}, "style_sacrifice": {"tactical": {"count": 5, "ratio": 4.3, "gm": 0.9}, "positional": {"count": 5, "ratio": 4.3, "gm": 3.9}, "inaccurate": {"count": 0, "ratio": 0.0, "gm": 0.1}, "speculative": {"count": 1, "ratio": 0.9, "gm": 0.3}, "desperate": {"count": 0, "ratio": 0.0, "gm": 0.0}, "combination": {"count": 1, "ratio": 0.9, "gm": 0.3}, "init": {"count": 3, "ratio": 2.6, "gm": 0.6}, "structure": {"count": 1, "ratio": 0.9, "gm": 0.9}, "space": {"count": 4, "ratio": 3.5, "gm": 3.7}, "total": {"count": 20, "ratio": 17.4, "gm": 10.7}}}, "llm_slots": {"section-1-1-winrate-llm": "<p>Your recorded results are entirely with Black, showing an even split: 33.3% wins, 33.3% draws, and 33.3% losses. This produces an overall performance that is perfectly balanced across outcomes, without a clear tilt toward decisive results or solidity. With White, there are currently no games in the dataset, so no conclusions can be drawn about your results or color-based preferences beyond this balanced Black performance.</p>", "section-1-2-accuracy-llm": "<p>Your overall accuracy score of 0.883 indicates generally solid play. The middlegame and queenful positions are your clear strengths, with a 0.942 accuracy and low average loss of 5.84, showing you convert dynamic positions efficiently. In contrast, your endgames and queenless positions drop to 0.847 accuracy with a higher average loss of 15.25, suggesting more frequent imprecision once material is reduced. With no opening data available, the main takeaway is that your decision-making is notably stronger before exchanges and simplifies less reliably as the game progresses.</p>", "section-1-3-advantage-llm": "<p>Your advantage conversion profile is almost entirely defined by your games as Black. From a modest +1 edge with Black, you convert half of your chances into wins and the other half into draws, with no collapses into losses. This 50% win / 50% draw split indicates that once you obtain a small edge, you are generally reliable at maintaining it and at least safeguarding the half‑point, even if you do not always press it through to victory.</p>\n\n<p>The picture becomes even more striking at +3 with Black, where you show a 100% win rate and 0% draws or losses. In the games sampled, once you reach a clear advantage, conversion is perfectly clean: you do not let the opponent escape with a draw, nor do you ever let the game slip. However, there is no recorded data for larger advantages (+5 and +7) or for any White advantages, which limits conclusions about your performance in those scenarios. The existing numbers suggest that your practical strength lies in converting solid, workmanlike advantages with Black rather than in handling huge advantages or pressing small edges with White.", "section-1-4-defensive-llm": "<p>Your defensive-resilience profile is currently defined more by a lack of data than by clear trends. At every disadvantage level we track (–1, –3, –5, and –7 pawns), your win, draw, and loss ratios with both colors are all 0.0. This means that in the sampled games there are effectively no recorded positions where you are objectively down by these margins and then play on to a decisive or drawn result. Compared to typical peers or GM baselines—where we normally see a spread of results at –1 and some residual resistance even at –3 or worse—your profile looks unusually “empty” rather than weak or strong.</p>\n\n<p>Because every outcome at each disadvantage tier is 0.0, we cannot identify a specific collapse point (for example, a clear shift from drawing chances at –1 to mostly losing at –3). The practical implication is that your defensive skills under sustained pressure are still statistically undefined in this dataset. As you accumulate more games, it will be important to allow some of these worse positions to play out, so your true capacity to resist, swindle, or stabilize under material or evaluation deficits can be measured and trained in a targeted way.</p>", "section-1-5-volatility-llm": "<p>Your volatility profile is currently defined almost entirely by your Black games, with White still an unknown territory. As White, every category registers 0%: no smooth crushes, no smooth collapses, no swingy games, and no high-precision draws. This suggests that either the sample of White games is too small or the games were not captured in this dataset, so we cannot yet infer your risk profile or control level with that color.</p>\n\n<p>With Black, the picture is very different and highly polarized. One third of your Black games (33.3%) fall into small-swing territory, another third (33.3%) into medium swings, and the final third (33.3%) into big swings. You have no smooth crushes or smooth collapses with Black, and no high-precision draws either. This mix indicates that your Black games rarely proceed in a controlled, one-sided manner; instead, they tend to feature evaluation changes of varying magnitude throughout the game.</p>\n\n<p>The equal distribution across small, medium, and big swings suggests a volatile, fighting approach with Black, where both sides are given real chances and the balance can shift multiple times. The absence of smooth crushes and high-precision draws implies that you are not yet consistently steering games into stable, technical territory, either when better or when equal. Overall, the existing sample points to a risk-tolerant Black repertoire and playing style, where you accept dynamic, double-edged positions rather than aiming for quiet control or clinical conversion.</p>", "section-1-6-engine-llm": "<p>Your engine decision profile shows a very strong alignment with top engine choices overall. You select the engine’s first choice 50.8% of the time, and you are within the top three engine moves in 97.5% of your decisions. In the available comparison set, both peers and GMs are listed at zero for these metrics, which indicates that their corresponding data is either not present or not measured in the same way. Within this framework, your recorded top-move precision clearly stands out as significantly higher than the zero baselines given for others.</p>\n\n<p>Your blunder rate is also extremely low at 0.8%. Again, peer and GM values are shown as zero, so the only robust comparison we can draw is that your measured blunder frequency is very small in absolute terms and meaningfully separated from the zero-baseline entries. Taken together, these numbers describe a player who almost always stays within the engine’s top three choices and very rarely commits outright blunders, yielding an overall decision quality that is consistently strong in the sample provided.</p>", "section-1-7-tactical-llm": "<p>Your tactical performance in this sample shows strong alertness and reliable calculation. Converting 5 out of 6 tactical opportunities, with an 83.3% realization rate, indicates that when chances arise you usually recognize and exploit them. This suggests you are rarely overlooking clear shots and that your calculation depth is sufficient for the kinds of tactics that appeared in these games.</p>\n<p>The single missed tactic does, however, signal that your vigilance is not yet flawless. In practical terms, this level of accuracy would place you ahead of many peers in spotting short combinations and basic tactical motifs, but it also hints that there is still room to refine consistency, especially in more complex or time-pressured positions. Your current numbers imply that your pattern recognition is already well developed, and your calculation is generally stable rather than speculative. To push this further, you would benefit most from work on sustaining focus across the whole game, so that your tactical alertness remains at this high level even in long, tense struggles where one lapse can overturn otherwise excellent play.</p>", "section-1-8-exchanges-llm": "<p>Your overall knight and bishop exchange frequency is noticeably lower than the GM baseline: a total ratio of 2.6 versus 4.3 for GMs. This suggests you are relatively selective about trading minor pieces, reaching these exchanges less often than typical high-level peers. Such restraint often points to a player who prefers to keep tension and piece complexity on the board, rather than clarifying structures early with routine trades. You are not avoiding exchanges altogether, but you enter them with more caution than the average GM in this dataset.</p>\n\n<p>Within that lower volume, the quality breakdown of your decisions is striking. All of your minor-piece trades in the sample are classified as accurate, giving you an accurate exchange ratio of 2.6 against a GM average of 3.2. While GMs reach more accurate exchanges in absolute terms, your profile shows 0.0 for both inaccurate and bad exchanges, compared with GM averages of 0.6 and 0.4 respectively. In other words, when you do decide to exchange knights or bishops, you virtually never misjudge the trade in this sample. The data points to a “quality-over-quantity” philosophy: fewer exchanges than peers, but with exceptionally clean decision-making.</p>\n\n<p>Comparing you to specific top GMs, your accurate exchange ratio of 2.6 is closest to Bobby Fischer’s 2.7 and slightly below Garry Kasparov and Ding Liren at 2.9. However, all those GMs balance their accurate exchanges with some degree of risk: Fischer has 0.8 inaccurate and 0.6 bad, Kasparov 0.4 and 0.2, Ding 0.6 and 0.4. Karpov and Tal each stand at 3.1 accurate with 0.5/0.4 and 0.3/0.4 inaccurate/bad respectively, while Petrosian shows the highest volume at 4.5 accurate but also 1.2 inaccurate and 0.6 bad. Relative to this group, you trade minors less often than all of them, but your record of 0.0 inaccurate and 0.0 bad exchanges indicates a more conservative, risk-averse approach: you wait for clearly favorable moments, and largely avoid speculative or double-edged trades that these GMs are willing to undertake more frequently.</p>", "section-1-9-forced-llm": "<p>Forced-move frequency is a useful window into how you experience positions and what kinds of battles you’re drawn into. A high forced-move ratio usually indicates frequent time spent in sharp, concrete situations where only one or two moves are acceptable. Players with that profile are often willing to enter tactical complications, walk tightropes in defense, or allow dynamic imbalances that demand precise calculation. A lower forced-move ratio, by contrast, points to a larger share of positions where several moves are playable. That commonly aligns with a preference for control, prophylaxis, and long-term plans rather than constant hand-to-hand tactical fighting.</p>\n\n<p>Your forced-move ratio of 1.7 is dramatically lower than the GM snapshot average of 6.8. This suggests you spend far less of your game time in positions where the engine regards your choice as nearly forced. Compared to this reference group, you are typically navigating calmer waters, with more strategic flexibility and fewer moments where a single misstep would be catastrophic. That does not mean you avoid tactics altogether, but it does suggest that your games, as a whole, feature more maneuvering and choice and fewer knife-edge calculations than those of the average elite player in this sample.</p>\n\n<p>Looking at specific GMs, every reference player in your dataset shows a higher forced-move ratio than you. Tigran Petrosian, often associated with prophylaxis and control, still has a forced-move ratio of 3.7, more than double yours. This indicates that even his famously restrained style faced sharper, more compulsory decisions than appear in your sample. On the other end of the spectrum, Garry Kasparov’s 9.9 and Bobby Fischer’s 8.7 reflect careers rich in dynamic, forcing positions, far removed from your current profile. Even the more balanced benchmarks of Mihail Tal at 5.4, Anatoly Karpov at 5.9, and Ding Liren at 7.0 lie significantly above your 1.7. In stylistic terms, this places you at the very quiet, low-forcing end of the spectrum: you are currently steering games into phases where you can choose among multiple reasonable plans, rather than living in the highly concrete, forcing environments that characterize the GM data set.</p>", "section-1-10-positions-llm": "<p>Your handling of winning positions, with a ratio of 1.7, currently sits well below both the overall GM snapshot value of 6.8 and every individual GM reference. Even compared with the most “restrained” GM converters like Petrosian and Tal, both at 1.8, your score is slightly lower. This suggests that once you reach an advantage, you are less consistent at converting it than typical GMs, and you might be allowing opponents more chances to escape. It points to a style where creating promising positions may come more naturally than squeezing full value out of them.</p>\n\n<p>The contrast with high-conversion specialists such as Fischer at 12.7, Kasparov at 9.6, and Karpov at 8.2 underlines that your current profile is far from the clinical, technical style associated with top converters. Instead, your games may feature lingering tension and slower, less decisive exploitation of a plus position. You may rely more on ongoing play and initiative than on clean, technical closure.</p>\n\n<p>Your losing-position handling ratio of 0.0 is dramatically lower than the GM snapshot value of 4.4 and also below every GM listed, from Ding’s resilient 1.9 up to Tal’s 9.4. With zero instances in this sample, the data suggest that you rarely reached truly losing positions, or that the sample is too small to show your defensive resourcefulness. Compared to the GMs, there is simply not enough evidence here to define a stable pattern of resistance in bad positions.</p>", "section-2-1-maneuver-llm": "<p>Maneuvers are non-forcing piece moves that reshape your position rather than immediately trading or attacking. Your overall maneuver ratio of 74.7% is far above the GM reference of 50.8%, meaning you rely on piece placement more than elite players, for better or worse. The task is to judge whether those maneuvers convert into improved coordination or just consume tempi.</p>\n\n<p>Your constructive maneuver ratio of 33.9% is more than double the GM baseline of 14.3%. This is your signature: you are far more willing than the reference GMs to invest moves in improving piece activity. In this respect you are more “manoeuvring-heavy” than Petrosian at 16.1%, Karpov at 15.7%, or Ding Liren at 15.1%, suggesting a strong preference for slow build‑up. Your prepare maneuvers at 4.3% closely track Kasparov’s 4.3% and Fischer’s 4.2%, so when you do reposition, it is often with a clear tactical or structural aim.</p>\n\n<p>Your neutral maneuvers at 26.1% are significantly above the GM 19.1% and also surpass Tal’s already high 23.5%. This indicates that a notable share of your piece moves neither clearly improve nor harm your position, inflating the total maneuver volume. On the positive side, your misplaced maneuvers at 3.4% are slightly better than the GM 4.2%, and your opening maneuver ratio of 7.0% is lower than the 9.4% GM reference. Compared to this GM snapshot, you resemble a more extreme, maneuver‑heavy blend of Petrosian and Ding: highly constructive, relatively safe, but with room to trim neutral shuffling.</p>", "section-2-2-prophylaxis-llm": "<p>Your overall prophylactic volume is well above the GM benchmark: 46.9% of your moves are prophylactic versus the GM snapshot at 33.1%. This marks you as a prevention-heavy player who consistently looks for ways to limit the opponent’s options. Within that high volume, you rely far more on latent prophylaxis than the reference group. Your latent ratio of 37.4% is dramatically above the GM 21.7%, indicating a preference to restrain and restrict in multi-purpose ways rather than play explicit, one-idea “stop this threat” moves.</p>\n\n<p>By contrast, your direct prophylaxis sits at 7.8%, slightly below the GM 8.5%. Among the reference players, your direct ratio is closest to Bobby Fischer’s 7.9% and Mihail Tal’s 7.3%, and a bit below Garry Kasparov’s 10.1% and Ding Liren’s 9.2%. However, your latent share is much higher than any of them; even compared to the latent specialists like Tigran Petrosian at 29.3% or Anatoly Karpov at 22.0%, you go further in building quiet, long-term safeguards.</p>\n\n<p>Quality-wise, your meaningless prophylaxis at 1.7% is in line with the GM 1.6% baseline, not drifting into Tal’s higher 3.5%. Most striking is the complete absence of failed prophylaxis at 0.0% versus the GM 1.2%; all listed GMs show some failed attempts, while you currently show none. This suggests that your preventive decisions are not only frequent but also reliably justified, with a strong bias toward subtle, multi-purpose restriction rather than overt barrier moves.</p>", "section-2-3-semantic-control-llm": "<p>Your overall semantic control ratio sits slightly above the GM reference snapshot, suggesting you exert structured control a bit more often than the baseline model. This does not come from simplification or blockading, which you almost never use, but from a cluster of more active, policy-driven decisions in the middlegame and early endgame.</p>\n\n<p>Your plan_kill usage is modestly below the GM reference and also below Kasparov, Tal, Fischer, and Ding. Compared to Petrosian and Karpov, you are closer, but still slightly less inclined to convert advantages through direct forcing plans. Instead, you gravitate toward file_seal and king_safety_shell. Your file_seal ratio is fractionally above the overall GM baseline and also above Petrosian, Kasparov, Karpov, and Fischer, though still below Tal and Ding. This points to a style where you press advantages by restricting counterplay along key files rather than immediately cashing in.</p>\n\n<p>King_safety_shell is where you diverge most sharply. You sit well above the GM baseline and clearly higher than Petrosian, Kasparov, Karpov, Tal, and Fischer, and only slightly below Ding. This indicates a Ding-like concern for maintaining a safe king as a precondition for any other plan. Your space_clamp and regroup ratios track the GM snapshot closely and are similar to Petrosian, Kasparov, Karpov, and Fischer, suggesting you are comfortable consolidating and maintaining space but do not overinvest in it.</p>\n\n<p>You almost never use explicit freeze_bind, blockade_passed, or slowdown tools compared with the GM reference. Relative to Ding and Karpov in particular, you lean less on pure binding or blockading and more on harmonizing your pieces behind a safe king and sealed files.</p>", "section-2-4-cod-llm": "<p>Your control_over_dynamics score reflects how often you actively steer the game’s pace and direction rather than letting positions drift. With an overall ratio of 27.0 versus the GM snapshot of 23.6, you are more inclined than this GM group to impose your preferred structure. This overall profile is comparable in volume to Tal’s 27.0 and clearly above Petrosian, Karpov, and Fischer in this specific metric, suggesting you rarely play “on autopilot.”</p>\n\n<p>Within that, your fileseal ratio of 14.8 is slightly above the GM snapshot of 14.2 and also higher than Petrosian, Karpov, Fischer, and even Kasparov in this area, though below Tal and Ding. You reliably contest open files and key lines when the position demands it. Your king_safety score of 7.8 versus a GM 4.2 is a notable spike: higher than every GM listed, including Ding’s 5.0 and Tal’s 4.1, indicating you are exceptionally sensitive to king-shell integrity and often reorganize to neutralize direct threats.</p>\n\n<p>Your regroup ratio of 7.0 is in line with the GM snapshot of 6.9 and similar to Kasparov and Fischer, so consolidating and improving piece coordination is a normal part of your decision-making, not an outlier. Plan-kill (4.3 vs GM 5.5) sits below the reference and below all listed GMs, so you interrupt opponent plans less frequently than this group. Blockades and explicit slowdowns are essentially absent in your sample, in contrast to the small but non-zero use seen in the GMs. Finally, your freeze and spaceclamp use are roughly “GM-level” in frequency, without being dominant themes, which keeps your control profile active and practical rather than purely restrictive.</p>", "section-2-5-initiative-llm": "<p>Your initiative profile is unusually patient and selective. Your raw initiative attempts are exactly in line with the overall GM snapshot (3.5 vs 3.5), suggesting you seize the initiative at a broadly “GM-typical” frequency. Compared to the individual GM references, your attempt ratio sits between the more measured profiles of Petrosian and Fischer (2.5–2.6) and the sharper styles of Kasparov and Ding Liren (4.5–4.9), indicating balanced ambition rather than constant aggression.</p>\n\n<p>The standout feature is your high deferred initiative ratio: 27.8 compared to the GM snapshot’s 19.8. This is noticeably above Petrosian’s 23.6 and clearly above Kasparov’s 16.1 and Fischer’s 16.1. You are consistently more willing to postpone direct action, accumulating small advantages or improving piece coordination before striking. This reflects a strong preference for groundwork and consolidation over immediate confrontation.</p>\n\n<p>At the same time, you show no premature attacks at all (0.0 vs a GM snapshot of 1.1). All listed GMs carry some non‑zero premature attack ratio, so your profile is even more cautious in avoiding unsound initiative grabs. Combined with a complete absence of c-file pressure games in this sample (0.0 vs 0.0), the data depicts a player who values well-prepared, strategically justified initiatives and almost never “pushes their luck” tactically.</p>", "section-2-6-tension-llm": "<p>Your current balance between tension creation and neutral tension decisions shows a clear tendency to resolve or avoid tension rather than maintain it. Your tension_creation ratio is 1.7, far below the GM snapshot of 6.9, while your neutral_tension_creation ratio is 24.3, much higher than the GM value of 9.1. This indicates that, when faced with the choice of increasing pressure or keeping pieces and pawn structures in a dynamic standoff, you more often choose the calmer path.</p>\n\n<p>Compared with the GM references, this contrast is even sharper. All listed GMs have tension_creation values above 5, from Fischer at 5.1 up to Petrosian at 8.6, but also keep their neutral_tension_creation around 8.0–9.8. You, by contrast, are creating significantly less tension while neutralizing it far more frequently. In practical terms, this means many positions that could stay sharp and offer mutual chances are being simplified or clarified prematurely.</p>\n\n<p>The upside is that you likely feel at home in more stable, reduced-risk positions. The trade-off is that you often forgo typical GM-style opportunities to build pressure over several moves. Bringing your tension_creation ratio closer to your peers while trimming back the very high neutral_tension_creation would make your style more flexible and threatening without abandoning your solid foundation.</p>", "section-2-7-structural-llm": "<p>Your structural profile shows a clear preference for dynamic tension over pure solidity. Your structural integrity ratio of 5.2 is noticeably lower than the GM snapshot at 9.6, indicating you are more willing than elite players to accept pawn weaknesses or slightly loose structures. Compared with structurally disciplined players like Petrosian and Karpov, both at 10.2, or Kasparov at 10.7, you are operating with significantly fewer fully healthy structures on average.</p>\n\n<p>At the same time, your dynamic compromise ratio of 7.0 exceeds the GM reference of 5.5, placing you closer to the combative end of the spectrum. You tolerate more imbalances and tension than Kasparov at 4.8 or Ding at 4.4, and even run somewhat hotter than Fischer at 5.6 and Petrosian at 6.9. Only relative to Tal’s 5.4 does your number stand out as particularly bold, suggesting you frequently invite complications where he might already be cashing in.</p>\n\n<p>Your static compromise ratio is 0.9, slightly below the GM value of 1.5 and also below Petrosian, Karpov, and Tal, all above or equal to 1.5. This points to a lower tolerance for long-term, irreparable weaknesses. In practical terms, you avoid permanent defects but are ready to loosen your structure dynamically, signaling a risk profile that favors sharp, reversible imbalances over slow, static concessions.</p>", "section-2-8-sacrifice-llm": "<p>Your overall sacrifice ratio of 17.4 versus the GM baseline of 10.7 shows that you are materially more willing to give up material than the reference grandmasters. This does not mean you are reckless, but it does mean your games are more sacrifice-heavy and often revolve around dynamic imbalances.</p>\n\n<p>Tactically, your sacrifice ratio of 4.3 is far above the GM norm of 0.9. Compared with Kasparov and Petrosian, who are both at 1.1, you are deploying tactical sacrifices roughly four times as often, indicating a strong attraction to concrete blows rather than slow pressure. At the same time, your positional sacrifice ratio of 4.3 is very close to the GM average of 3.9 and sits between Petrosian’s 4.2 and Kasparov’s 3.7. This mix suggests you are not purely a “hack-and-slash” player: you use both tactical and positional ideas, just at a higher overall frequency.</p>\n\n<p>Your speculative sacrifice ratio of 0.9 is three times the GM baseline of 0.3. It is higher than Kasparov’s 0.2 and Petrosian’s 0.5, again reinforcing that you are comparatively more willing to trust your intuition and practical chances. The absence of inaccurate and desperate sacrifices (0.0 versus GM 0.1 and 0.0) implies that, despite the ambition, your sacrifices usually retain objective justification.</p>\n\n<p>In terms of themes, your initiative sacrifices (2.6 vs GM 0.6) stand out dramatically. You go after the initiative much more often than Kasparov’s 0.6 or Petrosian’s 0.8, building a style where momentum and activity are central. By contrast, your structure sacrifices (0.9 vs GM 0.9) and space sacrifices (3.5 vs GM 3.7) are almost exactly in line with grandmaster norms, close to Kasparov’s 0.8/3.4 and Petrosian’s 0.8/4.1. Overall, your profile looks like a Kasparov–Petrosian hybrid in sacrifice frequency: normal GM-like feel for structure and space, but with a distinctly higher appetite for tactical and initiative-driven investments.</p>", "section-2-9-synthesis-llm": "<p>Your games show a clear preference for maneuvering and prophylactic thinking, with these themes appearing much more frequently than in the GM baseline. Constructive maneuvers form a notably high share of your decisions, and even your neutral maneuvers appear more often than in GM games, while misplaced maneuvers are slightly rarer. This points to a player who is comfortable improving pieces and re-routing them patiently, rather than rushing into direct conflict. You invest a bit less in pure opening maneuvers than GMs on average, suggesting that your characteristic style emerges more in the middlegame than in the early phase.</p>\n\n<p>Your prophylactic profile reinforces this impression. Latent prophylaxis is especially pronounced compared to the GM ratio, while direct prophylaxis is close to the reference values and you show no failed prophylactic attempts. The overall prophylaxis frequency is clearly higher than the GM baseline, which indicates a strong habit of defusing counterplay before it becomes concrete. Combined with a high rate of semantic control moves, particularly fileseals and king safety measures, this creates a style that continually restricts the opponent’s active possibilities while maintaining your own flexibility.</p>\n\n<p>Control over dynamics is similarly elevated. Your kingsafety and regrouping moves slightly exceed GM ratios, and fileseals appear at essentially GM levels, while blockades and formal “slowdown” moves are almost absent. Instead of freezing the game completely, you tend to keep a controlled but elastic position. Initiative attempts match GM frequency, but you favor deferred initiative significantly more, with no premature thrusts; this fits a player who first builds a stable platform of control and only then strikes.</p>\n\n<p>Tension handling and structure show an interesting contrast. You create tension much less often than the GM baseline and sit in neutral tension far more frequently, preferring to maintain balance rather than provoke direct clashes. Structurally, you seem slightly less focused on pure pawn integrity and a bit more on dynamic structures than GMs on average, hinting at a willingness to accept some weaknesses for activity. That is consistent with your sacrificial profile: overall sacrifices appear much more frequently than in the GM reference, especially tactical and initiative-based ones, with speculative and combination sacrifices also above GM ratios but without a spike in inaccurate or desperate sacrifices. Exchanges are slightly less frequent than in GM games but lean entirely toward accurate trades. Finally, you enter forced sequences far less than the GM baseline, rounding out a portrait of a player who prefers to guide the game through quiet, prophylactic, and maneuvering channels, then unleash well-prepared dynamic operations on their own terms.</p>", "section-3-1-ability-llm": "<p>Your current profile is built almost entirely from your games with Black, where you are performing at an estimated 2493.7 level with an even win–draw–loss distribution. Within that, your move quality is solid: an overall accuracy score of 0.883, with particularly strong middlegame play at 0.942 and a clean tactical hit rate of 83.3% (5 out of 6 resources found). Engine comparison reinforces that you navigate complex positions well: you match the engine’s top choice 50.8% of the time and stay within its top three moves 97.5% of the time, with a very low blunder rate of 0.8%. Once you reach clear advantages as Black, your conversion has been reliable so far: from +1 you scored 50% wins and 50% draws, and from +3 you converted 100% of the time, which is consistent with high-level technique, although the sample is small.</p>\n\n<p>Stylistically, your play is markedly maneuver‑ and prophylaxis‑oriented compared with the GM reference set. Your maneuvering ratio is 74.7 versus a GM 50.8 baseline, with constructive maneuvers at 33.9 against GM 14.3 and neutral maneuvers at 26.1 against GM 19.1. You also use latent prophylaxis far more frequently, at 37.4 compared with GM 21.7, and your total prophylaxis ratio is 46.9 versus GM 33.1. Relative to Tigran Petrosian, whose constructive maneuvers run at 16.1 and latent prophylaxis at 29.3, you are even more heavily oriented toward slow, anticipatory play and risk avoidance. This places you firmly in a “control first” strategic cluster, with fewer outright failures in prophylaxis than the GM average (0 failed vs GM 1.2 ratio), suggesting that your caution is usually justified rather than paralyzing.</p>\n\n<p>Your semantic control metrics also align with a positional-control specialist. Overall control-over-dynamics actions sit at 27.0 against the general GM 23.6 benchmark and are comparable to Mihail Tal’s 27.0 or Ding Liren’s 25.0 in that specific metric. You lean heavily on file‑sealing (14.8 vs GM 14.2) and king‑safety control (7.8 vs GM 4.2), closer to Ding’s 5.0 than to the lower Petrosian baseline of 4.6, indicating an above‑average concern for keeping your king secure while restricting counterplay. Your use of regrouping and space‑clamp ideas is also roughly in GM proportions. This shows a good sense for consolidating before seeking activity, and your higher “deferred initiative” ratio (27.8 vs GM 19.8, and above Petrosian’s 23.6 or Fischer’s 16.1) reinforces the picture of a player who prefers to neutralize all enemy play before striking.</p>\n\n<p>At the same time, your style is not purely quiet. You sacrifice significantly more often than the GM reference: total sacrifice actions at 17.4 versus GM 10.7, with tactical sacrifices at 4.3 vs 0.9 and speculative ones at 0.9 vs 0.3. Compared with Kasparov’s tactical sacrifice ratio of 1.1 and speculative 0.2, you are more willing to commit material when you perceive concrete justification. Your initiative‑related sacrifices (2.6 vs GM 0.6) and space sacrifices (3.5 vs GM 3.7) indicate that, once you judge your position safe and well‑coordinated, you are ready to shift gears into dynamic operations, somewhat reminiscent in spirit of Tal’s higher speculative and tactical‑initiative sacrifice figures (0.6 and 0.9) but starting from a more controlled, prophylactic background.</p>\n\n<p>Relative to strong GMs, your main stylistic gaps lie in forcing precision and structural choices. You reach clearly winning positions less often than the GM baseline (1.7 vs 6.8), and your forced‑move handling is well below their frequency (1.7 vs 6.8, compared with Kasparov’s 9.9 or Fischer’s 8.7), pointing to a tendency to favor controllable, low‑forcing positions over sharp tactical trees. Structurally, your integrity actions (5.2 vs GM 9.6) lag behind the GM sample while dynamic compromises (7.0 vs GM 5.5) are higher, suggesting you are more willing to accept structural concessions in exchange for piece activity and control. This is consistent with your preferred Black setups from the given sample—flexible, hypermodern structures beginning with …Nf6 and …b6 against 1.Nf3—where you cede some direct pawn presence in the center in return for long‑term piece play and queenside fianchetto plans.</p>\n\n<p>In sum, the integrated profile is of a high‑level Black player with GM‑like accuracy and a distinctive blend of Petrosian‑style prophylaxis and maneuvering with a Tal‑like willingness to sacrifice once the position is under control. To move closer to the GM reference clusters, the data suggests working on entering and handling more clearly winning positions, becoming more comfortable with high‑forcing continuations, and refining structural decisions so that your frequent dynamic ideas are backed by GM‑level pawn skeletons and conversion technique, especially in the endgame where your accuracy (0.847) trails your middlegame standard.</p>", "section-3-2-rating-llm": "<p>Your current performance profile points to a playing strength around 2450–2550 FIDE, with a central estimate near 2490. This aligns closely with the 2493.7 opposition estimate from your black results and is supported by your overall engine score of 0.883 and very low blunder rate of 0.8%. Given the tiny sample (only 120 moves total, three games), the statistical uncertainty is large; a realistic error margin is about ±120 Elo, and more games would narrow that considerably.</p>\n\n<p>Compared with a typical player in the next lower band (around 2300–2400), your strengths are already more GM-like in several areas. Your constructive maneuvering ratio of 33.9% is more than double Petrosian’s 16.1% and also exceeds Kasparov’s 13.6% and Karpov’s 15.7%, showing a highly maneuver‑oriented style. Your latent prophylaxis at 37.4% is well above Petrosian’s 29.3% and Ding’s 21.9%, and your kingsafety control at 7.8% is higher than all listed GMs (for example Kasparov 4.5, Ding 5.0), which is atypically sophisticated for sub‑GM levels.</p>\n\n<p>Relative to the next higher band (2600+), the main gaps are depth and consistency. Your forced move ratio of 1.7% is well below Fischer’s 8.7% and Kasparov’s 9.9, and your winning‑position frequency at 1.7% trails the GM reference of 6.8, suggesting fewer games where you convert sustained advantages. Your tension creation (1.7% vs GM 6.9) is also more modest. In short, your style already resembles a highly prophylactic, maneuvering IM/GM, but you likely have room to grow in generating and exploiting dynamic chances as your rating climbs.</p>", "section-4-1-white-openings-llm": "<p>The dataset for your White openings is currently empty, so we cannot evaluate which specific openings or variations are performing best or worst. With no recorded games as White in this sample, there are no win rates, frequencies, or performance ratios to compare against peers or any GM benchmarks. As a result, we cannot identify your strengths or weaknesses in particular opening families (such as 1.e4 or 1.d4 systems) or measure how your repertoire balance compares to model GM profiles. Once you have a meaningful sample of White games logged, we can analyze which openings yield the highest scoring percentages, where your results lag behind typical GM baselines, and how to adjust your repertoire toward the most effective systems for your style.</p>", "section-4-2-black-openings-llm": "<p>With Black you have only three games, all starting from similar queen’s‑fianchetto structures after 1.Nf3 Nf6 with ...b6 and ...Bb7. The best practical result comes from the line beginning 1.Nf3 Nf6 2.g3 b6 3.c4 Bb7 4.Bg2 c5, where you scored a win with a strong 0.929 accuracy. The other two move orders split: the sequence 1.Nf3 Nf6 2.c4 b6 3.g3 Bb7 4.Bg2 c5 led to a solid draw but with clearly lower accuracy at 0.869, while the game starting 1.Nf3 Nf6 2.g3 b6 3.Bg2 Bb7 4.c4 c5 actually produced your only loss despite your highest accuracy of 0.952. This suggests performance is dominated by individual game factors more than the exact move order in these related structures.</p>", "section-4-3-main-repertoires-llm": "<p>For White, there is no clear main repertoire yet: the dataset contains no repeated opening families or high‑volume lines with the white pieces. This suggests that your White choices are still experimental rather than structured around a core system. As your database grows, it will be important to identify which setups bring you the best accuracy and results and then consolidate around those.</p>\n\n<p>With Black, however, there is a clear strategic core. All your recorded games come from a similar structure after 1.Nf3 Nf6 followed by …b6, …Bb7, …c5 against a kingside fianchetto with g3 and Bg2. Even though the move orders differ slightly, the underlying idea is consistent: a queenside fianchetto combined with central pressure from …c5. The three games show a full result spectrum (one win, one draw, one loss) but relatively high accuracy in each (0.929, 0.869, and 0.952), indicating that you handle these positions with confidence. Because every Black game in the sample transposes into this same structural family, this kingside‑fianchetto vs. queenside‑fianchetto setup can be considered your main Black repertoire at this stage.</p>", "section-4-4-secondary-llm": "<p>Your secondary Black systems all arise from the same English/Réti structure after 1.Nf3 Nf6 with …b6 and …Bb7, but in slightly different move orders. Each line appears only once, so every result (win, draw, or loss) is based on a single game and cannot yet be treated as statistically reliable. Still, the accuracy figures are revealing. The loss with 1.Nf3 Nf6 2.g3 b6 3.Bg2 Bb7 4.c4 c5 reached 0.952 accuracy, actually your most precise effort in this structure despite the result. The win with 2.g3 b6 3.c4 Bb7 4.Bg2 c5 came with 0.929 accuracy, while the drawn game with 2.c4 b6 3.g3 Bb7 4.Bg2 c5 showed slightly lower accuracy at 0.869.</p>\n<p>Taken together, these games suggest that you handle this setup competently across different move orders, with no obvious weak spot in understanding. However, the one-game samples mean you should treat these lines as promising experimental weapons rather than proven mainstays until you’ve tested them in a larger number of games.</p>", "section-4-5-depth-llm": "<p>Your Black repertoire in these games revolves entirely around flexible systems after 1.Nf3, with every sample entering a similar fianchetto structure. The three recorded lines share almost identical move-orders, indicating very low variation diversity but a clearly defined comfort zone. Within that narrow slice, your accuracy is consistently high: the weakest game still reaches 0.869, while your best performance peaks at 0.952, with the remaining game at 0.929. This suggests that once you are in your preferred setup, you navigate the resulting middlegames with precision that is strong compared to a typical peer group.</p>\n\n<p>However, because all examples come from a single structural family, it is difficult to claim broad theoretical depth across different openings. Instead, the data points toward deep, practical familiarity with one cluster of positions rather than wide-ranging preparation. With no White games available in this dataset, your theoretical profile is currently asymmetric: Black preparation appears focused and accurate in a specific system, while your White repertoire depth cannot yet be assessed.</p>", "section-4-6-style-llm": "<p>Your black openings with 1…Nf6 and …b6 against 1.Nf3 lead to flexible, hypermodern structures that fit your overall style profile. These setups naturally encourage high maneuvering, and your maneuver total of 74.7% is much higher than the GM reference of 50.8%, with especially elevated constructive and neutral maneuvers. The typical …Bb7 and …c5 schemes coordinate well with your strong latent prophylaxis ratio of 37.4% versus 21.7% for GMs, as you often restrain plans rather than challenge them directly.</p>\n<p>The queenside fianchetto also highlights your emphasis on kingsafety and fileseal control, where your ratios are slightly above GM levels. Your initiative tends to be deferred (27.8% versus 19.8%), which matches these slower, more flexible openings: you wait for the position to mature before seizing the moment. At the same time, you are more sacrificial than the GM baseline (17.4% versus 10.7%), adding dynamic shots to an essentially positional framework. The low tension-creation (1.7% versus 6.9%) suggests you prefer controlled, prophylactic build-ups in these structures rather than sharp, early confrontations.</p>", "section-4-7-performance-llm": "<p>Your opening performance sample is very small, so any conclusions must be treated as tentative rather than definitive trends. With Black, all games arise from similar English/Reti-type positions after 1.Nf3 Nf6 with ...b6 and ...Bb7. Within that narrow family, the most successful move order was 1.Nf3 Nf6 2.g3 b6 3.c4 Bb7 4.Bg2 c5, where you scored 100% with 0.929 accuracy. That combination of result and precision suggests you were both comfortable and technically reliable in that structure.</p>\n<p>By contrast, the line 1.Nf3 Nf6 2.c4 b6 3.g3 Bb7 4.Bg2 c5 led to a draw with a clearly lower accuracy of 0.869, indicating more frequent inaccuracies despite a safe result. Even more paradoxically, in the loss after 1.Nf3 Nf6 2.g3 b6 3.Bg2 Bb7 4.c4 c5 you achieved your highest recorded accuracy at 0.952, hinting that the defeat likely stemmed from a limited number of critical errors rather than overall poor play. Taken together, these three games show that your Black repertoire here is conceptually coherent, but the results still fluctuate sharply from win to loss at similar or even higher accuracy, emphasizing the need for more games before drawing firm performance judgments.</p>", "section-4-8-takeaways-llm": "<p>Your Black repertoire sample is narrow but thematically consistent: all games arise after 1.Nf3 Nf6 with an early …b6 and …Bb7 against a kingside fianchetto, differing mainly in the move order of c4 and Bg2. Performance outcomes are evenly spread across win, draw, and loss, yet accuracy remains high in every line (0.869–0.952), indicating that you generally handle these structures better than your results might suggest. The two move orders starting 1.Nf3 Nf6 2.g3 b6 have produced both your highest win rate (100%) and your highest accuracy in a loss (0.952), so there is no clear “bad” branch here, only small-sample volatility. A practical takeaway is that your current Black setup versus 1.Nf3 and a kingside fianchetto is coherent and reliable enough to keep, with move-order flexibility already built in, while future work can focus on expanding coverage beyond this single family of positions.</p>", "section-5-1-priorities-llm": "<p>Your main training priority is to convert advantages more efficiently in the endgame. Your endgame accuracy score of 0.847 is clearly lower than your middlegame score of 0.942, and your average loss jumps from 5.84 to 15.25 there. Focus on technical endings and practicing winning queenless positions, where your accuracy currently lags behind your queenful play by the same margin.</p>\n\n<p>Structurally, your “integrity” ratio of 5.2 is well below the GM reference of 9.6, while your dynamic structural play at 7.0 is higher than the GM 5.5. This suggests a tilt toward dynamic structures at the cost of long-term solidity, so targeted work on maintaining healthy pawn structures should be a priority. Similarly, your tension creation ratio of 1.7 is far lower than the GM 6.9, while neutral tension moves are much higher than the GM baseline, so you should train to create and keep tension instead of resolving it too quickly.</p>\n\n<p>Finally, your sacrifice total ratio of 17.4 is significantly above the GM 10.7, especially in tactical and speculative sacrifices. Prioritize checking these decisions more rigorously to ensure they meet GM-quality soundness rather than relying on intuition alone.</p>", "section-5-2-study-llm": "<p>Your middlegame play already looks strong: a 0.942 middlegame accuracy and 97.5% top‑3 engine match suggest you calculate reliably when the position is rich in pieces. To convert that into more points, base your study around queenless and endgame positions, where your 0.847 score and higher average loss show a relative drop. Focus on simplified structures from your own games: take endings reached from your 1…Nf6, …b6 setups and analyze them with an engine, paying special attention to pawn breaks and king activity.</p>\n\n<p>Your exchange handling is quite GM‑like in quality (0.0 ratio of inaccurate and bad exchanges vs GM 0.6 and 0.4), but you reach significantly fewer exchange decisions overall (2.6 vs GM 4.3) and far fewer forced positions and winning positions (1.7 vs GM 6.8). In training, deliberately steer games into forcing lines and critical exchanges instead of deferring the initiative (27.8 vs GM 19.8). Choose opening repertoires and training positions that emphasize tension creation (currently 1.7 vs GM 6.9) and dynamic structural play, where you are already above GM in dynamic structural decisions (7.0 vs 5.5) and in total sacrifices (17.4 vs GM 10.7), then work on calculating the long‑term consequences more deeply, especially as queens come off.</p>", "section-5-3-habits-llm": "<p>Your style already leans toward high control and accuracy, so your habits should reinforce that strength. With overall engine top-3 alignment at 97.5% and only 0.8% blunders, you can afford to spend less time “double-checking the obvious” and allocate more thinking time to the critical transitions, especially moving from a strong middlegame (0.942 accuracy) into a more error-prone endgame (0.847). A practical habit is to set a time trigger: whenever queens come off or mass exchanges loom, consciously slow down and recalculate key pawn races and king activity.</p>\n<p>Your ratios of constructive maneuvers (33.9 vs GM 14.3) and latent prophylaxis (37.4 vs GM 21.7) show you often out-control typical GM baselines, but this can also delay seizing the initiative: your initiative is mostly deferred (27.8 vs GM 19.8) and tension creation is lower (1.7 vs GM 6.9). To balance this, adopt a “checkpoint” habit whenever you have a small plus (+1 or +3): explicitly ask whether a concrete pawn break or sacrifice is justified, instead of defaulting to another improving move.</p>\n<p>Finally, your sacrifice ratio (17.4 vs GM 10.7) suggests a higher-risk profile. After each speculative sacrifice, train yourself to do a quick three-line verification (best defence included) before committing. This single habit will convert many of your brave ideas into objectively sound ones.</p>", "section-6-1-vs-white-llm": "<p>Against this player as Black, you should aim for positions where your early initiative with White can challenge their reliance on maneuvering and prophylaxis. Their maneuver ratio of 74.7% is far above the GM 50.8%, with especially high constructive (33.9 vs 14.3) and neutral (26.1 vs 19.1) moves. That suggests they are comfortable slowly improving pieces rather than immediately contesting the center. Choose openings that create direct central clashes and early tension; their tension creation is only 1.7% versus the GM 6.9, so they are less likely to thrive in sharp, hanging-pawn or IQP structures.</p>\n\n<p>Their latent prophylaxis is very high (37.4 vs GM 21.7), and kingsafety control is elevated (7.8 vs 4.2), so slow, strategic attacks will be hard to land. Instead, use open games where concrete calculation matters and their endgame accuracy (0.847 vs 0.942 in the middlegame) can be tested. Structurally, they emphasize dynamic over integrity (7.0 vs GM 5.5 dynamic, but 5.2 vs 9.6 integrity), so go for sound, solid pawn structures and force them to prove compensation. Avoid quiet fianchetto systems like the ones seen in their Black games; opt for sharper e4 or d4 main lines that generate early contact and limit their comfortable regrouping (7.0 vs 6.9).</p>", "section-6-2-vs-black-llm": "<p>As Black this player consistently steers toward Queen’s Indian–style setups with …Nf6, …b6, …Bb7, and …c5. Their middlegame accuracy is very high (0.942), and constructive maneuvering is far more frequent than typical GMs (33.9% vs 14.3%), supported by elevated prophylaxis (46.9% vs 33.1%), especially latent (37.4% vs 21.7%). You should not expect cheap shots to work; instead, aim for structures where long-term plans matter more than concrete tactics.</p>\n\n<p>At the same time, their tension creation is much lower than GM norms (1.7% vs 6.9%), while neutral tension decisions are much higher (24.3% vs 9.1%). Exploit this by choosing openings where White can maintain central and kingside tension: e.g., delayed pawn breaks in flexible English or Réti systems against their …b6/…Bb7 schemes. The player’s initiative is more deferred than GM averages (27.8% vs 19.8%), so you can grab space early without fearing immediate dynamic punishment.</p>\n\n<p>Finally, endgame accuracy drops compared to the middlegame (0.847 vs 0.942), and structural integrity is lower than GMs (5.2% vs 9.6%). Aim for slightly better endgames with enduring space or structural edges rather than sharp, tactical slugfests.</p>", "section-6-3-middlegame-llm": "<p>In the middlegame you should steer positions toward the opponent’s structural and tension weaknesses. Their tension creation ratio is far below GM norms (1.7 vs 6.9), while neutral tension handling is much higher (24.3 vs 9.1). Aim for positions where pawn tension must be maintained and resolved precisely; they are less practiced at actively creating it. Similarly, target their slightly lower structural integrity ratio (5.2 vs 9.6) by provoking pawn weaknesses and then switching play before they can consolidate.</p>\n\n<p>They maneuver far more than GMs overall (74.7 vs 50.8), with especially high constructive and neutral maneuver ratios. This suggests you can benefit from sharp, forcing options: their forced-move ratio is far below GM levels (1.7 vs 6.8), so complicating the position with tactical motifs and limited safe moves is promising. At the same time, their sacrifice activity is notably higher than GM baselines (total 17.4 vs 10.7, with elevated tactical and speculative sacrifices). When you have the initiative, keep your king safer than usual and avoid loosening moves; make them prove each sacrifice with concrete calculation. Finally, exploit their high latent prophylaxis (37.4 vs 21.7) by playing flexible, multi-purpose moves that are hard to anticipate, then striking dynamically once they have committed to maneuvering rather than direct counterplay.</p>", "section-6-4-endgame-llm": "<p>Your endgame and queenless play currently lags behind your middlegame, with an accuracy score of 0.847 compared to 0.942 earlier in the game and a much higher average loss of 15.25 versus 5.84. This drop suggests that opponents should aim to simplify into endgames where your precision falls off. However, your maneuver quality is a genuine strength: 33.9% of your moves are constructive, more than double the GM reference of 14.3, and your overall maneuver ratio of 74.7 significantly exceeds the GM 50.8. This means that in endgames you often improve your pieces more actively than both peers and GMs.</p>\n<p>Structurally, you keep pawn integrity below GM levels (5.2 vs 9.6), but compensate by playing more dynamically (7.0 vs 5.5), inviting counterplay rather than relying on pure solidity. In clearly winning or losing endgames, your sample is small, but you have reached winning positions much less frequently than the GM baseline (1.7 vs 6.8) while completely avoiding objectively losing ones (0.0 vs 4.4). Opponents should therefore steer toward technical, simplified endings and test your accuracy rather than your creativity.</p>", "section-6-5-psychology-llm": "<p>Your psychological profile is defined by controlled risk with occasional sharp spikes. As Black, your games are split evenly between small, medium, and big swings, suggesting you are comfortable navigating volatile positions but do not consistently engineer “smooth crushes” or “smooth collapses.” Compared with GMs, you defer the initiative more often (27.8% vs 19.8%) and almost never seize it prematurely (0.0% vs 1.1%), indicating a cautious, timing‑based approach rather than impulsive aggression. You also create tension far less frequently than GMs (1.7% vs 6.9%) and sit in neutral tension much more (24.3% vs 9.1%), reinforcing a preference for stability and reaction.</p>\n<p>Once the position justifies it, however, you are significantly more sacrificial than GMs overall (17.4% vs 10.7%), especially in tactical (4.3% vs 0.9%) and initiative‑based sacrifices (2.6% vs 0.6%). These are rarely inaccurate (0.0% vs 0.1%), suggesting confidence when the calculation is clear. With a +3 advantage as Black, your conversion is perfect so far (100% wins), and even +1 is handled reliably (50% wins, 50% draws). Opponents should avoid allowing you clean, calculable sacrificial opportunities; instead, steer for positions with lingering tension and unclear pawn structures, where your lower tension‑creation rate makes it harder for you to dictate chaos on your own terms.</p>", "section-6-6-gameplan-llm": "<p>As your opponent, I would aim for flexible queen’s pawn or Reti setups that lead to early piece play and tension, because your opening sample is tiny and your strengths only clearly emerge later. With Black you have repeated 1…Nf6 and …b6/…Bb7 with solid accuracy, so as White I would avoid allowing you to reach these familiar structures, steering instead toward sharper or more central pawn fights where your preparation is less certain.</p>\n<p>In the middlegame I would keep the position fluid and tactically charged. Your constructive maneuvers and latent prophylaxis appear at much higher ratios than GM baselines (33.9 vs 14.3 and 37.4 vs 21.7), and your tension creation is far lower (1.7 vs 6.9). That suggests you are more comfortable improving pieces and controlling than navigating raw complications. I would therefore create multiple pawn breaks and open files early, pushing you away from your preferred maneuvering.</p>\n<p>In the endgame your queenless accuracy (0.847) drops compared to the middlegame (0.942), so I would trade queens and grind slightly better structures, trusting that long, tense endings will yield chances as your precision declines over many moves.</p>"}, "visualizations": {"viz-forced-moves-axis": {"player": {"name": "You", "value": 1.7}, "gms": [{"name": "Tigran Petrosian", "value": 3.7}, {"name": "Garry Kasparov", "value": 9.9}, {"name": "Anatoly Karpov", "value": 5.9}, {"name": "Mihail Tal", "value": 5.4}, {"name": "Ding Liren", "value": 7.0}, {"name": "Bobby Fischer", "value": 8.7}]}, "viz-positions-axis": {"player": {"name": "You", "value": 1.7}, "gms": [{"name": "Tigran Petrosian", "value": 1.8}, {"name": "Garry Kasparov", "value": 9.6}, {"name": "Anatoly Karpov", "value": 8.2}, {"name": "Mihail Tal", "value": 1.8}, {"name": "Ding Liren", "value": 6.8}, {"name": "Bobby Fischer", "value": 12.7}]}, "viz-maneuver-axis": {"player": {"name": "You", "value": 74.7}, "gms": [{"name": "Tigran Petrosian", "value": 55.7}, {"name": "Garry Kasparov", "value": 47.4}, {"name": "Anatoly Karpov", "value": 52.1}, {"name": "Mihail Tal", "value": 54.2}, {"name": "Ding Liren", "value": 50.4}, {"name": "Bobby Fischer", "value": 44.7}]}, "viz-prophylaxis-axis": {"player": {"name": "You", "value": 46.9}, "gms": [{"name": "Tigran Petrosian", "value": 41.1}, {"name": "Garry Kasparov", "value": 29.3}, {"name": "Anatoly Karpov", "value": 32.5}, {"name": "Mihail Tal", "value": 35.3}, {"name": "Ding Liren", "value": 32.5}, {"name": "Bobby Fischer", "value": 27.8}]}, "viz-semantic-control-axis": {"player": {"name": "You", "value": 35.7}, "gms": [{"name": "Tigran Petrosian", "value": 29.1}, {"name": "Garry Kasparov", "value": 34.0}, {"name": "Anatoly Karpov", "value": 30.3}, {"name": "Mihail Tal", "value": 40.9}, {"name": "Ding Liren", "value": 36.6}, {"name": "Bobby Fischer", "value": 32.7}]}, "viz-cod-axis": {"player": {"name": "You", "value": 27.0}, "gms": [{"name": "Tigran Petrosian", "value": 21.5}, {"name": "Garry Kasparov", "value": 24.0}, {"name": "Anatoly Karpov", "value": 21.8}, {"name": "Mihail Tal", "value": 27.0}, {"name": "Ding Liren", "value": 25.0}, {"name": "Bobby Fischer", "value": 22.3}]}, "viz-initiative-axis": {"player": {"name": "You", "value": 3.5}, "gms": [{"name": "Tigran Petrosian", "value": 2.5}, {"name": "Garry Kasparov", "value": 4.5}, {"name": "Anatoly Karpov", "value": 3.3}, {"name": "Mihail Tal", "value": 3.3}, {"name": "Ding Liren", "value": 4.9}, {"name": "Bobby Fischer", "value": 2.6}]}, "viz-tension-axis": {"player": {"name": "You", "value": 1.7}, "gms": [{"name": "Tigran Petrosian", "value": 8.6}, {"name": "Garry Kasparov", "value": 7.7}, {"name": "Anatoly Karpov", "value": 7.3}, {"name": "Mihail Tal", "value": 5.7}, {"name": "Ding Liren", "value": 7.1}, {"name": "Bobby Fischer", "value": 5.1}]}, "viz-structural-axis": {"player": {"name": "You", "value": 5.2}, "gms": [{"name": "Tigran Petrosian", "value": 10.2}, {"name": "Garry Kasparov", "value": 10.7}, {"name": "Anatoly Karpov", "value": 10.2}, {"name": "Mihail Tal", "value": 7.6}, {"name": "Ding Liren", "value": 9.3}, {"name": "Bobby Fischer", "value": 9.5}]}, "viz-sacrifice-axis": {"player": {"name": "You", "value": 17.4}, "gms": [{"name": "Tigran Petrosian", "value": 11.9}, {"name": "Garry Kasparov", "value": 10.1}, {"name": "Anatoly Karpov", "value": 9.0}, {"name": "Mihail Tal", "value": 11.4}, {"name": "Ding Liren", "value": 10.4}, {"name": "Bobby Fischer", "value": 11.3}]}}, "tag_explanations": {"Constructive maneuver": "Reroute that improves piece harmony and future activity.", "Constructive maneuver (prepare)": "Quiet reroute that sets up a later plan or breakthrough.", "Neutral maneuver": "Repositioning with limited impact—neither improves nor harms much.", "Misplaced maneuver": "Reroute that wastes time or worsens coordination.", "Opening maneuver": "Early-game reroute to better squares after initial development.", "Overall maneuver ratio": "Share of moves classified as maneuvers.", "Direct prophylactic": "Move that directly stops the opponent’s immediate threat or plan.", "Latent prophylactic": "Restricts future ideas before they become concrete threats.", "Meaningless prophylactic": "Prophylaxis that addresses no real threat.", "Failed prophylactic": "Attempted prevention that still allows the threat.", "Overall prophylaxis ratio": "Share of moves aimed at prevention.", "Control: simplify": "Trades or simplifications to reduce complexity.", "Control: plan kill": "Stops the opponent’s main strategic plan.", "Control: freeze/bind": "Limits opponent mobility and counterplay.", "Control: blockade passed pawn": "Holds back or fixes a passed pawn.", "Control: file seal": "Secures or contests an open/semi-open file.", "Control: king safety shell": "Strengthens the king’s pawn and square cover.", "Control: space clamp": "Claims key squares to restrict counterplay.", "Control: regroup/consolidate": "Re-coordinates pieces after operations.", "Control: slowdown": "Tempers the position to avoid sharp forcing lines.", "Overall semantic control ratio": "Share of moves aimed at positional control.", "Control over dynamics (overall)": "Moves chosen to shape the game’s tactical temperature.", "CoD: file seal": "Dynamic control by contesting files before tactics explode.", "CoD: freeze/bind": "Dynamic restriction to keep the opponent cramped.", "CoD: king safety": "Dynamic tweaks that keep the king safe during tactics.", "CoD: regroup/consolidate": "Dynamic re-coordination to stabilize.", "CoD: plan kill": "Dynamic strike that halts opponent initiative.", "CoD: blockade passed pawn": "Dynamic blockading of a passed pawn in sharp play.", "CoD: simplify": "Trades to cool down complications.", "CoD: space clamp": "Dynamic space grab to limit enemy breaks.", "CoD: slowdown": "Tempo moves to cool the position.", "Initiative attempt": "Actively driving threats to keep the move-by-move pressure.", "Deferred initiative": "Postpones attack to finish prep or development.", "Premature attack": "Attack launched before position is ready.", "C-file pressure": "Initiative built around control of the c-file.", "Tension creation": "Creates or sustains pawn/piece tension.", "Neutral tension creation": "Tension that neither helps nor harms notably.", "Structural integrity": "Keeps pawn structure healthy and flexible.", "Structural compromise (dynamic)": "Accepts structural weakness for activity.", "Structural compromise (static)": "Weak structure without clear compensation.", "Tactical sacrifice": "Material given for concrete tactical gain.", "Positional sacrifice": "Material invested for long-term positional edge.", "Inaccurate tactical sacrifice": "Dubious sac without enough payoff.", "Speculative sacrifice": "High-risk sac with unclear compensation.", "Desperate sacrifice": "Last-ditch sac from a bad position.", "Tactical combination sacrifice": "Sac as part of a forcing combination.", "Tactical initiative sacrifice": "Sac to keep initiative flowing.", "Positional structure sacrifice": "Material for structural damage to opponent.", "Positional space sacrifice": "Material for space or central control.", "Overall sacrifice ratio": "Share of moves involving sacrifices.", "Accurate knight/bishop exchange": "Trade that improves your minor-piece balance.", "Inaccurate knight/bishop exchange": "Trade that hands the opponent better minors.", "Bad knight/bishop exchange": "Clearly harmful minor-piece trade.", "Total exchange frequency": "All tagged minor-piece exchanges.", "Forced moves": "Moves compelled by tactics to avoid big loss.", "Winning position handling": "Technique in converting clearly winning spots.", "Losing position handling": "Resilience when position is bad.", "Tactical opportunities found": "Tactics spotted and exploited.", "Tactical opportunities missed": "Tactics available but not taken.", "Tactical conversion rate": "Share of tactics you convert."}};

      // Whitelisted GMs (must exist in "current GM metrics" folder) with photo paths
      const GM_PHOTO_MAP = {
        'bobby fischer': '../../assets/bobby-fischer.jpg',
        'garry kasparov': '../../assets/garry-kasparov.jpg',
        'anatoly karpov': '../../assets/anatoly-karpov.jpeg',
        'mihail tal': '../../assets/mihail-tal.jpg',
        'tigran petrosian': '../../assets/tigran-petrosian.jpg',
        'ding liren': '../../assets/ding-liren.jpg',
      };

      // ========== GM AXIS VISUALIZATION LIBRARY ==========
      class GMAxisViz {
        constructor() {
          this.visualizations = [];
        }

        /**
         * Create an axis visualization
         * @param {string} containerId - ID of the container element
         * @param {Object} config - Configuration object
         *   - min: minimum value for the axis
         *   - max: maximum value for the axis
         *   - player: { name, value }
         *   - gms: [{ name, value }, ...]
         */
        create(containerId, config) {
          const container = document.getElementById(containerId);
          if (!container) {
            console.warn(`Container ${containerId} not found`);
            return;
          }

          const player = config.player;
          const gms = this.filterAndEnrichGMs(config.gms || []);
          const { min, max } = this.computeRange(config, gms, player);
          const range = max - min;

          // Clear existing content
          container.innerHTML = '';

          // Create GM markers
          if (gms && gms.length > 0) {
            gms.forEach(gm => {
              const percentage = this.calculatePercentage(gm.value, min, range);
              const marker = this.createMarker(gm.name, gm.value, percentage, false, gm.photo);
              container.appendChild(marker);
            });
          }

          // Create player marker
          if (player) {
            const playerPercentage = this.calculatePercentage(player.value, min, range);
            const playerMarker = this.createMarker(player.name, player.value, playerPercentage, true);
            container.appendChild(playerMarker);
          }

          this.visualizations.push({ containerId, config });
        }

        filterAndEnrichGMs(gms) {
          return gms
            .map(gm => {
              if (!gm || !gm.name) return null;
              const key = gm.name.trim().toLowerCase();
              const photo = GM_PHOTO_MAP[key];
              if (!photo) return null; // Filter out non-whitelisted GMs
              return { ...gm, photo };
            })
            .filter(Boolean);
        }

        computeRange(config, gms, player) {
          const gmValues = gms
            .map(gm => gm && typeof gm.value === 'number' ? gm.value : null)
            .filter(v => v !== null);

          let min = typeof config.min === 'number' ? config.min : null;
          let max = typeof config.max === 'number' ? config.max : null;

          if (gmValues.length > 0) {
            const gmMin = Math.min(...gmValues);
            const gmMax = Math.max(...gmValues);
            min = min === null ? gmMin : Math.min(min, gmMin);
            max = max === null ? gmMax : Math.max(max, gmMax);
          }

          const playerVal = player && typeof player.value === 'number' ? player.value : null;
          if (playerVal !== null) {
            min = min === null ? playerVal : Math.min(min, playerVal);
            max = max === null ? playerVal : Math.max(max, playerVal);
          }

          // Fallback if still null (no data)
          if (min === null || max === null) {
            min = 0;
            max = 1;
          }

          // Avoid zero range
          if (min === max) {
            min -= 1;
            max += 1;
          }

          return { min, max };
        }

        calculatePercentage(value, min, range) {
          if (range === 0) return 50; // Default to center if no range
          const percentage = ((value - min) / range) * 100;
          // Clamp between 2% and 98% to prevent edge overflow
          return Math.max(2, Math.min(98, percentage));
        }

        createMarker(name, value, percentage, isPlayer, photo) {
          const marker = document.createElement('div');
          marker.className = isPlayer ? 'player-marker' : 'gm-marker';
          marker.style.left = `${percentage}%`;

          const label = document.createElement('div');
          label.className = isPlayer ? 'player-marker-label' : 'gm-marker-label';
          if (photo && !isPlayer) {
            const img = document.createElement('img');
            img.src = photo;
            img.alt = name;
            img.className = 'gm-marker-avatar';
            label.appendChild(img);
          }
          const nameSpan = document.createElement('span');
          nameSpan.textContent = name;
          label.appendChild(nameSpan);

          const dot = document.createElement('div');
          dot.className = isPlayer ? 'player-marker-dot' : 'gm-marker-dot';

          const line = document.createElement('div');
          line.className = isPlayer ? 'player-marker-line' : 'gm-marker-line';

          const valueLabel = document.createElement('div');
          valueLabel.className = isPlayer ? 'player-marker-value' : 'gm-marker-value';
          valueLabel.textContent = this.formatValue(value);

          marker.appendChild(label);
          marker.appendChild(dot);
          marker.appendChild(line);
          marker.appendChild(valueLabel);

          return marker;
        }

        formatValue(value) {
          if (typeof value === 'number') {
            const fixed = value.toFixed(1);
            return value % 1 === 0 ? `${Math.round(value)}%` : `${fixed}%`;
          }
          return value;
        }

        /**
         * Batch create multiple visualizations
         * @param {Object} configs - Object with containerId as key and config as value
         */
        createMultiple(configs) {
          Object.keys(configs).forEach(containerId => {
            this.create(containerId, configs[containerId]);
          });
        }

        /**
         * Update an existing visualization
         * @param {string} containerId - ID of the container element
         * @param {Object} newConfig - New configuration
         */
        update(containerId, newConfig) {
          const index = this.visualizations.findIndex(v => v.containerId === containerId);
          if (index !== -1) {
            this.visualizations[index].config = newConfig;
            this.create(containerId, newConfig);
          }
        }

        /**
         * Remove all visualizations
         */
        clear() {
          this.visualizations.forEach(viz => {
            const container = document.getElementById(viz.containerId);
            if (container) {
              container.innerHTML = '';
            }
          });
          this.visualizations = [];
        }
      }

      // Init visualization library
      vizLib = new GMAxisViz();

      // Prefer inline payload injected by generator; otherwise fetch from API.
      if (window.__PHASE2_INLINE_PAYLOAD__) {
        const payload = window.__PHASE2_INLINE_PAYLOAD__;
        TAG_EXPLAINERS = { ...DEFAULT_TAG_EXPLAINERS, ...(payload.tag_explanations || {}) };
        if (window.fillReportData) {
          window.fillReportData(payload);
        }
        attachTagHelps();
      } else {
        loadReportData();
        attachTagHelps();
      }
    });
  </script>
</body>
</html>
