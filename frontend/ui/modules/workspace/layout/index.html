<template id="workspace-template">
    <div class="workspace-container">
        <aside class="workspace-sidebar">
            <div class="sidebar-header">
                <button id="new-folder-btn" class="btn-primary btn-sm">+ New Folder</button>
                <button id="new-study-btn" class="btn-primary btn-sm">+ New Study</button>
                <div class="workspace-search-row">
                    <input id="workspace-search-input" type="text" placeholder="Search folders / studies">
                    <button id="workspace-search-clear" type="button" aria-label="Clear search">Ã—</button>
                </div>
            </div>
            <nav id="folder-tree" class="folder-tree">
                <!-- Recursive folder tree will be injected here -->
            </nav>
            <div id="logout-button-container"></div>
        </aside>
        <main class="workspace-main">
            <header class="main-header">
                <div class="breadcrumb" id="breadcrumb">
                    <span class="breadcrumb-item" data-id="root">Root</span>
                </div>
                <div class="path-jump">
                    <input id="path-input" type="text" placeholder="root/..." autocomplete="off">
                </div>
                <div class="view-options">
                    <div id="sort-toggles-container"></div>
                </div>
            </header>
            <div id="test-sign-container"></div>
            <div id="items-grid" class="items-grid">
                <!-- Items (folders/studies) will be injected here -->
            </div>
        </main>
    </div>
</template>

<template id="folder-item-template">
    <div class="grid-item folder-item" data-id="{{id}}">
        <div class="item-icon">
            <svg viewBox="0 0 24 24" width="48" height="48"><path fill="currentColor" d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/></svg>
        </div>
        <div class="item-info">
            <span class="item-title">{{title}}</span>
            <span class="item-error"></span>
            <span class="item-meta">{{updated_at}}</span>
        </div>
    </div>
</template>

<template id="study-item-template">
    <div class="grid-item study-item" data-id="{{id}}">
        <div class="item-icon">
            <svg viewBox="0 0 24 24" width="48" height="48"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z"/></svg>
        </div>
        <div class="item-info">
            <span class="item-title">{{title}}</span>
            <span class="item-error"></span>
            <span class="item-meta">{{updated_at}}</span>
        </div>
    </div>
</template>

<template id="create-modal-template">
    <div class="modal-overlay">
        <div class="modal-card window-draggable">
            <div class="modal-header window-focus-target">
                <h3>Create New</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Type</label>
                    <select id="new-type">
                        <option value="folder">Folder</option>
                        <option value="study">Study</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="new-title" placeholder="Enter title" required>
                    <div id="new-title-error" class="form-error"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-text modal-close">Cancel</button>
                <button id="confirm-create" class="btn-primary">Create</button>
            </div>
        </div>
    </div>
</template>

<template id="node-actions-template">
    <div class="modal-overlay">
        <div class="modal-card action-card window-draggable">
            <div class="modal-header window-focus-target">
                <div class="modal-title-group">
                    <span class="modal-eyebrow"></span>
                    <h3 class="modal-title"></h3>
                </div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body action-body">
                <button class="action-btn" data-action="move">Move</button>
                <button class="action-btn" data-action="rename">Rename</button>
                <button class="action-btn danger" data-action="delete">Delete</button>
            </div>
        </div>
    </div>
</template>

<template id="rename-node-template">
    <div class="modal-overlay">
        <div class="modal-card window-draggable">
            <div class="modal-header window-focus-target">
                <h3>Rename</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="rename-title" placeholder="Enter title" required>
                    <div id="rename-title-error" class="form-error"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-text modal-close">Cancel</button>
                <button id="confirm-rename" class="btn-primary">Save</button>
            </div>
        </div>
    </div>
</template>

<template id="move-node-template">
    <div class="modal-overlay">
        <div class="modal-card move-card window-draggable">
            <div class="modal-header window-focus-target">
                <h3>Move To</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Destination</label>
                    <select id="move-destination"></select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-text modal-close">Cancel</button>
                <button id="confirm-move" class="btn-primary">Move</button>
            </div>
        </div>
    </div>
</template>

<template id="delete-confirm-template">
    <div class="modal-overlay">
        <div class="modal-card confirm-card window-draggable">
            <div class="modal-header window-focus-target">
                <h3>Delete Study</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p class="confirm-text">Are you sure you want to delete?</p>
            </div>
            <div class="modal-footer">
                <button class="btn-text modal-close">Cancel</button>
                <button id="confirm-delete" class="btn-danger">Yes</button>
            </div>
        </div>
    </div>
</template>

<template id="move-confirm-template">
    <div class="modal-overlay">
        <div class="modal-card confirm-card window-draggable">
            <div class="modal-header window-focus-target">
                <h3>Move Item</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p class="confirm-text" id="move-confirm-text"></p>
            </div>
            <div class="modal-footer">
                <button class="btn-text modal-close">Cancel</button>
                <button id="confirm-move-modal" class="btn-primary">Yes</button>
            </div>
        </div>
    </div>
</template>
