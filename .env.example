# CataChess Environment Configuration
# SECURITY: This is a template file. Copy to .env and set actual values.
# NEVER commit .env file with real credentials to version control!

# ===== Basic =====
ENV=dev
# SECURITY: Set DEBUG=false in production!
DEBUG=true

# ===== CORS =====
# Comma-separated list of allowed origins
# For development: "http://localhost:3000,http://localhost:5173"
# For production: Set your actual domain(s)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:5174

# ===== Engine (Legacy Single-Spot Mode) =====
# SECURITY: Remove default values - set your actual engine URL
ENGINE_URL=
ENGINE_TIMEOUT=60

# ===== Multi-Spot Engine (NEW) =====
# Enable multi-spot mode with automatic failover
ENABLE_MULTI_SPOT=false

# Option 1: Define spots via environment variable (JSON array)
# ENGINE_SPOTS='[{"id":"cn-shanghai","url":"http://192.168.40.33:8001","priority":100},{"id":"cn-local","url":"http://192.168.40.41:5000","priority":90}]'

# Option 2: Use backend/spots.json file (recommended for multiple spots)
# Just set ENABLE_MULTI_SPOT=true and create backend/spots.json

# Multi-spot timeout and retry settings
SPOT_REQUEST_TIMEOUT=30
SPOT_MAX_RETRIES=2

# ===== Database =====
# SECURITY: Required! Set your actual database connection string
# For Railway: This is automatically provided by Railway PostgreSQL plugin
# For local dev: postgresql://user:password@localhost:5432/dbname
DATABASE_URL=

# ===== Security =====
# SECURITY: CRITICAL! Generate a strong random secret key for production
# Use: openssl rand -hex 32
# Or: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ===== Email (Resend) =====
# For sending verification emails
RESEND_API_KEY=
RESEND_FROM_EMAIL=noreply@catachess.com
VERIFICATION_CODE_EXPIRE_MINUTES=15
VERIFICATION_CODE_LENGTH=6

# ===== Storage =====
# DATA_ROOT=data

# ===== Example: Enable Multi-Spot Mode =====
#
# To enable multi-spot mode:
# 1. Set ENABLE_MULTI_SPOT=true
# 2. Either:
#    a) Set ENGINE_SPOTS with JSON array (see above), OR
#    b) Create backend/spots.json with your spot configurations
#
# Example spots.json:
# {
#   "spots": [
#     {
#       "id": "cn-shanghai",
#       "url": "http://192.168.40.33:8001",
#       "region": "cn-east",
#       "priority": 100,
#       "enabled": true
#     },
#     {
#       "id": "cn-local",
#       "url": "http://192.168.40.41:5000",
#       "region": "cn-local",
#       "priority": 90,
#       "enabled": true
#     }
#   ]
# }
#
# The system will automatically:
# - Route requests to the best available spot
# - Failover to backup spots on timeout/error
# - Track metrics (latency, success rate) per spot
# - Retry failed requests up to SPOT_MAX_RETRIES times
