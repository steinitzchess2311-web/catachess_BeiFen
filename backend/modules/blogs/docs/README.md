# Blogs Module

åšå®¢ç³»ç»Ÿæ¨¡å—ï¼Œä¸ºå‰ç«¯ BlogsPage æä¾›åç«¯æ”¯æŒã€‚

## ğŸ“ æ¨¡å—ç»“æ„ï¼ˆè§„åˆ’ï¼‰

```
blogs/
â”œâ”€â”€ __init__.py                 # æ¨¡å—åˆå§‹åŒ–
â”œâ”€â”€ README.md                   # æ¨¡å—è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ api.md                      # API ç«¯ç‚¹è¯¦ç»†è¯´æ˜
â”‚
â”œâ”€â”€ api/                        # API è·¯ç”±å±‚
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ router.py               # FastAPI è·¯ç”±å®šä¹‰
â”‚
â”œâ”€â”€ db/                         # æ•°æ®åº“å±‚
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py               # SQLAlchemy æ¨¡å‹
â”‚   â””â”€â”€ migrations/             # Alembic è¿ç§»è„šæœ¬
â”‚
â”œâ”€â”€ schemas/                    # Pydantic æ¨¡å¼
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ article.py              # æ–‡ç« ç›¸å…³æ¨¡å¼
â”‚   â”œâ”€â”€ category.py             # åˆ†ç±»ç›¸å…³æ¨¡å¼
â”‚   â””â”€â”€ comment.py              # è¯„è®ºç›¸å…³æ¨¡å¼
â”‚
â”œâ”€â”€ services/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ article_service.py      # æ–‡ç« ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ search_service.py       # æœç´¢æœåŠ¡
â”‚   â””â”€â”€ upload_service.py       # å›¾ç‰‡ä¸Šä¼ æœåŠ¡
â”‚
â””â”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
    â”œâ”€â”€ __init__.py
    â””â”€â”€ test_articles.py
```

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½
- âœ… æ–‡ç«  CRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰
- âœ… åˆ†ç±»ç®¡ç†
- âœ… æ–‡ç« ç½®é¡¶
- âœ… å…¨æ–‡æœç´¢
- âœ… å°é¢å›¾ç‰‡ä¸Šä¼ 

### æ‰©å±•åŠŸèƒ½ï¼ˆæœªæ¥ï¼‰
- â³ ç”¨æˆ·åšå®¢å‘å¸ƒ
- â³ è¯„è®ºç³»ç»Ÿ
- â³ ç‚¹èµç³»ç»Ÿ
- â³ æ–‡ç« ç»Ÿè®¡

## ğŸ“Š æ•°æ®æ¨¡å‹

### ä¸»è¦è¡¨
1. **blog_articles** - æ–‡ç« ä¸»è¡¨
2. **blog_categories** - åˆ†ç±»è¡¨
3. **blog_comments** - è¯„è®ºè¡¨ï¼ˆæœªæ¥ï¼‰
4. **blog_likes** - ç‚¹èµè¡¨ï¼ˆæœªæ¥ï¼‰

è¯¦è§ `api.md` ä¸­çš„æ•°æ®åº“è®¾è®¡éƒ¨åˆ†ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ•°æ®åº“è¿ç§»
```bash
# åˆ›å»ºè¿ç§»è„šæœ¬
alembic revision --autogenerate -m "Create blog tables"

# æ‰§è¡Œè¿ç§»
alembic upgrade head
```

### 2. æ³¨å†Œè·¯ç”±
åœ¨ `backend/main.py` ä¸­ï¼š
```python
from modules.blogs.api.router import api_router as blogs_router

app.include_router(blogs_router, prefix="/api/blogs", tags=["blogs"])
```

### 3. æµ‹è¯•æ¥å£
```bash
# è·å–æ–‡ç« åˆ—è¡¨
curl http://localhost:8000/api/blogs/articles

# è·å–ç½®é¡¶æ–‡ç« 
curl http://localhost:8000/api/blogs/articles/pinned

# è·å–æ–‡ç« è¯¦æƒ…
curl http://localhost:8000/api/blogs/articles/{id}
```

## ğŸ“– API æ–‡æ¡£

è¯¦ç»†çš„ API ç«¯ç‚¹è¯´æ˜è¯·æŸ¥çœ‹ [`api.md`](./api.md)

## ğŸ”’ æƒé™è¯´æ˜

- **å…¬å¼€æ¥å£ï¼š** æ–‡ç« åˆ—è¡¨ã€è¯¦æƒ…ã€åˆ†ç±»ã€æœç´¢
- **ç™»å½•ç”¨æˆ·ï¼š** ç‚¹èµã€è¯„è®ºã€å‘å¸ƒç”¨æˆ·åšå®¢
- **ç®¡ç†å‘˜ï¼š** åˆ›å»º/ç¼–è¾‘/åˆ é™¤æ–‡ç« ã€ç½®é¡¶ã€å®¡æ ¸

## ğŸ¨ å‰ç«¯å¯¹æ¥

### å‰ç«¯ä½ç½®
`frontend/web/src/pages/BlogsPage/`

### ä¸»è¦ç»„ä»¶
- `CategorySidebar.tsx` - åˆ†ç±»ä¾§è¾¹æ 
- `ContentArea.tsx` - æ–‡ç« å†…å®¹åŒºåŸŸ
- `ArticleModal.tsx` - æ–‡ç« å¡ç‰‡ç»„ä»¶

### æ•°æ®æ ¼å¼
å‰ç«¯ ArticleModal éœ€è¦çš„å­—æ®µï¼š
```typescript
{
  coverImage: string;      // å°é¢å›¾ URL
  title: string;           // æ ‡é¢˜
  subtitle: string;        // å‰¯æ ‡é¢˜/æ‘˜è¦
  author: string;          // ä½œè€…åç§°
  date: string;            // å‘å¸ƒæ—¥æœŸ
  category: string;        // åˆ†ç±»
}
```

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

1. **ç¼“å­˜ç­–ç•¥**
   - æ–‡ç« åˆ—è¡¨ï¼šRedis 5 åˆ†é’Ÿ
   - æ–‡ç« è¯¦æƒ…ï¼šRedis 10 åˆ†é’Ÿ
   - ä½¿ç”¨ç¼“å­˜ key: `blog:articles:list:{category}:{page}`

2. **å®‰å…¨æ€§**
   - æ–‡ç« å†…å®¹éœ€è¦ HTML æ¸…æ´—ï¼ˆé˜² XSSï¼‰
   - å›¾ç‰‡ä¸Šä¼ é™åˆ¶ç±»å‹å’Œå¤§å°
   - ä½¿ç”¨é€Ÿç‡é™åˆ¶é˜²æ­¢æ»¥ç”¨

3. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨æ•°æ®åº“ç´¢å¼•
   - åˆ†é¡µæŸ¥è¯¢ï¼ˆé»˜è®¤ 12 ç¯‡/é¡µï¼‰
   - CDN ç¼“å­˜å›¾ç‰‡èµ„æº

## ğŸ”„ å¼€å‘çŠ¶æ€

- [ ] æ•°æ®åº“æ¨¡å‹å®šä¹‰
- [ ] API è·¯ç”±å®ç°
- [ ] ä¸šåŠ¡é€»è¾‘æœåŠ¡
- [ ] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- [ ] æœç´¢åŠŸèƒ½
- [ ] æµ‹è¯•ç”¨ä¾‹
- [ ] æ–‡æ¡£å®Œå–„

---

**åˆ›å»ºæ—¶é—´ï¼š** 2026-02-09
**è´Ÿè´£äººï¼š** Backend Team
**å‰ç«¯å¯¹æ¥ï¼š** BlogsPage ç»„ä»¶
