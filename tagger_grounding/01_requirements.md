# Stage 01 - 需求冻结与规范定义

目标：定义清晰可执行的需求边界，避免后续争议。

## 一、输入与输出定义
- 输入：
  - 用户输入棋手名
  - PGN 文件（可多文件）
- 输出：
  - tag 统计（白/黑/总）
  - 导出文件（CSV/JSON）
  - 处理状态（成功/部分成功/失败）

## 二、统计口径（必须一致）
- 分母 = 该棋手走子总步数。
- 白/黑统计分别使用各自分母，总统计为两者合计。

## 三、失败处理
- 单盘失败不影响整体。
- 失败盘记录 headers + 原因，前端展示列表。

## 四、模糊匹配
- 优先级：aliases > display_name > PGN headers 模糊匹配。
- 匹配不唯一必须人工确认。

## 五、去重原则
- game_hash = 规范化 headers + 主线走子（以 Stage 07 的规则为唯一标准）。
- 去重维度：player_id + game_hash。

## Checklist
- [x] 统计口径已写入文档（分母为该棋手走子总步数）
- [x] 失败处理策略已明确（单盘失败不影响整体）
- [x] 模糊匹配优先级已确定
- [x] 去重规则已确定（player_id + game_hash）
